{"version":3,"file":"js/161-1169d8139e6b94075677.js","mappings":"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","sources":["webpack://togo_var/./app/frontend/assets/ lazy ^\\.\\/.*\\/karyotype\\.tsv$ namespace object","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorColumns.js","webpack://togo_var/./app/frontend/src/components/ErrorModal.js","webpack://togo_var/./app/frontend/src/components/ConditionDiseaseSearch/flipColumn.js","webpack://togo_var/./app/frontend/src/components/ConditionDiseaseSearch/ConditionDiseaseSearchOntologyCard.js","webpack://togo_var/./app/frontend/src/components/ConditionDiseaseSearch/ConditionDiseaseSearchColumn.js","webpack://togo_var/./app/frontend/src/components/ConditionDiseaseSearch/ConditionDiseaseSearchOntologyView.js","webpack://togo_var/./app/frontend/src/components/ConditionDiseaseSearch/ConditionDiseaseSearch.js","webpack://togo_var/./app/frontend/src/components/LogarithmizedBlockGraphFrequencyView.js","webpack://togo_var/./app/frontend/src/components/RangeSliderView.js","webpack://togo_var/./app/frontend/src/classes/SideBar.js","webpack://togo_var/./app/frontend/src/classes/Configuration.js","webpack://togo_var/./app/frontend/src/classes/ChromosomeView.js","webpack://togo_var/./app/frontend/src/classes/Karyotype.js","webpack://togo_var/./app/frontend/src/classes/ActivityIndicator.js","webpack://togo_var/./app/frontend/src/classes/TopPageLayoutManager.js","webpack://togo_var/./app/frontend/src/classes/ModuleTabsView.js","webpack://togo_var/./app/frontend/src/classes/DownloadButton.js","webpack://togo_var/./app/frontend/src/classes/PanelView.js","webpack://togo_var/./app/frontend/src/classes/PanelViewCheckList.js","webpack://togo_var/./app/frontend/src/classes/PanelViewFilterAlternativeAlleleFrequency.js","webpack://togo_var/./app/frontend/src/classes/PanelViewFilterVariantCallingQuality.js","webpack://togo_var/./app/frontend/src/classes/CollapseView.js","webpack://togo_var/./app/frontend/src/classes/PanelViewFilterConsequence.js","webpack://togo_var/./app/frontend/src/classes/PanelViewPreviewGene.js","webpack://togo_var/./app/frontend/src/classes/PreviewToVariantReport.js","webpack://togo_var/./app/frontend/src/classes/PanelViewPreviewExternalLinks.js","webpack://togo_var/./app/frontend/src/classes/PanelViewPreviewAlternativeAlleleFrequencies.js","webpack://togo_var/./app/frontend/src/classes/PanelViewPreviewConsequence.js","webpack://togo_var/./app/frontend/src/classes/PanelViewPreviewClinicalSignificance.js","webpack://togo_var/./app/frontend/src/classes/TippyBox.js","webpack://togo_var/./app/frontend/src/home.js","webpack://togo_var/./app/frontend/src/utils/cachedAxios.js","webpack://togo_var/./app/frontend/src/utils/capitalizeFirstLetter.js","webpack://togo_var/./app/frontend/src/utils/debounce.js","webpack://togo_var/./app/frontend/src/utils/keyDownEvent.js","webpack://togo_var/./app/frontend/assets/GRCh37/search_conditions.json","webpack://togo_var/./app/frontend/assets/GRCh38/search_conditions.json","webpack://togo_var/./app/frontend/assets/tooltips.json","webpack://togo_var/./app/frontend/stylesheets/object/component/condition-item-value-view.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/frequency-count-value-view.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/prediction-range-slider.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/prediction-value-view.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/search-field-suggestions-list.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/search-field-with-suggestions.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/search-field.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/simple-search-button.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/simple-search-examples.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/simple-search-view.scss","webpack://togo_var/./app/frontend/stylesheets/object/component/tab-view.scss","webpack://togo_var/./app/frontend/src/api/fetchData.ts","webpack://togo_var/./app/frontend/src/classes/AdvancedSearchBuilderView.ts","webpack://togo_var/./app/frontend/src/classes/AdvancedSearchSelection.ts","webpack://togo_var/./app/frontend/src/classes/AdvancedSearchToolbar.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionGroupView.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionItemView.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditor.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorCheckboxes.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorClinicalSignificance.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorDatasetColumns.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorDisease.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorFrequencyCount.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorGene.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorLocation.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorPathogenicityPrediction.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/ConditionValueEditorVariantID.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/dataset-columns/DatasetCheckStateManager.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/dataset-columns/DatasetColumnEventHandler.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/dataset-columns/DatasetColumnRenderer.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/dataset-columns/DatasetTreeDataProcessor.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/dataset-columns/DatasetValueViewManager.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValueEditor/dataset-columns/types.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionValues.ts","webpack://togo_var/./app/frontend/src/classes/Condition/ConditionView.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/dataset.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/default.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/gene.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/index.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/location.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/pathogenicity.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/significance.ts","webpack://togo_var/./app/frontend/src/classes/Condition/queryBuilders/variantId.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsColumnTemplates.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsColumnUpdater.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsRowView.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsScrollBar.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsView.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsViewDataManager.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsViewDisplayManager.ts","webpack://togo_var/./app/frontend/src/classes/Results/ResultsViewTouchHandler.ts","webpack://togo_var/./app/frontend/src/classes/Results/scroll/DragManager.ts","webpack://togo_var/./app/frontend/src/classes/Results/scroll/ScrollBarRenderer.ts","webpack://togo_var/./app/frontend/src/classes/Results/scroll/index.ts","webpack://togo_var/./app/frontend/src/classes/Results/scroll/scrollCalculator.ts","webpack://togo_var/./app/frontend/src/components/ConditionItemValueView.ts","webpack://togo_var/./app/frontend/src/components/ConditionPathogenicityPredictionSearch/PredictionDatasets.ts","webpack://togo_var/./app/frontend/src/components/ConditionPathogenicityPredictionSearch/PredictionRangeSliderView.ts","webpack://togo_var/./app/frontend/src/components/ConditionPathogenicityPredictionSearch/PredictionValueView.ts","webpack://togo_var/./app/frontend/src/components/ConditionPathogenicityPredictionSearch/TabView.ts","webpack://togo_var/./app/frontend/src/components/ConditionPathogenicityPredictionSearch/createGradientSlider.ts","webpack://togo_var/./app/frontend/src/components/ConditionPathogenicityPredictionSearch/setInequalitySign.ts","webpack://togo_var/./app/frontend/src/components/FrequencyCountValueView.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SearchField.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SimpleSearch/SimpleSearchButton.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SimpleSearch/SimpleSearchConstants.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SimpleSearch/SimpleSearchController.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SimpleSearch/SimpleSearchEventHandlers.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SimpleSearch/SimpleSearchExamples.ts","webpack://togo_var/./app/frontend/src/components/SearchField/SimpleSearch/SimpleSearchView.ts","webpack://togo_var/./app/frontend/src/components/SearchField/scrollIntoView.ts","webpack://togo_var/./app/frontend/src/components/SearchField/suggestions/SearchFieldSuggestionsList.ts","webpack://togo_var/./app/frontend/src/components/SearchField/suggestions/SearchFieldWithSuggestions.ts","webpack://togo_var/./app/frontend/src/components/SearchField/suggestions/handlers/InputEventHandler.ts","webpack://togo_var/./app/frontend/src/components/SearchField/suggestions/handlers/SearchFieldController.ts","webpack://togo_var/./app/frontend/src/components/SearchField/suggestions/handlers/SuggestionKeyboardHandler.ts","webpack://togo_var/./app/frontend/src/components/SearchField/suggestions/handlers/SuggestionSelectionHandler.ts","webpack://togo_var/./app/frontend/src/conditions.ts","webpack://togo_var/./app/frontend/src/definition.ts","webpack://togo_var/./app/frontend/src/store/StoreManager.ts","webpack://togo_var/./app/frontend/src/store/initializeApp.ts","webpack://togo_var/./app/frontend/src/store/searchManager.ts","webpack://togo_var/./app/frontend/src/utils/deviceDetection.ts","webpack://togo_var/./app/frontend/src/utils/dom/createEl.ts","webpack://togo_var/./app/frontend/src/utils/dom/select.ts"],"sourcesContent":["var map = {\n\t\"./GRCh37/karyotype.tsv\": [\n\t\t1298,\n\t\t298\n\t],\n\t\"./GRCh38/karyotype.tsv\": [\n\t\t1,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 550;\nmodule.exports = webpackAsyncContext;","import { ConditionValueEditor } from './ConditionValueEditor.ts';\nimport { ADVANCED_CONDITIONS } from '../../../global';\nimport { CONDITION_TYPE } from '../../../definition.ts';\n\nconst SELECTION_DEPENDED_ON_PARENT = {\n  consequence: true,\n  disease: false,\n};\n// const DISEASE_API = {\n//   PATH: `${API_URL}/sparqlist/api/advanced_search_disease_selector`,\n//   KEY: 'mesh_in',\n// };\n\nexport default class ConditionValueEditorColumns extends ConditionValueEditor {\n  /**\n   * @param {ConditionValues} conditionValues\n   * @param {ConditionItemView} conditionView */\n  constructor(conditionValues, conditionView) {\n    super(conditionValues, conditionView);\n\n    this._data = this._prepareData();\n    this._selectionDependedOnParent =\n      SELECTION_DEPENDED_ON_PARENT[this.conditionType];\n\n    // HTML\n    this.createSectionEl(\n      'columns-editor-view',\n      `\n    <header>Select ${this.conditionType}</header>\n    <div class=\"body\">\n      <div class=\"columns\"></div>\n      <div class=\"description\"></div>\n    </div>`\n    );\n\n    this._columns = this.bodyEl.querySelector(':scope > .columns');\n    this._description = this.bodyEl.querySelector(':scope > .description');\n    this._drawColumn();\n  }\n\n  // public methods\n\n  keepLastValues() {\n    this._lastValues = this._data\n      .filter((datum) => datum.value && datum.checked)\n      .map((datum) => datum.value);\n  }\n\n  restore() {\n    this._data.forEach(\n      (datum) => (datum.checked = this._lastValues.indexOf(datum.value) !== -1)\n    );\n    this._update();\n  }\n\n  get isValid() {\n    return this.conditionItemValueViews.length > 0;\n  }\n\n  // private methods\n\n  _prepareData() {\n    switch (this.conditionType) {\n      case CONDITION_TYPE.consequence:\n      case CONDITION_TYPE.dataset:\n        return ADVANCED_CONDITIONS[this.conditionType].values.map((value) =>\n          Object.assign({ checked: false }, value)\n        );\n      case CONDITION_TYPE.disease:\n        return [];\n    }\n    // Fallback: ensure an array is always returned to avoid undefined\n    return [];\n  }\n\n  _drawColumn(parentId) {\n    this._getItems(parentId).then((items) => {\n      // make HTML\n      const column = document.createElement('div');\n      column.classList.add('column');\n      column.dataset.depth =\n        this._columns.querySelectorAll(':scope > .column').length;\n      this._columns.append(column);\n      column.innerHTML = `\n        <ul>\n          ${items\n            .map((item) => {\n              return `<li\n              ${item.id ? `data-id=\"${item.id}\"` : ''}\n              ${item.value ? `data-value=\"${item.value}\"` : ''}\n              ${item.parent ? `data-parent=\"${item.parent}\"` : ''}\n            >\n              <label>\n                <input type=\"checkbox\">\n                ${\n                  this.conditionType === CONDITION_TYPE.dataset\n                    ? `<span class=\"dataset-icon\" data-dataset=\"${item.value}\"></span>`\n                    : ''\n                }\n                <span>${item.label}</span>\n              </label>\n              ${\n                item.children === undefined\n                  ? ''\n                  : `<div class=\"arrow\" data-id=\"${item.id}\"></div>`\n              }\n            </li>`;\n            })\n            .join('')}\n        </ul>`;\n\n      // attach events\n      // add/remove condition\n      for (const item of column.querySelectorAll(\n        ':scope > ul > li > label > input'\n      )) {\n        item.addEventListener('change', (e) => {\n          // change status\n          const li = e.target.closest('li');\n          const datum = this._data.find((datum) => datum.id == li.dataset.id);\n          datum.checked = e.target.checked;\n          // if it has children, aggregate child items\n          if (datum.children) this._updateChildren(datum.id, e.target.checked);\n          this._update(datum.id);\n        });\n      }\n      // drill down\n      for (const item of column.querySelectorAll(':scope > ul > li > .arrow')) {\n        item.addEventListener('click', (e) => {\n          const item = e.target.closest('li');\n          // release selecting item, and remove subdirectory\n          item.parentNode\n            .querySelector(':scope > .-selected')\n            ?.classList.remove('-selected');\n          const depth = parseInt(item.closest('.column').dataset.depth);\n          for (const column of item\n            .closest('.columns')\n            .querySelectorAll(':scope > .column')) {\n            if (parseInt(column.dataset.depth) > depth)\n              column.parentNode.removeChild(column);\n          }\n          // select, and drill down\n          item.classList.add('-selected');\n          this._drawColumn(+e.target.dataset.id);\n        });\n      }\n      this._update();\n\n      // scroll\n      const left = this.bodyEl.scrollWidth - this.bodyEl.clientWidth;\n      if (left > 0) {\n        this.bodyEl.scrollTo({\n          top: 0,\n          left: left,\n          behavior: 'smooth',\n        });\n      }\n    });\n  }\n\n  _getItems(parentId) {\n    return new Promise((resolve, reject) => {\n      // TODO: alt allele, consequence  disease \n      switch (this.conditionType) {\n        case CONDITION_TYPE.consequence:\n        case CONDITION_TYPE.dataset:\n          resolve(this._data.filter((datum) => datum.parent === parentId));\n          break;\n        default:\n          reject(new Error('ConditionValueEditorColumns - Not implemented'));\n      }\n    });\n  }\n\n  _updateChildren(id, checked) {\n    // reflect\n    if (!this._selectionDependedOnParent) return;\n    const children = this._data.filter((datum) => datum.parent == id);\n    children.forEach((child) => {\n      child.checked = checked;\n      this._updateChildren(child.id, checked);\n    });\n  }\n\n  _updateIndeterminate() {\n    // if (!this._selectionDependedOnParent) return;\n\n    const checkLeaves = (datum) => {\n      if (!datum.children || datum.children.length === 0) return;\n      let numberOfChecked = 0;\n      datum.children.forEach((child) => {\n        const childDatum = this._data.find((datum) => datum.id === child);\n        if (childDatum.children) {\n          numberOfChecked += checkLeaves(childDatum);\n        } else {\n          numberOfChecked += childDatum.checked;\n        }\n      });\n      let checked, indeterminate;\n      switch (true) {\n        case numberOfChecked === 0:\n          checked = false;\n          indeterminate = false;\n          break;\n        case numberOfChecked === datum.children.length:\n          checked = true;\n          indeterminate = false;\n          break;\n        default:\n          checked = false;\n          indeterminate = true;\n          break;\n      }\n      const checkbox = this._columns.querySelector(\n        `li[data-id=\"${datum.id}\"] > label > input`\n      );\n      if (checkbox) {\n        checkbox.checked = checked;\n        checkbox.indeterminate = indeterminate;\n      }\n      return checked || indeterminate;\n    };\n\n    // top level\n    const topLevelNodes = this._data.filter(\n      (datum) => datum.parent === undefined\n    );\n    topLevelNodes.forEach((datum) => checkLeaves(datum));\n  }\n\n  _update() {\n    // reflect check status in DOM\n    this._data.forEach((datum) => {\n      const checkbox = this._columns.querySelector(\n        `li[data-id=\"${datum.id}\"] > label > input`\n      );\n      if (checkbox) checkbox.checked = datum.checked;\n    });\n    // update selection status of upper hierarchy\n    this._updateIndeterminate();\n\n    // update values\n    this._data.forEach((datum) => {\n      if (!datum.value) return;\n      if (datum.checked) {\n        this.addValueView(datum.value, datum.label);\n      } else {\n        this.removeValueView(datum.value);\n      }\n    });\n\n    // validation\n    this.conditionValues.update(this._validate());\n  }\n\n  _validate() {\n    return this.isValid;\n  }\n}\n","import { LitElement, css, html } from 'lit';\n\nexport class ErrorModal extends LitElement {\n  static styles = css`\n    p {\n      font-size: 2em;\n      color: green;\n    }\n  `;\n\n  static properties() {\n    return {\n      erorMessage: { type: String },\n    };\n  }\n\n  constructor() {\n    super(...arguments);\n    this.errorMessage = '';\n  }\n\n  render() {\n    return html`\n      <div class=\"err-container\">\n        <p>${this.errorMessage}</p>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('error-modal', ErrorModal);\n","import { directive, AsyncDirective } from 'lit/async-directive.js';\nimport { noChange, nothing } from 'lit';\n\nconst disconnectedRects = new Map();\nclass Flip extends AsyncDirective {\n  parent;\n  element;\n  boundingRect;\n  id;\n  role = '';\n  parentRect = null;\n\n  render() {\n    return nothing;\n  }\n\n  update(\n    part,\n    [\n      {\n        id = undefined,\n        role = '',\n        options = {},\n        heroId = undefined,\n        scrolledHeroRect = null,\n      } = {},\n    ]\n  ) {\n    this.id = id;\n    this.role = role;\n    this.heroId = heroId;\n    this.scrolledHeroRect = scrolledHeroRect;\n\n    if (\n      this.role === 'hero' &&\n      this.id !== this.heroId &&\n      this.id !== 'MONDO_0000001' &&\n      this.id !== 'dummy'\n    ) {\n      // then remove the element from the DOM with animation\n      disconnectedRects.set(this.id, part.element.getBoundingClientRect());\n      this.remove();\n    }\n\n    if (this.role !== 'hero' && !disconnectedRects.has(this.id)) {\n      disconnectedRects.set(this.id, { y: 0, x: 0, width: 0, height: 0 });\n    }\n\n    this.options = {\n      ...this.options,\n      ...options,\n    };\n\n    if (this.element !== part.element) {\n      this.element = part.element;\n\n      this.parent =\n        this.element.parentElement ||\n        this.element.getRootNode().querySelector('.column');\n    }\n    // memorize boundingRect before element updates\n    if (this.boundingRect) {\n      this.boundingRect = this.element.getBoundingClientRect();\n    }\n    // the timing on which LitElement batches its updates, to capture the \"last\" frame of our animation.\n    Promise.resolve().then(() => this.prepareToFlip());\n    return noChange;\n  }\n\n  prepareToFlip() {\n    if (!this.boundingRect) {\n      this.boundingRect = disconnectedRects.has(this.id)\n        ? disconnectedRects.get(this.id)\n        : this.element.getBoundingClientRect();\n      disconnectedRects.delete(this.id);\n    }\n\n    this.flip();\n  }\n\n  flip(listener, removing) {\n    let previous = this.boundingRect;\n\n    if (this.id === this.heroId) {\n      previous = this.scrolledHeroRect;\n    }\n\n    this.boundingRect = this.element.getBoundingClientRect();\n\n    const deltaY = (previous?.y || 0) - (this.boundingRect?.y || 0);\n\n    if (!deltaY && !removing) {\n      return;\n    }\n\n    const filteredListener = (event) => {\n      if (event.target === this.element) {\n        listener(event);\n        this.element.removeEventListener('transitionend', filteredListener);\n      }\n    };\n\n    this.element.addEventListener('transitionend', filteredListener);\n\n    this.element.animate(\n      [\n        {\n          transform: `translate(0, ${deltaY}px)`,\n        },\n        {\n          transform: `translate(0,0)`,\n        },\n      ],\n      this.options\n    );\n    // }\n  }\n\n  remove() {\n    this.element.animate(\n      [\n        {\n          opacity: 1,\n\n          transform: `translateY(0)`,\n        },\n        {\n          opacity: 0,\n\n          transform: `translateY(${\n            this.element.getBoundingClientRect().y + 200\n          }px)`,\n        },\n      ],\n      this.options\n    ).onfinish = () => {\n      if (disconnectedRects.has(this.id)) {\n        disconnectedRects.delete(this.id);\n      }\n      this.element.remove();\n    };\n  }\n\n  disconnected() {\n    if (this.role === 'hero') {\n      this.remove();\n    }\n\n    this.boundingRect = this.element.getBoundingClientRect();\n    if (typeof this.id !== 'undefined') {\n      disconnectedRects.set(this.id, this.boundingRect);\n      requestAnimationFrame(() => {\n        if (disconnectedRects.has(this.id)) {\n          this.remove();\n        }\n      });\n    }\n  }\n}\n\nexport const flip = directive(Flip);\n","import { LitElement, html, css, nothing } from 'lit';\nimport { ref, createRef } from 'lit/directives/ref.js';\n\nconst KEYS_MAP = {\n  id: {\n    text: 'MONDO',\n    link: 'http://purl.obolibrary.org/obo/',\n  },\n  cui: {\n    text: 'MedGen',\n    link: 'https://www.ncbi.nlm.nih.gov/medgen/',\n  },\n};\n\nexport class OntologyCard extends LitElement {\n  static get properties() {\n    return {\n      data: { type: Object, state: true },\n      hidden: { type: Boolean, attribute: true },\n      id: { type: String, attribute: true, reflect: true },\n      mode: {\n        type: String,\n        state: true,\n      },\n      order: {\n        type: String,\n        state: true,\n      },\n      prevRect: {\n        type: Object,\n        state: true,\n      },\n    };\n  }\n\n  shouldUpdate() {\n    if (this.data.id === 'dummy') {\n      this.hidden = true;\n    } else {\n      this.hidden = false;\n    }\n    return true;\n  }\n\n  constructor() {\n    super();\n    this.data = {};\n    this.hidden = false;\n    this.mode = '';\n    this.order = '';\n    this.prevRect = { x: 0, y: 0, width: 0, height: 0 };\n    this._skipKeys = ['label', 'children', 'parents', 'leaf', 'root'];\n    this.cardRef = createRef();\n    this._leftCoinnector = createRef;\n    this.leftConnectorClassName = '';\n    this.rightConnectorClassName = '';\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      position: relative;\n      --connector-line: 1px solid #ccc;\n      --selected-bg-color: white;\n      --default-bg-color: white;\n      --selected-border-color: rgb(17, 127, 147);\n    }\n\n    .-hero-right:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-hero-left:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-children-first:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 1px;\n      height: calc(100% - min(50%, 15px) + 5px);\n      border-left: var(--connector-line);\n      bottom: -6px;\n      box-sizing: border-box;\n    }\n\n    .-children-first:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-children-last:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 1px;\n      height: calc(min(50%, 15px) + 6px);\n      border-left: var(--connector-line);\n      top: -6px;\n      box-sizing: border-box;\n    }\n\n    .-children-last:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-top: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-children-mid:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 1px;\n      height: calc(100% + 14px);\n      border-left: var(--connector-line);\n      top: -6px;\n      box-sizing: border-box;\n    }\n\n    .-children-mid:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-parents-first:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 1px;\n      height: calc(100% - min(50%, 15px) + 5px);\n      border-right: var(--connector-line);\n      bottom: -6px;\n      right: 0;\n      box-sizing: border-box;\n    }\n\n    .-parents-first:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-parents-last:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 1px;\n      height: calc(min(50%, 15px) + 6px);\n      border-right: var(--connector-line);\n      top: -6px;\n      right: 0;\n      box-sizing: border-box;\n    }\n\n    .-parents-last:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-top: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-parents-mid:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 1px;\n      height: calc(100% + 14px);\n      border-right: var(--connector-line);\n      top: -6px;\n      right: 0;\n      box-sizing: border-box;\n    }\n\n    .-parents-mid:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-parents-single:after {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .-children-single:before {\n      position: absolute;\n      z-index: 9;\n      content: '';\n      width: 100%;\n      height: 1px;\n      border-bottom: var(--connector-line);\n      top: min(50%, 15px);\n      box-sizing: border-box;\n    }\n\n    .ontology-card {\n      padding: 6px;\n      border: 1px solid #ccc;\n      border-radius: 8px;\n      background-color: #fff;\n      cursor: pointer;\n      position: relative;\n      width: min(80%, 20rem);\n      max-width: 30rem;\n      box-sizing: border-box;\n      margin-bottom: 6px;\n    }\n\n    .ontology-card:hover {\n      filter: brightness(0.98);\n    }\n\n    h3 {\n      display: inline-block;\n      text-transform: lowercase;\n      margin-top: 0;\n      margin-bottom: 0;\n    }\n\n    h3:first-letter {\n      text-transform: uppercase;\n    }\n\n    .card-container {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n    }\n\n    .hyper-text {\n      color: var(--color-key-dark3);\n      text-decoration: underline;\n    }\n\n    .hyper-text:active,\n    .hyper-text:hover {\n      color: var(--color-key-dark1);\n    }\n\n    .connector {\n      position: relative;\n      flex-grow: 1;\n    }\n\n    .selected {\n      background-color: var(--selected-bg-color);\n      border-color: var(--selected-border-color);\n    }\n\n    .hidden {\n      visibility: hidden;\n    }\n\n    .table-container {\n      max-height: 10rem;\n      margin-top: 0.3em;\n      overflow-y: auto;\n    }\n  `;\n\n  willUpdate(prevParams) {\n    if (this.mode === 'hero') {\n      if (this.data.leaf) {\n        this.leftConnectorClassName = '-hero-left';\n      } else if (this.data.root) {\n        this.rightConnectorClassName = '-hero-right';\n      } else {\n        this.leftConnectorClassName = `-hero-left`;\n        this.rightConnectorClassName = `-hero-right`;\n      }\n    } else if (this.mode === 'children') {\n      this.leftConnectorClassName = `-${this.mode}-${this.order}`;\n    } else if (this.mode === 'parents') {\n      this.rightConnectorClassName = `-${this.mode}-${this.order}`;\n    }\n\n    this.prevMode = prevParams.get('mode');\n    if (this.data.id === 'dummy') {\n      this.leftConnectorClassName = '';\n      this.rightConnectorClassName = '';\n    }\n  }\n\n  updated() {\n    const animProps = {\n      duration: 500,\n      easing: 'ease-out',\n    };\n\n    if (this.mode === 'hero') {\n      let animation = [\n        {\n          height: `${this.prevRect?.height || 0}px`,\n          overflow: 'hidden',\n        },\n        {\n          height: `${\n            this.cardRef?.value.getBoundingClientRect().height || 0\n          }px`,\n        },\n      ];\n\n      animation[0].backgroundColor = this.defaultBgColor;\n      animation[1].backgroundColor = this.selectedBgColor;\n\n      this.cardRef.value.animate(animation, animProps);\n    }\n  }\n\n  firstUpdated() {\n    this.defaultBgColor = getComputedStyle(this.cardRef.value).getPropertyValue(\n      '--default-bg-color'\n    );\n    this.selectedBgColor = getComputedStyle(\n      this.cardRef.value\n    ).getPropertyValue('--selected-bg-color');\n  }\n\n  render() {\n    return html`\n      <div class=\"card-container\">\n        <div class=\"connector ${this.leftConnectorClassName}\"></div>\n        <div\n          ${ref(this.cardRef)}\n          class=\"ontology-card ${this.hidden ? 'hidden' : ''} ${this.mode ===\n          'hero'\n            ? 'selected'\n            : ''}\"\n        >\n          <div class=\"ontology-card-header\">\n            <h3>${this.data?.label || '...'}</h3>\n            ${this.mode === 'hero'\n              ? html`\n                  <div class=\"table-container\">\n                    <table>\n                      <tbody>\n                        ${Object.keys(this.data)\n                          .filter((key) => !this._skipKeys.includes(key))\n                          .map((key) => {\n                            return html`\n                              <tr>\n                                <td class=\"key\">${KEYS_MAP[key].text}:</td>\n                                <td class=\"data\">\n                                  <a\n                                    class=\"hyper-text -external\"\n                                    href=\"${KEYS_MAP[key].link}${this.data[\n                                      key\n                                    ]}\"\n                                    target=\"_blank\"\n                                    >${this.data[key]}</a\n                                  >\n                                </td>\n                              </tr>\n                            `;\n                          })}\n                      </tbody>\n                    </table>\n                  </div>\n                `\n              : nothing}\n          </div>\n        </div>\n        <div class=\"connector ${this.rightConnectorClassName}\"></div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('ontology-card', OntologyCard);\n","import { LitElement, css, html, nothing } from 'lit';\n\nimport { repeat } from 'lit/directives/repeat.js';\n\nimport { flip } from './flipColumn';\n\nimport './ConditionDiseaseSearchOntologyCard';\n\nexport default class Column extends LitElement {\n  static styles = css`\n    :host {\n      flex-grow: 1;\n      flex-basis: 0;\n      display: block;\n      position: relative;\n    }\n\n    .column {\n      height: 100%;\n\n      position: relative;\n      overflow-y: auto;\n      overflow-x: hidden;\n    }\n\n    ontology-card:last-child {\n      margin-bottom: 10px;\n    }\n  `;\n\n  static get properties() {\n    return {\n      nodes: { type: Array, state: true },\n      role: { type: String, state: true },\n      heroId: {\n        type: String,\n        state: true,\n      },\n      scrolledHeroRect: { type: Object, state: true },\n      animationOptions: { type: Object, state: true },\n    };\n  }\n  constructor() {\n    super();\n    this.nodes = [];\n    this.heroId = undefined;\n    this.role = '';\n    this.scrolledHeroRect = null;\n    this.animationOptions = {};\n  }\n\n  _handleClick(e) {\n    if (e.target.tagName === 'ONTOLOGY-CARD') {\n      // only if clicked on the card itself, not on connector div\n\n      // dispatch event to load new data by id\n      this.dispatchEvent(\n        new CustomEvent('column-click', {\n          detail: {\n            id: e.target.id,\n            role: this.role,\n            rect: e.target.getBoundingClientRect(),\n          },\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n  }\n\n  render() {\n    return html`\n      <div\n        class=\"column\"\n        @click=\"${this.nodes[0].id === 'dummy' ? null : this._handleClick}\"\n      >\n        ${this.nodes.length\n          ? html`\n              ${repeat(\n                this.nodes,\n                (node) => node.id,\n                (node, index) => {\n                  return html`<ontology-card\n                    key=\"${node.id}\"\n                    id=\"${node.id}\"\n                    .data=${node}\n                    .mode=${this.role}\n                    .prevRect=${this.scrolledHeroRect}\n                    .order=${this.nodes.length === 1\n                      ? 'single'\n                      : index === 0\n                      ? 'first'\n                      : index === this.nodes.length - 1\n                      ? 'last'\n                      : 'mid'}\n                    ${flip({\n                      id: node.id,\n                      heroId: this.heroId,\n                      role: this.role,\n                      scrolledHeroRect: this.scrolledHeroRect,\n                      options: this.animationOptions,\n                    })}\n                  />`;\n                }\n              )}\n            `\n          : nothing}\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('ontology-column', Column);\n","import '../ErrorModal';\n\nimport { LitElement, html, css } from 'lit';\nimport { ref, createRef } from 'lit/directives/ref.js';\n\nimport { repeat } from 'lit/directives/repeat.js';\n\nimport './ConditionDiseaseSearchColumn';\n\nimport { cachedAxios } from '../../utils/cachedAxios';\nimport { API_URL } from '../../global';\n\nclass Container extends LitElement {\n  flexRef = createRef();\n  clipRef = createRef();\n  nodeRef = createRef();\n  movement = '';\n  flexWidth = 0;\n  deltaWidth = 0;\n  nodeWidth = 0;\n  gap = 0;\n  animate = null;\n  scrolledRect = null;\n  API = new cachedAxios(`${API_URL}/api/inspect`);\n  dataColumns = {\n    _parents: [],\n    parents: [],\n    hero: [],\n    children: [],\n    _children: [],\n  };\n  animationOptions = {\n    duration: 500,\n    easing: 'ease-in-out',\n  };\n\n  static styles = css`\n    :host {\n      font-size: 10px;\n      display: block;\n      height: 100%;\n      position: relative;\n    }\n\n    .clip {\n      height: 200px;\n      overflow: hidden;\n      position: relative;\n    }\n\n    .flex {\n      height: 100%;\n      display: flex;\n      flex-direction: row;\n    }\n  `;\n\n  constructor() {\n    super();\n    this._id = '';\n    this._columns = ['parents', 'hero', 'children'];\n    this.data = {};\n  }\n\n  static get properties() {\n    return {\n      data: { type: Object, state: true },\n      _id: { type: String, attribute: 'id' },\n      _columns: {\n        type: Array,\n        state: true,\n      },\n    };\n  }\n\n  set _id(id) {\n    if (this.data?.id !== id) {\n      this._loadingStarted();\n      this.API.get(`/disease?node=${id}`).then(({ data }) => {\n        this.data = data;\n\n        this._loadingEnded();\n      });\n    }\n  }\n\n  willUpdate(changedProperties) {\n    if (changedProperties.has('data')) {\n      if (changedProperties.get('data')) {\n        if (this.data.id && changedProperties.get('data').id !== this.data.id) {\n          // parents before update\n          this.dataColumns._parents = changedProperties.get('data')\n            ?.parents || [{ id: 'dummy', label: 'dummy' }];\n          // children before update\n          this.dataColumns._children = changedProperties.get('data')\n            ?.children || [{ id: 'dummy', label: 'dummy' }];\n\n          if (this._columns.length === 4) {\n            let movement;\n            if (this._columns.includes('_parents')) {\n              movement = 'left';\n            } else if (this._columns.includes('_children')) {\n              movement = 'right';\n            } else {\n              movement = '';\n            }\n\n            // hero before update\n            if (movement === 'left') {\n              this.dataColumns.hero = this.dataColumns._children;\n            } else if (movement === 'right') {\n              this.dataColumns.hero = this.dataColumns._parents;\n            }\n          } else {\n            this.dataColumns.hero = [this.data];\n          }\n\n          //parents after update\n          this.dataColumns.parents = this.data?.parents || [];\n          //children after update\n          this.dataColumns.children = this.data?.children || [];\n        }\n      }\n    }\n    if (changedProperties.has('_columns')) {\n      this.nodeWidth =\n        this.nodeRef.value?.getBoundingClientRect().width -\n          (this.nodeRef.value?.getBoundingClientRect().right -\n            this.clipRef.value?.getBoundingClientRect().right) || 0;\n      this.gap =\n        (this.clipRef.value?.getBoundingClientRect().width -\n          this.nodeWidth * 3) /\n        2;\n\n      this.flexWidth =\n        this._columns.length === 4\n          ? this.nodeWidth * this._columns.length +\n            (this._columns.length - 1) * this.gap +\n            'px'\n          : '100%';\n\n      this.deltaWidth = this.nodeWidth + this.gap;\n    }\n  }\n\n  firstUpdated() {\n    this.API.get(`/disease?node=${this._id}`).then(({ data }) => {\n      this.data = data;\n    });\n  }\n\n  _loadingStarted() {\n    this.dispatchEvent(\n      new CustomEvent('loading-started', { bubbles: true, composed: true })\n    );\n  }\n\n  _loadingEnded() {\n    if (this.data.id) {\n      this.dispatchEvent(\n        new CustomEvent('disease-selected', {\n          detail: {\n            id: this.data.id,\n            label: this.data.label[0].toUpperCase() + this.data.label.slice(1),\n          },\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n\n    this.dispatchEvent(\n      new CustomEvent('loading-ended', { bubbles: true, composed: true })\n    );\n  }\n\n  _handleClick(e) {\n    if (e.target?.role === 'parents' || e.target?.role === 'children') {\n      this.scrolledRect = e.detail?.rect || null;\n\n      this._loadingStarted();\n\n      this.API.get(`/disease?node=${e.detail.id}`).then(({ data }) => {\n        this.data = data;\n        this._loadingEnded();\n        this.updateComplete.then(() => {\n          if (e.detail.role === 'children') {\n            this.movement = 'left';\n\n            this._columns = ['_parents', 'parents', 'hero', 'children'];\n          } else if (e.detail.role === 'parents') {\n            this.movement = 'right';\n\n            this._columns = ['parents', 'hero', 'children', '_children'];\n          }\n        });\n      });\n    }\n  }\n\n  updated() {\n    if (this.movement === 'left') {\n      this.animate = this.flexRef.value.animate(\n        [\n          { transform: 'translateX(0)' },\n          {\n            transform: `translateX(${-this.deltaWidth}px)`,\n          },\n        ],\n        this.animationOptions\n      );\n    } else if (this.movement === 'right') {\n      this.animate = this.flexRef.value.animate(\n        [\n          {\n            transform: `translateX(${-this.deltaWidth}px)`,\n          },\n          { transform: 'translateX(0)' },\n        ],\n        this.animationOptions\n      );\n    }\n\n    if (this.animate) {\n      this.animate.onfinish = () => {\n        this.movement = '';\n        this._columns = ['parents', 'hero', 'children'];\n        this.animate = null;\n      };\n    }\n  }\n\n  render() {\n    return html`\n      <div class=\"clip\" ${ref(this.clipRef)}>\n        <div\n          class=\"flex\"\n          @column-click=\"${this._handleClick}\"\n          style=\"width: ${this.flexWidth}\"\n          ${ref(this.flexRef)}\n        >\n          ${repeat(\n            this._columns,\n            (column) => column,\n            (column) => {\n              return html`\n                <ontology-column\n                  .role=\"${column}\"\n                  .nodes=\"${this.dataColumns[column].length\n                    ? this.dataColumns[column]\n                    : [{ id: 'dummy', label: 'dummy' }]}\"\n                  ${ref(this.nodeRef)}\n                  .heroId=\"${column === 'hero' ? this.data.id : undefined}\"\n                  .scrolledHeroRect=\"${this.scrolledRect}\"\n                  .animationOptions=\"${this.animationOptions}\"\n                ></ontology-column>\n              `;\n            }\n          )}\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('condition-disease-ontology-view', Container);\n","import { LitElement, html, nothing } from 'lit';\n\nimport './ConditionDiseaseSearchOntologyView.js';\nimport '../SearchField/suggestions/SearchFieldWithSuggestions';\n\nimport { API_URL } from '../../global';\n\nconst suggestAPI = `${API_URL}/api/search/disease`;\n\nexport class ConditionDiseaseSearch extends LitElement {\n  _timer = null;\n\n  static get properties() {\n    return {\n      diseaseId: {\n        type: String,\n        reflect: true,\n      },\n      data: { state: true },\n      loading: { type: Boolean, state: true },\n    };\n  }\n\n  constructor(el) {\n    super();\n    el.appendChild(this);\n\n    this.valuesContainerEl = el.parentElement.querySelector(\n      ':scope > .summary > .values'\n    );\n\n    this.data = [];\n    this.diseaseId = 'MONDO_0000001';\n    this.loading = false;\n  }\n\n  _changeDiseaseEventHadnler(e) {\n    e.stopPropagation();\n    this.diseaseId = e.detail.id;\n    this.dispatchEvent(\n      new CustomEvent('disease-selected', {\n        detail: {\n          id: e.detail.id,\n          label: e.detail.label,\n        },\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  _loadingStartedHandler(e) {\n    e.stopPropagation();\n\n    this._timer = setTimeout(() => {\n      this.loading = true;\n    }, 200);\n  }\n\n  _loadingEndedHandler(e) {\n    e.stopPropagation();\n    this.loading = false;\n    if (this._timer) {\n      clearInterval(this._timer);\n      this._timer = null;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute('id', 'ConditionDiseaseSearch');\n  }\n\n  render() {\n    return html`\n      <search-field-with-suggestions\n        .suggestAPIURL=${suggestAPI}\n        .suggestAPIQueryParam=\"${'term'}\"\n        .options=\"${{ valueMappings: { valueKey: 'id', labelKey: 'label' } }}\"\n        .placeholder=${'Breast-ovarian cancer, familial 2'}\n        @new-suggestion-selected=\"${this._changeDiseaseEventHadnler}\"\n      ></search-field-with-suggestions>\n\n      <div class=\"container\">\n        ${this.loading\n          ? html`<div class=\"loading\">\n              <span></span>\n            </div>`\n          : nothing}\n\n        <condition-disease-ontology-view\n          ._id=\"${this.diseaseId}\"\n          @disease-selected=\"${this._changeDiseaseEventHadnler}\"\n          @loading-started=\"${this._loadingStartedHandler}\"\n          @loading-ended=\"${this._loadingEndedHandler}\"\n        ></condition-disease-ontology-view>\n      </div>\n    `;\n  }\n\n  // do not create shadow dom\n  createRenderRoot() {\n    return this;\n  }\n}\n\ncustomElements.define('condition-disease-search', ConditionDiseaseSearch);\n","import { LitElement, css, html } from 'lit';\n\nconst VERTICAL_BLOCK_WIDTH = 5;\nconst VERTICAL_BLOCK_HEIGHT = 2;\n\nexport class LogarithmizedBlockGraphFrequencyView extends LitElement {\n  static styles = css`\n    :host {\n      --color-dataset: var(--color-dataset-foreign);\n      position: relative;\n      margin-right: 1px;\n      border-style: solid;\n      border-width: 1px;\n      display: inline-block;\n      width: ${VERTICAL_BLOCK_WIDTH + 4}px;\n      height: ${VERTICAL_BLOCK_HEIGHT * 6 + 5 + 4}px;\n      vertical-align: middle;\n      font-size: 0;\n      background-color: white;\n    }\n    :host([data-dataset='gem_j_wga']) {\n      --color-dataset: var(--color-dataset-gemj);\n    }\n    :host([data-dataset^='jga_']) {\n      --color-dataset: var(--color-dataset-jga);\n    }\n    :host([data-dataset='tommo']) {\n      --color-dataset: var(--color-dataset-tommo);\n    }\n    :host([data-dataset='hgvd']) {\n      --color-dataset: var(--color-dataset-hgvd);\n    }\n    :host([data-dataset='ncbn']) {\n      --color-dataset: var(--color-dataset-ncbn);\n    }\n    :host([data-dataset='bbj']) {\n      --color-dataset: var(--color-dataset-bbj);\n    }\n    :host {\n      border-color: var(--color-dataset);\n    }\n    :host > .blocks {\n      position: absolute;\n      left: 1px;\n      bottom: 1px;\n      width: ${VERTICAL_BLOCK_WIDTH}px;\n      display: block;\n    }\n    :host > .blocks > .block {\n      position: absolute;\n      display: none;\n      width: ${VERTICAL_BLOCK_WIDTH}px;\n      height: ${VERTICAL_BLOCK_HEIGHT}px;\n      background-color: var(--color-dataset);\n    }\n    :host > .blocks > .block:nth-child(1) {\n      bottom: 0;\n    }\n    :host > .blocks > .block:nth-child(2) {\n      bottom: ${VERTICAL_BLOCK_HEIGHT + 1}px;\n    }\n    :host > .blocks > .block:nth-child(3) {\n      bottom: ${VERTICAL_BLOCK_HEIGHT * 2 + 2}px;\n    }\n    :host > .blocks > .block:nth-child(4) {\n      bottom: ${VERTICAL_BLOCK_HEIGHT * 3 + 3}px;\n    }\n    :host > .blocks > .block:nth-child(5) {\n      bottom: ${VERTICAL_BLOCK_HEIGHT * 4 + 4}px;\n    }\n    :host > .blocks > .block:nth-child(6) {\n      bottom: ${VERTICAL_BLOCK_HEIGHT * 5 + 5}px;\n    }\n    :host([data-logarithmized-frequency='<0.0001'])\n      > .blocks\n      > .block:nth-child(1),\n    :host([data-logarithmized-frequency='<0.001'])\n      > .blocks\n      > .block:nth-child(1),\n    :host([data-logarithmized-frequency='<0.001'])\n      > .blocks\n      > .block:nth-child(2),\n    :host([data-logarithmized-frequency='<0.01'])\n      > .blocks\n      > .block:nth-child(1),\n    :host([data-logarithmized-frequency='<0.01'])\n      > .blocks\n      > .block:nth-child(2),\n    :host([data-logarithmized-frequency='<0.01'])\n      > .blocks\n      > .block:nth-child(3),\n    :host([data-logarithmized-frequency='<0.05'])\n      > .blocks\n      > .block:nth-child(1),\n    :host([data-logarithmized-frequency='<0.05'])\n      > .blocks\n      > .block:nth-child(2),\n    :host([data-logarithmized-frequency='<0.05'])\n      > .blocks\n      > .block:nth-child(3),\n    :host([data-logarithmized-frequency='<0.05'])\n      > .blocks\n      > .block:nth-child(4),\n    :host([data-logarithmized-frequency='<0.5'])\n      > .blocks\n      > .block:nth-child(1),\n    :host([data-logarithmized-frequency='<0.5'])\n      > .blocks\n      > .block:nth-child(2),\n    :host([data-logarithmized-frequency='<0.5'])\n      > .blocks\n      > .block:nth-child(3),\n    :host([data-logarithmized-frequency='<0.5'])\n      > .blocks\n      > .block:nth-child(4),\n    :host([data-logarithmized-frequency='<0.5'])\n      > .blocks\n      > .block:nth-child(5),\n    :host([data-logarithmized-frequency='0.5'])\n      > .blocks\n      > .block:nth-child(1),\n    :host([data-logarithmized-frequency='0.5'])\n      > .blocks\n      > .block:nth-child(2),\n    :host([data-logarithmized-frequency='0.5'])\n      > .blocks\n      > .block:nth-child(3),\n    :host([data-logarithmized-frequency='0.5'])\n      > .blocks\n      > .block:nth-child(4),\n    :host([data-logarithmized-frequency='0.5'])\n      > .blocks\n      > .block:nth-child(5),\n    :host([data-logarithmized-frequency='0.5'])\n      > .blocks\n      > .block:nth-child(6) {\n      display: block;\n    }\n    :host([data-logarithmized-frequency='na']) {\n      border-color: #d4d3d1;\n      background-color: #f4f4f4;\n    }\n    :host([data-allele-count='1']) {\n      background-color: var(--color-singleton);\n    }\n    :host([data-alternate-allele-count]) > .blocks::before {\n      content: 'H';\n      position: absolute;\n      top: -24px;\n      right: -5px;\n      background-color: var(--color-homozygote);\n      color: white;\n      font-size: 8px;\n      font-weight: bold;\n      width: 9px;\n      height: 9px;\n      text-align: center;\n      line-height: 9px;\n      z-index: 10;\n    }\n  `;\n\n  constructor() {\n    super();\n    // Declare reactive properties\n    this.dataset;\n    this.alleleCount;\n    this.total;\n    this.frequencyValue;\n    this.alternateAlleleCount;\n  }\n\n  render() {\n    return html`\n      <span class=\"blocks\">\n        ${Array.from({ length: 6 }).map(\n          () => html`<span class=\"block\"></span>`\n        )}\n      </span>\n    `;\n  }\n\n  firstUpdated() {}\n\n  /** Setter for variant frequency information.\n   *\n   * This method receives a frequency object containing various metrics related to variant frequency.\n   * It updates internal dataset fields such as allele count, alternate allele count, total allele number,\n   * frequency value, and a categorized frequency label (`logarithmizedFrequency`) used for display or filtering.\n   *\n   * @param {Object} frequency - Frequency data for the variant.\n   * @param {number} frequency.ac - Allele count.\n   * @param {number} frequency.an - Total number of alleles.\n   * @param {number} frequency.af - Allele frequency (between 0 and 1).\n   * @param {number} [frequency.aac] - Alternate allele count (optional, may be used for singleton detection).\n   * @param {string[]} frequency.filter - Filters applied to the variant.\n   * @param {number} frequency.quality - Variant calling quality score.\n   * @param {string} frequency.source - Source of the frequency data. */\n  set frequency(frequency) {\n    this.dataset.alleleCount = frequency?.ac;\n\n    if (frequency?.aac) {\n      this.dataset.alternateAlleleCount = frequency.aac;\n    }\n\n    let logarithmizedFrequency = 'na';\n    if (frequency) {\n      this.alleleCount = frequency.ac;\n      this.total = frequency.an;\n      this.frequencyValue = frequency.af;\n      switch (true) {\n        case frequency.af >= 0.5:\n          logarithmizedFrequency = '0.5';\n          break;\n        case frequency.af > 0.05:\n          logarithmizedFrequency = '<0.5';\n          break;\n        case frequency.af > 0.01:\n          logarithmizedFrequency = '<0.05';\n          break;\n        case frequency.af > 0.001:\n          logarithmizedFrequency = '<0.01';\n          break;\n        case frequency.af > 0.0001:\n          logarithmizedFrequency = '<0.001';\n          break;\n        case frequency.af > 0:\n          logarithmizedFrequency = '<0.0001';\n          break;\n        default:\n          logarithmizedFrequency = 'monomorphic';\n          break;\n      }\n    }\n    this.dataset.logarithmizedFrequency = logarithmizedFrequency;\n  }\n}\ncustomElements.define(\n  'logarithmized-block-graph-frequency-view',\n  LogarithmizedBlockGraphFrequencyView\n);\n","const template = document.createElement('template');\nconst searchTypeSimple = document.createElement('div');\nsearchTypeSimple.className = 'match';\nsearchTypeSimple.part = 'match';\nsearchTypeSimple.innerHTML = `\n<label part=\"match label\">\n  <input class=\"all\" name=\"match\" type=\"radio\" value=\"all\">\n  for all datasets\n</label>\n<label part=\"label\">\n  <input class=\"any\" checked=\"checked\" name=\"match\" type=\"radio\" value=\"any\">\n  for any dataset\n</label>\n`;\n\ntemplate.innerHTML = `\n<style data=\"slider-style\">\ninput[type=\"range\"]::-webkit-slider-runnable-track {\n    -webkit-appearance: none;\n    height: 8px;\n}\n\n.-vertical {\n  transform: rotate(-90deg);\n}\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    height: 1em;\n    width: 3px;\n    background-color: transparent;\n    border-top: solid 1px rgba(0, 0, 0, 0.5);\n    border-bottom: solid 1px rgba(0, 0, 0, 0.5);\n    cursor: col-resize;\n    pointer-events: auto;\n    margin-top: -0.2em;\n}\n</style>\n<style data=\"slider-track-style\"></style>\n<div class=\"wrapper\" part=\"wrapper\">\n\n    <div class=\"input\" part=\"div-input\">\n        <input class=\"from\"  part=\"num-input\" type=\"number\" part=\"limit-input\" title=\"Lower limit\">\n    ~\n        <input class=\"to\"  part=\"num-input\" type=\"number\" part=\"limit-input\" title=\"Upper limit\">\n        <label part=\"checkbox-label label\">\n            <input class=\"invert\" type=\"checkbox\" part=\"checkbox\">Invert range\n        </label>\n    </div>\n    <div class=\"meter\" part=\"meter\">\n      <div class=\"meter-container\" part=\"meter-container\">\n        <div class=\"slider-track\" id=\"slider-track\" part=\"slider-track\">\n          <div class=\"ruler\" part=\"ruler\"></div>\n        </div>\n        <input\n            part = \"slider\"\n            type=\"range\"\n            name=\"slider-1\"\n            id=\"slider-1\"\n        />\n        <input\n            part = \"slider\"\n            type=\"range\"\n            name=\"slider-2\"\n            id=\"slider-2\"\n        />\n      </div>\n    </div>\n</div>\n\n`;\n\nclass RangeSlider extends HTMLElement {\n  static get observedAttributes() {\n    return [\n      'min',\n      'max',\n      'input-step',\n      'slider-step',\n      'value1',\n      'value2',\n      'orientation',\n      'invert',\n      'match',\n      'ruler-number-of-steps',\n    ];\n  }\n\n  constructor() {\n    super();\n\n    const initState = {\n      from: 0,\n      to: 1,\n      invert: '0',\n      min: 0,\n      max: 1,\n      'input-step': 0.05,\n      'slider-step': 0.01,\n      match: 'any',\n      rulerNumberOfSteps: 10,\n    };\n\n    this.state = initState;\n\n    this.root = this.getRootNode();\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n    this.slider1 = this.shadowRoot.querySelector('#slider-1');\n    this.slider2 = this.shadowRoot.querySelector('#slider-2');\n    this.sliderTrack = this.shadowRoot.querySelector('#slider-track');\n    this.from = this.shadowRoot.querySelector('.from');\n    this.to = this.shadowRoot.querySelector('.to');\n    this.invertChk = this.shadowRoot.querySelector('.invert');\n    this._meter = this.shadowRoot.querySelector('.meter');\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    switch (name) {\n      case 'min':\n        this.slider1.min = newValue;\n        this.slider2.min = newValue;\n        this.from.min = newValue;\n        this.to.min = newValue;\n        break;\n      case 'max':\n        this.slider1.max = newValue;\n        this.slider2.max = newValue;\n        this.from.max = newValue;\n        this.to.max = newValue;\n        break;\n      case 'slider-step':\n        this.slider1.step = newValue;\n        this.slider2.step = newValue;\n        break;\n      case 'input-step':\n        this.from.step = newValue;\n        this.to.step = newValue;\n        break;\n      case 'value1':\n        this.slider1.value = parseFloat(newValue).toFixed(3);\n        break;\n      case 'value2':\n        this.slider2.value = parseFloat(newValue).toFixed(3);\n        break;\n      case 'invert':\n        this.invertChk.checked = newValue === 'true';\n        break;\n      case 'ruler-number-of-steps':\n        this.state.rulerNumberOfSteps = newValue;\n        this._reRenderRuler();\n        break;\n      case 'match':\n        this.match = newValue;\n        break;\n      case 'orientation':\n        if (newValue === 'vertical') {\n          this._meter.classList.add('-vertical');\n        } else {\n          this._meter.classList.remove('-vertical');\n        }\n        this._reRenderRuler();\n        break;\n    }\n\n    this._fillSlider();\n  }\n\n  _reRenderRuler() {\n    const ruler = this.shadowRoot.querySelector('.ruler');\n    ruler.innerHTML = '';\n    const rulerNumberOfSteps = parseInt(this.state.rulerNumberOfSteps);\n    const min = parseFloat(this.state.min);\n    const max = parseFloat(this.state.max);\n    const step = (max - min) / rulerNumberOfSteps;\n    for (let i = 0; i <= rulerNumberOfSteps; i++) {\n      const scale = document.createElement('div');\n      scale.className = 'scale';\n      scale.part = 'scale';\n      scale.part.add(`scale-${this.orientation}`);\n      scale.innerText = (min + i * step).toFixed(1);\n      scale.style.left = `calc(${(i * 100) / rulerNumberOfSteps}% - 0.5em`;\n      ruler.appendChild(scale);\n    }\n  }\n  _fillSlider() {\n    const val1 = Math.min(this.slider1.value, this.slider2.value);\n    const val2 = Math.max(this.slider1.value, this.slider2.value);\n\n    const percentVal1 = (val1 * 100) / (this.max - this.min);\n    const percentVal2 = (val2 * 100) / (this.max - this.min);\n\n    if (this.state.invert !== '1') {\n      this.sliderTrack.style.background = `linear-gradient(90deg, var(--color-light-gray) 0%, var(--color-light-gray) ${percentVal1}% , var(--color-key-dark1) ${percentVal1}%,   var(--color-key-dark1) ${percentVal2}%, var(--color-light-gray) ${percentVal2}%,  var(--color-light-gray) 100% )`;\n    } else {\n      this.sliderTrack.style.background = `linear-gradient(90deg, var(--color-key-dark1) 0%, var(--color-key-dark1) ${percentVal1}%, var(--color-light-gray) ${percentVal1}%,  var(--color-light-gray) ${percentVal2}%, var(--color-key-dark1) ${percentVal2}%,  var(--color-key-dark1) 100% )`;\n    }\n\n    this._drawThumbs();\n  }\n\n  _drawThumbs() {\n    if (+this.slider1.value < +this.slider2.value) {\n      this.shadowRoot.querySelector(\n        \"style[data='slider-track-style']\"\n      ).innerHTML = `#slider-1::-webkit-slider-thumb {\n            border-right: 1px solid rgba(0, 0, 0, 0.5);\n            transform: translateX(-1.5px);\n        }\n        #slider-2::-webkit-slider-thumb {\n            border-left: 1px solid rgba(0, 0, 0, 0.5);\n            transform: translateX(1.5px)\n        }\n        `;\n    } else {\n      this.shadowRoot.querySelector(\n        \"style[data='slider-track-style']\"\n      ).innerHTML = `#slider-2::-webkit-slider-thumb {\n            border-right: 1px solid rgba(0, 0, 0, 0.5);\n            transform: translateX(-1.5px);\n        }\n        #slider-1::-webkit-slider-thumb {\n            border-left: 1px solid rgba(0, 0, 0, 0.5);\n            transform: translateX(1.5px)\n        }\n        `;\n    }\n  }\n\n  get min() {\n    return this.getAttribute('min');\n  }\n  get max() {\n    return this.getAttribute('max');\n  }\n  get step() {\n    return this.getAttribute('step');\n  }\n  get value1() {\n    return this.getAttribute('value1');\n  }\n  get value2() {\n    return this.getAttribute('value2');\n  }\n  get orientation() {\n    return this.getAttribute('orientation');\n  }\n  get invert() {\n    return this.getAttribute('invert') === 'true';\n  }\n  get rulerNumberOfSteps() {\n    return this.getAttribute('ruler-number-of-steps');\n  }\n  set min(value) {\n    this.setAttribute('min', value);\n  }\n  set max(value) {\n    this.setAttribute('max', value);\n  }\n  set sliderStep(value) {\n    this.setAttribute('slider-step', value);\n  }\n  set inputStep(value) {\n    this.setAttribute('input-step', value);\n  }\n  set value1(value) {\n    this.setAttribute('value1', value);\n  }\n  set value2(value) {\n    this.setAttribute('value2', value);\n  }\n  set orientation(value) {\n    this.setAttribute('orientation', value);\n  }\n  set rulerNumberOfSteps(value) {\n    this.setAttribute('ruler-number-of-steps', value);\n  }\n  set searchType(value) {\n    // do not expose this to the user\n    if (value === 'simple') {\n      this.shadowRoot.querySelector('.wrapper').appendChild(searchTypeSimple);\n      const simpleSearchDiv = this.shadowRoot.querySelector('.match');\n      simpleSearchDiv.addEventListener('click', (e) => {\n        if (e.target.tagName === 'INPUT') {\n          this.match = e.target.value;\n          this.state.match = e.target.value;\n          this._fireEvent(this.state);\n        }\n      });\n    }\n  }\n\n  set invert(value) {\n    this.setAttribute('invert', value);\n  }\n\n  _fireEvent(detail) {\n    const eventKeys = ['from', 'to', 'match', 'invert'];\n\n    const eventData = Object.fromEntries(\n      Object.entries(detail).filter((key) => eventKeys.includes(key[0]))\n    );\n    const event = new CustomEvent('range-changed', {\n      bubbles: true,\n      detail: eventData,\n    });\n\n    this.dispatchEvent(event);\n  }\n\n  connectedCallback() {\n    this.min = this.getAttribute('min') || 0;\n    this.max = this.getAttribute('max') || 1;\n    this.value1 = this.getAttribute('value1') || 0;\n    this.value2 = this.getAttribute('value2') || 1;\n    this.orientation = this.getAttribute('orientation') || 'horizontal';\n\n    this.match = this.getAttribute('simple-search') || 'any';\n\n    this.state = new Proxy(this.state, {\n      set: (target, prop, value, receiver) => {\n        if (prop === 'from' || prop === 'to') {\n          if (isNaN(parseFloat(value))) return true;\n\n          const parsedValue = parseFloat(value);\n\n          if (parsedValue > 1 || parsedValue < 0) {\n            if (parsedValue > 1) {\n              target.to = 1;\n            }\n            if (parsedValue < 0) {\n              target.from = 0;\n            }\n          } else {\n            if (prop === 'from') {\n              // if from is larger than to, set to instead\n              if (parsedValue > target.to) {\n                target.to = parsedValue;\n              } else {\n                target.from = parsedValue;\n              }\n            } else {\n              if (parsedValue < target.from) {\n                target.from = parsedValue;\n              } else {\n                target.to = parsedValue;\n              }\n            }\n          }\n\n          this._getToFromFromState.call(this);\n          this._fireEvent(target);\n          return true;\n        } else if (prop === 'invert') {\n          if (typeof value === 'boolean') {\n            target[prop] = value ? '1' : '0';\n          } else {\n            target[prop] = value;\n          }\n\n          this._getToFromFromState.call(this);\n\n          this._fireEvent(target);\n          return true;\n        } else {\n          this._getToFromFromState.call(this);\n          return Reflect.set(target, prop, value, receiver);\n        }\n      },\n    });\n\n    this.state.min = this.min;\n    this.state.max = this.max;\n    this.state.step = this.getAttribute('step') || 0.01;\n    this.state.from = Math.min(+this.value1, +this.value2);\n    this.state.to = Math.max(+this.value1, +this.value2);\n    this.state.invert = this.getAttribute('invert') === 'true';\n    this.state.match = this.match;\n\n    this.rulerNumberOfSteps = 10;\n\n    this.slider1.addEventListener('input', this._slider1Input);\n\n    this.slider2.addEventListener('input', this._slider2Input);\n\n    this.from.addEventListener('change', this._fromChange);\n\n    this.to.addEventListener('change', this._toChange);\n\n    this.invertChk.addEventListener('change', this._invertChange);\n\n    // Set initial formatted values in input fields\n    this.from.value = this._formatInputValue(this.state.from);\n    this.to.value = this._formatInputValue(this.state.to);\n\n    this._fillSlider();\n    this._reRenderRuler();\n  }\n\n  _slider1Input = (e) => {\n    this.state.from = e.target.value;\n  };\n  _slider2Input = (e) => {\n    this.state.to = e.target.value;\n  };\n\n  _getToFromFromState() {\n    this.slider1.value = Math.min(this.state.from, this.state.to);\n    this.slider2.value = Math.max(this.state.to, this.state.to);\n\n    // Format values to always show at least 1 decimal place (e.g., 0.0, 1.0)\n    this.from.value = this._formatInputValue(this.state.from);\n    this.to.value = this._formatInputValue(this.state.to);\n\n    this._fillSlider.call(this);\n  }\n\n  /**\n   * Formats a numeric value for display in input fields\n   * Ensures at least 1 decimal place is shown (e.g., 0.0, 1.0)\n   * @param {number} value - The numeric value to format\n   * @returns {string} Formatted value string\n   */\n  _formatInputValue(value) {\n    const num = parseFloat(value);\n    if (isNaN(num)) return value;\n\n    // Determine the number of decimal places to show\n    // Use at least 1, and preserve existing precision if needed\n    const str = num.toString();\n    const decimalIndex = str.indexOf('.');\n    const currentDecimals =\n      decimalIndex === -1 ? 0 : str.length - decimalIndex - 1;\n    const decimals = Math.max(1, currentDecimals);\n\n    return num.toFixed(decimals);\n  }\n\n  _toChange = (e) => {\n    this.state.to = e.target.value;\n  };\n\n  _fromChange = (e) => {\n    this.state.from = e.target.value;\n  };\n\n  _invertChange = (e) => {\n    this.state.invert = e.target.checked;\n  };\n\n  disconnectedCallback() {\n    this.slider1.removeEventListener('input', this._slider1Input);\n    this.slider2.removeEventListener('input', this._slider2Input);\n    this.from.removeEventListener('change', this._fromChange);\n    this.to.removeEventListener('cnahge', this._toChange);\n    this.invertChk.removeEventListener('change', this._invertChange);\n  }\n}\n\ncustomElements.define('range-slider', RangeSlider);\n","import { storeManager } from '../store/StoreManager';\nimport { resetSimpleSearchConditions } from '../store/searchManager';\n\nexport default class SideBar {\n  constructor(elm) {\n    this._elm = elm;\n    this._body = document.getElementsByTagName('body')[0];\n    // \n    storeManager.bind('selectedRow', this);\n    // \n    const scrollBarWidth = this._elm.offsetWidth - this._elm.clientWidth;\n    this._elm.style.width = `${this._elm.offsetWidth + scrollBarWidth}px`;\n    this._elm.style.marginRight = `-${scrollBarWidth}px`;\n    // \n    this._setupResetButton();\n  }\n\n  _setupResetButton() {\n    const resetButton = this._elm.querySelector(\n      '#Filters > .title > .button-view'\n    );\n    resetButton.addEventListener('click', () => {\n      resetSimpleSearchConditions();\n    });\n  }\n\n  // bindings ///////////////////////////\n\n  selectedRow(index) {\n    if (index === undefined) {\n      // show filters\n      this._body.classList.remove('-rowselected');\n    } else {\n      // show previews\n      this._body.classList.add('-rowselected');\n    }\n  }\n}\n","import { PAGE, COLUMNS } from '../global.ts';\nimport { storeManager } from '../store/StoreManager';\n\nexport default class Configuration {\n  constructor(elm) {\n    this.elm = elm;\n    this.bg = elm.querySelector('.bg');\n\n    switch (PAGE) {\n      case 'home':\n        this.initHome();\n        break;\n    }\n  }\n\n  typeEscape(e) {\n    if (e.key === 'Escape') {\n      this.close();\n    }\n  }\n\n  open() {\n    this.elm.classList.add('-shown');\n    storeManager.setData('showModal', true);\n    document.addEventListener('keyup', this.typeEscape.bind(this));\n  }\n\n  close() {\n    this.elm.classList.remove('-shown');\n    storeManager.setData('showModal', false);\n    document.removeEventListener('keyup', this.typeEscape.bind(this));\n  }\n\n  // initialize\n  initHome() {\n    storeManager.bind('columns', this);\n\n    // \n    document\n      .querySelector(\n        '#GlobalHeader > .right > nav.menus-view > .menu-wrapper > .config > .config'\n      )\n      .addEventListener('click', () => {\n        this.open();\n      });\n    // \n    this.bg.addEventListener('click', () => {\n      this.close();\n    });\n\n    // \n    const CONFIGURES = [\n      {\n        // column\n        constant: COLUMNS,\n        //localStrageKey: 'columns',\n        storeKey: 'columns',\n        container: document.getElementById('ConfSortColumns'),\n      },\n    ];\n\n    for (const configure of CONFIGURES) {\n      // user settings\n      let stored = localStorage.getItem(configure.storeKey);\n      if (stored) {\n        stored = JSON.parse(stored);\n      } else {\n        // \n        stored = configure.constant.map((item) => {\n          const newItem = Object.assign({}, item);\n          newItem.isUsed = newItem.id !== 'type';\n          return newItem;\n        });\n      }\n      // \n      configure.container.innerHTML = stored\n        .map(\n          (item) =>\n            `<li><label><input type=\"checkbox\" value=\"${item.id}\"${\n              item.isUsed ? ' checked' : ''\n            }>${item.label}</label></li>`\n        )\n        .join('');\n      // input \n      configure.container\n        .querySelectorAll('li > label > input')\n        .forEach((input) => {\n          input.addEventListener('change', (e) => {\n            const stored = storeManager.getData(configure.storeKey);\n            const item = stored.find((item) => item.id === e.target.value);\n            item.isUsed = e.target.checked;\n            storeManager.setData(configure.storeKey, stored);\n          });\n        });\n\n      // set to store\n      storeManager.setData(configure.storeKey, stored);\n    }\n  }\n\n  columns(columns) {\n    for (const column of columns) {\n      this.elm.querySelector(\n        `#ConfSortColumns > li > label > input[value=\"${column.id}\"]`\n      ).checked = column.isUsed;\n    }\n    localStorage.setItem('columns', JSON.stringify(columns));\n  }\n}\n","import { storeManager } from '../store/StoreManager';\nimport { setSimpleSearchCondition } from '../store/searchManager';\n\nconst WIDTH = 12;\nconst PADDING = 5;\n\nexport default class ChromosomeView {\n  /* @param elm:HTMLElement\n   * @param no:Number Chromosome number\n   * @param map:Array Position data\n   * @param maxLength:Number Max length of chromosomes\n   */\n  constructor(elm, no, map, maxLength) {\n    //return;\n    this._no = no;\n    this._map = map;\n    this._elm = elm;\n\n    this._elm.innerHTML = `\n      <div class=\"upper\">\n        <p class=\"no\">${this._no}</p>\n      </div>\n      <div class=\"lower\">\n        <div class=\"selectedregion\"></div>\n        <div class=\"filteredregion\"></div>\n        <svg class=\"chromosome\"></svg>\n        <div class=\"displayregion\"></div>\n      </div>\n    `;\n\n    // \n    this._filteredRegion = this._elm.querySelector('.lower > .filteredregion'); // TODO: \n    this._displayRegion = this._elm.querySelector('.lower > .displayregion'); // \n    this._selectedRegion = this._elm.querySelector('.lower > .selectedregion'); //  region \n\n    // \n    const lowMap = map.reduce((acc, subBand) => {\n      if (acc.length === 0 || acc[acc.length - 1].band !== subBand.band) {\n        acc.push({\n          band: subBand.band,\n          start: subBand.start,\n          end: subBand.end,\n        });\n        return acc;\n      } else {\n        acc[acc.length - 1].end = subBand.end;\n        return acc;\n      }\n    }, []);\n\n    // \n    this._length = map[map.length - 1].end;\n    this._svg = this._elm.querySelector('svg.chromosome');\n    const chromosomeAreaHeight =\n        elm.offsetHeight -\n        elm.querySelector('.upper').offsetHeight -\n        PADDING * 2,\n      chromosomeHeight = chromosomeAreaHeight * (this._length / maxLength),\n      rate = chromosomeHeight / this._length;\n    this._svg.style.height = `${chromosomeHeight + PADDING * 2}px`;\n    let html = `\n      <defs>\n        <lineargradient id=\"chromosome-gneg\">\n          <stop offset=\"0\" stop-color=\"#A6A6A6\"/>\n          <stop offset=\"0.33\" stop-color=\"#FFFFFF\"/>\n          <stop offset=\"0.67\" stop-color=\"#FFFFFF\"/>\n          <stop offset=\"1\" stop-color=\"#A6A6A6\"/>\n        </lineargradient>\n        <lineargradient id=\"chromosome-gpos25\">\n          <stop offset=\"0\" stop-color=\"#B39BB3\"/>\n          <stop offset=\"0.33\" stop-color=\"#EDCEED\"/>\n          <stop offset=\"0.67\" stop-color=\"#EDCEED\"/>\n          <stop offset=\"1\" stop-color=\"#B39BB3\"/>\n        </lineargradient>\n        <lineargradient id=\"chromosome-gpos50\">\n          <stop offset=\"0\" stop-color=\"#AB78AB\"/>\n          <stop offset=\"0.33\" stop-color=\"#DA9CDA\"/>\n          <stop offset=\"0.67\" stop-color=\"#DA9CDA\"/>\n          <stop offset=\"1\" stop-color=\"#AB78AB\"/>\n        </lineargradient>\n        <lineargradient id=\"chromosome-gpos75\">\n          <stop offset=\"0\" stop-color=\"#9C539C\"/>\n          <stop offset=\"0.33\" stop-color=\"#C86BC8\"/>\n          <stop offset=\"0.67\" stop-color=\"#C86BC8\"/>\n          <stop offset=\"1\" stop-color=\"#9C539C\"/>\n        </lineargradient>\n        <lineargradient id=\"chromosome-gpos100\">\n          <stop offset=\"0\" stop-color=\"#8F2B8F\"/>\n          <stop offset=\"0.33\" stop-color=\"#B53AB5\"/>\n          <stop offset=\"0.67\" stop-color=\"#B53AB5\"/>\n          <stop offset=\"1\" stop-color=\"#8F2B8F\"/>\n        </lineargradient>\n        <lineargradient id=\"chromosome-stalk\">\n          <stop offset=\"0\" stop-color=\"#6e6e6e\"/>\n          <stop offset=\"0.33\" stop-color=\"#8F8F8F\"/>\n          <stop offset=\"0.67\" stop-color=\"#8F8F8F\"/>\n          <stop offset=\"1\" stop-color=\"#6e6e6e\"/>\n        </lineargradient>\n        <lineargradient id=\"chromosome-acen\">\n          <stop offset=\"0\" stop-color=\"#383838\"/>\n          <stop offset=\"0.33\" stop-color=\"#444444\"/>\n          <stop offset=\"0.67\" stop-color=\"#444444\"/>\n          <stop offset=\"1\" stop-color=\"#383838\"/>\n        </lineargradient>\n      </defs>\n    `;\n\n    // draw subbands (drawing area)\n    for (const subBand of this._map) {\n      html += `\n      <g\n        class=\"subband\"\n        data-band=\"${subBand.band}\"\n        data-sub-band=\"${subBand.subBand}\"\n        data-start=\"${subBand.start}\"\n        data-end=\"${subBand.end}\"\n        >\n        <title>${subBand.subBand}</title>\n        <rect\n          class=\"subbandrect ${subBand.stainType}\"\n          x=\"0\"\n          y=\"${Math.floor(PADDING + subBand.start * rate)}\"\n          height=\"${Math.ceil((subBand.end - subBand.start) * rate)}\"\n          width=\"${WIDTH}\"\n        />\n      </g>`;\n    }\n\n    // draw bands (text area)\n    for (const band of lowMap) {\n      html += `\n      <g\n        class=\"band\"\n        data-band=\"${band.band}\"\n        data-start=\"${band.start}\"\n        data-end=\"${band.end}\"\n        transform=\"translate(${WIDTH + 4.5}, ${\n        PADDING + band.start * rate - 0.5\n      })\"\n        >\n        <text x=\"8\" y=\"${\n          (band.end - band.start) * rate * 0.5 + 3\n        }\" class=\"bandtext\">${band.band}</text>\n        <path d=\"M0,1 V${(band.end - band.start) * rate - 1} M0,${Math.round(\n        (band.end - band.start) * rate * 0.5\n      )} H8\" class=\"line\" />\n      </g>\n      `;\n    }\n    this._svg.innerHTML = html + '</g>';\n\n    // event\n    storeManager.bind('displayingRegionsOnChromosome', this);\n\n    // whole\n    this._elm\n      .querySelector(':scope > .upper > .no')\n      .addEventListener('click', () => {\n        this._selectBand(this._no, 1, this._length);\n      });\n\n    // sub bands\n    this._subbands = Array.from(this._svg.querySelectorAll('g.subband'));\n    this._subbands.forEach((subband) => {\n      subband.addEventListener('click', () => {\n        this._selectBand(this._no, subband.dataset.start, subband.dataset.end);\n      });\n    });\n\n    // bands\n    this._bands = this._svg.querySelectorAll('g.band');\n    this._bands.forEach((band) => {\n      if (band.dataset.start) {\n        const [start, end] = [+band.dataset.start, +band.dataset.end];\n        const includesSubbands = this._subbands.filter(\n          (subband) =>\n            start <= +subband.dataset.start && +subband.dataset.end <= end\n        );\n        band.addEventListener('click', () => {\n          this._selectBand(this._no, band.dataset.start, band.dataset.end);\n        });\n        band.addEventListener('mouseenter', () => {\n          includesSubbands.forEach((subband) =>\n            subband.classList.add('-hover')\n          );\n        });\n        band.addEventListener('mouseleave', () => {\n          includesSubbands.forEach((subband) =>\n            subband.classList.remove('-hover')\n          );\n        });\n      }\n    });\n\n    this._svg.querySelector;\n  }\n\n  _selectBand(chr, start, end) {\n    switch (storeManager.getData('searchMode')) {\n      case 'simple':\n        setSimpleSearchCondition('term', `${chr}:${start}-${end}`);\n        break;\n      case 'advanced': {\n        const targetElement = document\n          .getElementById('AdvancedSearchBuilderView')\n          ?.querySelector(\n            ':scope > .inner > .advanced-search-condition-group-view.-root > .advanced-search-toolbar > ul > li > ul > li[data-condition=\"location\"]'\n          );\n\n        if (targetElement) {\n          targetElement.dispatchEvent(\n            new CustomEvent('click', {\n              detail: { chr, start, end },\n              bubbles: true,\n              cancelable: true,\n            })\n          );\n        }\n\n        break;\n      }\n    }\n    // Karyotype \n    //storeManager.setData('region__', {\n    //  chromosome: this._no,\n    //  start: e.delegateTarget.dataset.start,\n    //  end: e.delegateTarget.dataset.end\n    //});\n  }\n\n  displayingRegionsOnChromosome(displayingRegions) {\n    if (displayingRegions[this._no]) {\n      // \n      this._displayRegion.classList.add('-shown');\n      const displayRegion = displayingRegions[this._no],\n        chromosomeAreaHeight = this._svg.clientHeight - PADDING * 2,\n        rate = chromosomeAreaHeight / this._length,\n        regionHeight = displayRegion.end - displayRegion.start;\n      this._displayRegion.style.top = `${Math.floor(\n        PADDING + displayRegion.start * rate\n      )}px`;\n      this._displayRegion.style.height = `${Math.ceil(regionHeight * rate)}px`;\n    } else {\n      this._displayRegion.classList.remove('-shown');\n    }\n  }\n\n  updateSelectedPositions(positions) {\n    this._subbands.forEach((subband) => {\n      const [start, end] = [+subband.dataset.start, +subband.dataset.end];\n      let intersection = 0;\n      positions.forEach((position) => {\n        intersection += this._intersection(position, [start, end]);\n      });\n      if (intersection > 0) subband.classList.add('-selected');\n      else subband.classList.remove('-selected');\n    });\n    this._bands.forEach((band) => {\n      const [start, end] = [+band.dataset.start, +band.dataset.end];\n      let intersection = 0;\n      positions.forEach((position) => {\n        intersection += this._intersection(position, [start, end]);\n      });\n      if (intersection > 0) band.classList.add('-selected');\n      else band.classList.remove('-selected');\n    });\n  }\n\n  _intersection(range1, range2) {\n    return range1[0] <= range2[1] && range2[1] <= range1[1];\n    // return (\n    //   (range1[0] <= range2[0] && range2[1] <= range1[0]) ||\n    //   (range1[1] <= range2[0] && range2[1] <= range1[1]) ||\n    //   (range1[0] <= range2[0] && range2[1] <= range1[1])\n    // );\n    // TODO: \n  }\n\n  get no() {\n    return this._no;\n  }\n}\n","import { storeManager } from '../store/StoreManager';\nimport ChromosomeView from './ChromosomeView.js';\n\nconst CHROMOSOME_KEYS = [\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  '10',\n  '11',\n  '12',\n  '13',\n  '14',\n  '15',\n  '16',\n  '17',\n  '18',\n  '19',\n  '20',\n  '21',\n  '22',\n  'X',\n  'Y',\n  'MT',\n];\nconst HEIGHTS = [0, 400];\nconst DEFAULT = {\n  isOpened: false,\n  isShowBand: true,\n  height: HEIGHTS[0],\n  reference: 'GRCh37', // TODO:,\n  version: 1,\n  chromosomes: {\n    1: {\n      selected: true,\n      region: {\n        GRCh37: [1, 249250621],\n        GRCh38: [1, 248956422],\n      },\n    },\n    2: {\n      selected: true,\n      region: {\n        GRCh37: [1, 243199373],\n        GRCh38: [1, 242193529],\n      },\n    },\n    3: {\n      selected: true,\n      region: {\n        GRCh37: [1, 198022430],\n        GRCh38: [1, 198295559],\n      },\n    },\n    4: {\n      selected: true,\n      region: {\n        GRCh37: [1, 191154276],\n        GRCh38: [1, 190214555],\n      },\n    },\n    5: {\n      selected: true,\n      region: {\n        GRCh37: [1, 180915260],\n        GRCh38: [1, 181538259],\n      },\n    },\n    6: {\n      selected: true,\n      region: {\n        GRCh37: [1, 171115067],\n        GRCh38: [1, 170805979],\n      },\n    },\n    7: {\n      selected: true,\n      region: {\n        GRCh37: [1, 159138663],\n        GRCh38: [1, 159345973],\n      },\n    },\n    8: {\n      selected: true,\n      region: {\n        GRCh37: [1, 146364022],\n        GRCh38: [1, 145138636],\n      },\n    },\n    9: {\n      selected: true,\n      region: {\n        GRCh37: [1, 141213431],\n        GRCh38: [1, 138394717],\n      },\n    },\n    10: {\n      selected: true,\n      region: {\n        GRCh37: [1, 135534747],\n        GRCh38: [1, 133797422],\n      },\n    },\n    11: {\n      selected: true,\n      region: {\n        GRCh37: [1, 135006516],\n        GRCh38: [1, 135086622],\n      },\n    },\n    12: {\n      selected: true,\n      region: {\n        GRCh37: [1, 133851895],\n        GRCh38: [1, 133275309],\n      },\n    },\n    13: {\n      selected: true,\n      region: {\n        GRCh37: [1, 115169878],\n        GRCh38: [1, 114364328],\n      },\n    },\n    14: {\n      selected: true,\n      region: {\n        GRCh37: [1, 107349540],\n        GRCh38: [1, 107043718],\n      },\n    },\n    15: {\n      selected: true,\n      region: {\n        GRCh37: [1, 102531392],\n        GRCh38: [1, 101991189],\n      },\n    },\n    16: {\n      selected: true,\n      region: {\n        GRCh37: [1, 90354753],\n        GRCh38: [1, 90338345],\n      },\n    },\n    17: {\n      selected: true,\n      region: {\n        GRCh37: [1, 81195210],\n        GRCh38: [1, 83257441],\n      },\n    },\n    18: {\n      selected: true,\n      region: {\n        GRCh37: [1, 78077248],\n        GRCh38: [1, 80373285],\n      },\n    },\n    19: {\n      selected: true,\n      region: {\n        GRCh37: [1, 59128983],\n        GRCh38: [1, 58617616],\n      },\n    },\n    20: {\n      selected: true,\n      region: {\n        GRCh37: [1, 63025520],\n        GRCh38: [1, 64444167],\n      },\n    },\n    21: {\n      selected: true,\n      region: {\n        GRCh37: [1, 48129895],\n        GRCh38: [1, 46709983],\n      },\n    },\n    22: {\n      selected: true,\n      region: {\n        GRCh37: [1, 51304566],\n        GRCh38: [1, 50818468],\n      },\n    },\n    X: {\n      selected: true,\n      region: {\n        GRCh37: [1, 155270560],\n        GRCh38: [1, 156040895],\n      },\n    },\n    Y: {\n      selected: true,\n      region: {\n        GRCh37: [1, 59373566],\n        GRCh38: [1, 57227415],\n      },\n    },\n    MT: {\n      selected: true,\n      region: {\n        GRCh37: [1, 16569],\n        GRCh38: [1, 16569],\n      },\n    },\n  },\n};\nconst REGEXP = new RegExp(/([1-9]|1\\d|2[0-2]|X|Y|MT):(\\d+)-?(\\d+)?/);\n\nlet karyotype = JSON.parse(localStorage.getItem('karyotype'));\n\nfunction initialiseKaryotype() {\n  if (!karyotype || karyotype.version !== DEFAULT.version) {\n    karyotype = DEFAULT;\n  }\n}\n\ninitialiseKaryotype();\n\nasync function loadKaryotypeData(reference) {\n  const module = await import(`../../assets/${reference}/karyotype.tsv`);\n  return module.default || [];\n}\n\nexport default class Karyotype {\n  constructor(elm) {\n    this.elm = elm;\n    this.isReady = false;\n    this.chromosomes = this.elm.querySelector('.content > .chromosomes');\n    this.chromosomeViews;\n\n    storeManager.setData('karyotype', karyotype);\n\n    // events\n    storeManager.bind('karyotype', this);\n    storeManager.bind('simpleSearchConditions', this);\n    storeManager.bind('advancedSearchConditions', this);\n    // \n    this.elm.querySelector('.header').addEventListener('click', () => {\n      const karyotype = storeManager.getData('karyotype');\n      this._changeKaryotype({\n        isOpened: !karyotype.isOpened,\n        height: karyotype.isOpened ? HEIGHTS[0] : HEIGHTS[1],\n      });\n      return false;\n    });\n    // \n    const buttons = this.elm.querySelectorAll(\n      '#KariotypeSwitchBandVisibility > .button'\n    );\n    buttons.forEach((button) => {\n      button.addEventListener('click', (e) => {\n        this._changeKaryotype({\n          isShowBand: e.target.dataset.value === 'show',\n        });\n      });\n    });\n    this._bandShowButton = Array.from(buttons).filter(\n      (elm) => elm.dataset.value === 'show'\n    )[0];\n    this._bandHideButton = Array.from(buttons).filter(\n      (elm) => elm.dataset.value === 'hide'\n    )[0];\n\n    // \n    loadKaryotypeData(karyotype.reference).then((tsv) => {\n      this.geneMap = this.parseGeneMap(tsv);\n      this.maxLength = Math.max(\n        ...this.geneMap.map(\n          (chromosome) => chromosome[chromosome.length - 1].end\n        )\n      );\n      this._drawChromosome(this.geneMap);\n      this.isReady = true;\n\n      // \n      if (this._pendingSimpleSearchConditions) {\n        this.simpleSearchConditions(this._pendingSimpleSearchConditions);\n        this._pendingSimpleSearchConditions = null;\n      }\n      if (this._pendingAdvancedSearchConditions) {\n        this.advancedSearchConditions(this._pendingAdvancedSearchConditions);\n        this._pendingAdvancedSearchConditions = null;\n      }\n    });\n\n    // \n    this.karyotype(storeManager.getData('karyotype'));\n  }\n\n  // TSV\n  parseGeneMap(tsv) {\n    const geneMap = [];\n    //const positions = tsv.split('\\n').map(row => row.split('\\t'));\n    for (const chromosomeKey of CHROMOSOME_KEYS) {\n      // \n      const chromosome = tsv.filter(\n        (position) => position[0] === `chr${chromosomeKey}`\n      );\n      //const chromosome = positions.filter(position => position[0] === `chr${chromosomeKey}`);\n      // \n      geneMap.push(\n        chromosome.map((position) => {\n          return {\n            start: parseInt(position[1]),\n            end: parseInt(position[2]),\n            band: position[3].split('.')[0],\n            subBand: position[3],\n            stainType: position[4],\n          };\n        })\n      );\n    }\n    return geneMap;\n  }\n\n  // \n  _drawChromosome(geneMap) {\n    this.chromosomeViews = [];\n    this.chromosomes.innerHTML = CHROMOSOME_KEYS.map(\n      (key) => `<div id=\"chromosome${key}\" class=\"chromosome-view\"></div>`\n    ).join('');\n    for (let i = 0; i < geneMap.length; i++) {\n      this.chromosomeViews.push(\n        new ChromosomeView(\n          this.chromosomes.querySelector(`#chromosome${CHROMOSOME_KEYS[i]}`),\n          CHROMOSOME_KEYS[i],\n          geneMap[i],\n          this.maxLength\n        )\n      );\n    }\n  }\n\n  // \n  _changeKaryotype(params) {\n    const karyotype = storeManager.getData('karyotype');\n    for (const key in params) {\n      karyotype[key] = params[key];\n    }\n    storeManager.setData('karyotype', karyotype);\n    localStorage.setItem('karyotype', JSON.stringify(karyotype));\n  }\n\n  // \n  karyotype(karyotype) {\n    // \n    if (karyotype.isOpened) {\n      document.getElementsByTagName('body')[0].classList.add('-drawer-opened');\n    } else {\n      document\n        .getElementsByTagName('body')[0]\n        .classList.remove('-drawer-opened');\n    }\n    // \n    if (karyotype.isShowBand) {\n      this.elm.classList.add('-show-band-label');\n      this._bandShowButton.classList.add('-current');\n      this._bandHideButton.classList.remove('-current');\n    } else {\n      this.elm.classList.remove('-show-band-label');\n      this._bandShowButton.classList.remove('-current');\n      this._bandHideButton.classList.add('-current');\n    }\n    // \n    // \n    // \n  }\n\n  simpleSearchConditions(conditions) {\n    // \n    if (!this.chromosomeViews) {\n      this._pendingSimpleSearchConditions = conditions;\n      return;\n    }\n\n    const result = REGEXP.exec(conditions.term);\n    if (result) {\n      const location = { chromosome: result[1] };\n      if (result[3]) {\n        if (+result[2] > +result[3]) return;\n        location.position = { gte: +result[2], lte: +result[3] };\n      } else {\n        location.position = +result[2];\n      }\n      this._updateLocations([location]);\n    } else {\n      this._updateLocations([]);\n    }\n  }\n  advancedSearchConditions(conditions) {\n    // \n    if (!this.chromosomeViews) {\n      this._pendingAdvancedSearchConditions = conditions;\n      return;\n    }\n\n    const locations = [];\n    const takeOutLocations = (conditions) => {\n      // Guard against undefined, null, or non-object values\n      if (!conditions || typeof conditions !== 'object') {\n        return;\n      }\n      Object.keys(conditions).forEach((key) => {\n        switch (key) {\n          case 'or':\n          case 'and':\n            conditions[key].forEach((condition) => takeOutLocations(condition));\n            break;\n          case 'location':\n            locations.push(conditions[key]);\n            break;\n        }\n      });\n    };\n    takeOutLocations(conditions);\n    this._updateLocations(locations);\n  }\n  _updateLocations(locations) {\n    this.elm.dataset.isSelectingChromosome = locations.length > 0;\n    if (locations.length === 0) return;\n\n    // \n    if (!this.chromosomeViews) return;\n\n    const collectedLocations = {};\n    locations.forEach((location) => {\n      if (!collectedLocations[location.chromosome])\n        collectedLocations[location.chromosome] = { positions: [] };\n      collectedLocations[location.chromosome].positions.push(\n        typeof location.position === 'number'\n          ? [location.position, location.position]\n          : [location.position.gte, location.position.lte]\n      );\n    });\n    this.chromosomeViews.forEach((chromosomeView) => {\n      chromosomeView.updateSelectedPositions(\n        collectedLocations[chromosomeView.no]?.positions ?? []\n      );\n    });\n  }\n}\n","import { storeManager } from '../store/StoreManager';\n\nexport default class ActivityIndicator {\n  constructor(elm) {\n    this.elm = elm;\n    storeManager.bind('appStatus', this);\n  }\n\n  appStatus(status) {\n    switch (status) {\n      case 'searching':\n        this.elm.classList.remove('-hidden');\n        break;\n      default:\n        this.elm.classList.add('-hidden');\n        break;\n    }\n  }\n}\n","class TopPageLayoutManager {\n  // Advanced SearchConditionresize\n\n  constructor() {\n    this._isReady = false; // \n  }\n\n  /** \n   * @param {Array} targets -  */\n  init(targets) {\n    this._isReady = true;\n    this.targets = targets;\n\n    // DOM\n    this._globalHeader = document.getElementById('GlobalHeader');\n    this._searchInputView = document.getElementById('SearchInputView');\n    this._searchResultsView = document.getElementById('SearchResultsView');\n    this._drawerView = document.querySelector('.drawer-view');\n\n    // \n    this.update();\n\n    // \n    this._boundUpdateHandler = this.update.bind(this);\n\n    // \n    window.addEventListener('resize', this._boundUpdateHandler);\n    window.dispatchEvent(new Event('resize')); // \n  }\n\n  /**  */\n  update() {\n    if (!this._isReady) return;\n\n    const globalHeaderHeight = this._globalHeader?.clientHeight || 0;\n    const searchInputHeight = this._searchInputView?.clientHeight || 0;\n    const drawerOffsetTop = this._drawerView?.offsetTop || 0;\n    const drawerHeight = window.innerHeight - drawerOffsetTop;\n\n    // \n    if (this._searchResultsView) {\n      this._searchResultsView.style.height = `calc(100vh - ${\n        globalHeaderHeight + searchInputHeight + drawerHeight\n      }px)`;\n    }\n\n    // \n    this.targets.forEach((target) => target.updateDisplaySize());\n  }\n\n  /**  */\n  cleanup() {\n    if (this._boundUpdateHandler) {\n      window.removeEventListener('resize', this._boundUpdateHandler);\n    }\n\n    // \n    this.targets = null;\n    this._globalHeader = null;\n    this._searchInputView = null;\n    this._searchResultsView = null;\n    this._drawerView = null;\n    this._isReady = false;\n  }\n}\n\nexport default new TopPageLayoutManager();\n","import TopPageLayoutManager from './TopPageLayoutManager.js';\n\nexport default class ModuleTabsView {\n  constructor(elm) {\n    const tabs = Array.from(\n      elm.querySelectorAll(':scope > .tabscontainer > ul > li')\n    );\n    const sections = Array.from(\n      elm.querySelectorAll(':scope > .sectionscontainer > *')\n    );\n\n    // attach event\n    tabs.forEach((tab) => {\n      tab.target = sections.find(\n        (section) => section.dataset.tabId === tab.dataset.target\n      );\n      tab.addEventListener('click', (e) => {\n        // reset\n        tabs.forEach((tab) => tab.classList.remove('-current'));\n        sections.forEach((tab) => tab.classList.remove('-current'));\n        // select tab\n        e.target.classList.add('-current');\n        e.target.target.classList.add('-current');\n        // set status in localStorage\n        window.localStorage.setItem(\n          e.target.dataset.tabGroup,\n          e.target.dataset.target\n        );\n        // update layout\n        TopPageLayoutManager.update();\n      });\n    });\n\n    // default\n    // if bound to URL params, URL params are preferred\n    let storedTab = window.localStorage.getItem(tabs[0].dataset.tabGroup);\n    const boundUrlParam = elm.dataset.boundUrlParam;\n    if (elm.dataset.boundUrlParam) {\n      const param = new URL(window.location).searchParams.get(boundUrlParam);\n      storedTab = param ?? storedTab;\n    }\n    let selectedTab = tabs[0];\n    if (storedTab) {\n      const foundTab = tabs.find((tab) => tab.dataset.target === storedTab);\n      selectedTab = foundTab ?? selectedTab;\n    }\n    selectedTab.dispatchEvent(new Event('click'));\n  }\n}\n","import { storeManager } from '../store/StoreManager';\nimport { API_URL } from '../global.ts';\n\nexport default class DownloadButton {\n  #trigger;\n  #filetype;\n  #path;\n\n  constructor(trigger) {\n    this.#trigger = trigger;\n    this.#filetype = trigger.dataset.filetype;\n    this.#path = `${API_URL}/api/download/variant`;\n\n    this.#trigger.addEventListener(\n      'click',\n      this.#downloadFile.bind(this, this.#filetype)\n    );\n  }\n\n  #downloadFile(type) {\n    switch (storeManager.getData('searchMode')) {\n      case 'simple':\n        return this.#downloadFromSimpleSearch(type);\n      case 'advanced':\n        return this.#downloadFromAdvancedSearch(type);\n    }\n  }\n\n  #downloadFromSimpleSearch(type) {\n    const query = storeManager.getData('simpleSearchConditions').term;\n    const anchor = document.createElement('a');\n    anchor.href = `${this.#path}.${type}?term=${query}`;\n    anchor.click();\n  }\n\n  #downloadFromAdvancedSearch(type) {\n    const body = { query: storeManager.getData('advancedSearchConditions') };\n    const form = document.createElement('form');\n    form.action = `${this.#path}.${type}`;\n    form.method = 'post';\n    form.enctype = 'text/plain';\n    form.setAttribute('style', 'display: none;');\n    const input = document.createElement('input');\n    input.setAttribute(\n      'name',\n      JSON.stringify(body).slice(0, -1) + ', \"dummy\": \"'\n    );\n    input.setAttribute('value', '\"}');\n    form.appendChild(input);\n    document.body.appendChild(form);\n\n    form.submit();\n  }\n}\n","/** The core of Statistics / Filters PanelView.\n * Superclass of\n * {@link PanelViewCheckList},\n * {@link PanelViewFilterAlternativeAlleleFrequency},\n * {@link PanelViewFilterConsequence},\n * {@link PanelViewFilterVariantCallingQuality},\n * {@link PanelViewPreviewAlternativeAlleleFrequencies},\n * {@link PanelViewPreviewClinicalSignificance},\n * {@link PanelViewPreviewConsequence},\n * {@link PanelViewPreviewExternalLinks},\n * {@link PanelViewPreviewGene},\n * {@link PreviewToVariantReport},\n * */\nclass PanelView {\n  /**\n   * @param {Element} elm - Panel element section.panel-view\n   * @param {string} kind - Panel id (dataset, ferequency, quality, type, significance, consequence, shift, polyphen, alphamissense) */\n  constructor(elm, kind) {\n    this.elm = elm;\n    this.kind = kind;\n    this.localStorageKey = 'panel_' + kind;\n\n    // Use local storage and manage panel opening/closing\n    if (window.localStorage.getItem(this.localStorageKey) === 'collapsed') {\n      elm.classList.add('-collapsed');\n    }\n    // collapse event\n    elm.querySelector('.title').addEventListener('click', () => {\n      elm.classList.toggle('-collapsed');\n      window.localStorage.setItem(this.localStorageKey, elm.classList.contains('-collapsed') ? 'collapsed' : '');\n    })\n\n  }\n}\n\nexport default PanelView","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport {\n  setSimpleSearchCondition,\n  getSimpleSearchCondition,\n} from '../store/searchManager';\n\n/**  Dataset of Statistics / Filters\n * @param {Element} elm - Panel element section.panel-view (#FilterDatasets | #FilterVariantType | #FilterClinicalSignificance | #FilterSift | #FilterPolyphen | #FilterAlphaMissense)\n * @param {string} kind - Panel id (dataset | type | significance | sift | polyphen | alphamissense)\n * @param {string} statisticsType - (statisticsDataset | statisticsType | statisticsSignificance | undefined) */\nexport default class PanelViewCheckList extends PanelView {\n  constructor(elm, kind, statisticsType) {\n    super(elm, kind);\n    this._statisticsType = statisticsType;\n    // \n    const conditionMaster = storeManager\n      .getData('simpleSearchConditionsMaster')\n      .find((condition) => condition.id === this.kind);\n\n    // GUI\n    this._createGUI(conditionMaster);\n    // references\n    const condition = getSimpleSearchCondition(this.kind);\n    this._inputsValues = {};\n    this.elm\n      .querySelectorAll('.content > .checklist-values > .item > .label > input')\n      .forEach((input) => {\n        this._inputsValues[input.value] = {\n          input: input,\n          value: input.parentNode.nextElementSibling,\n        };\n        if (condition && condition[input.value]) {\n          // \n          input.checked = condition[input.value] === '1';\n        }\n      });\n\n    this._changeFilter();\n    // events\n    for (const key in this._inputsValues) {\n      this._inputsValues[key].input.addEventListener(\n        'change',\n        this._changeFilter.bind(this)\n      );\n    }\n\n    storeManager.bind('simpleSearchConditions', this);\n    storeManager.bind(this._statisticsType, this);\n\n    // \n    this[this._statisticsType] = (values) => {\n      if (values) {\n        let all = 0;\n        for (const key in this._inputsValues) {\n          const count = values[key] ? values[key] : 0;\n          all += count;\n          this._inputsValues[key].value.textContent = count.toLocaleString();\n        }\n        this._inputsValues.all.value.textContent = all.toLocaleString();\n      } else {\n        for (const key in this._inputsValues) {\n          this._inputsValues[key].value.textContent = 'N/A';\n        }\n        this._inputsValues.all.value.textContent = 'N/A';\n      }\n      this._inputsValues.all.value.textContent = storeManager\n        .getData('searchStatus')\n        .filtered.toLocaleString();\n    };\n  }\n\n  _createGUI(conditionMaster) {\n    let html = `\n    <li class=\"item\">\n      <label class=\"label\">\n        <input type=\"checkbox\" value=\"all\" checked>\n        All\n      </label>\n      <span class=\"value\"></span>\n    </li>\n    <li class=\"separator\"><hr></li>\n    `;\n    if (this.kind === 'significance') {\n      html += `\n      <li class=\"item\">\n        <label class=\"label\">\n          <input type=\"checkbox\" value=\"NC\" checked>\n          Unassigned\n        </label>\n        <span class=\"value\"></span>\n      </li>\n      <li class=\"separator\"><hr></li>\n      `;\n    }\n    if (this.kind === 'alphamissense') {\n      html += `\n      <li class=\"item\">\n        <label class=\"label\">\n          <input type=\"checkbox\" value=\"N\" checked>\n          Unassigned\n        </label>\n        <span class=\"value\"></span>\n      </li>\n      <li class=\"separator\"><hr></li>\n      `;\n    }\n    if (this.kind === 'sift') {\n      html += `\n      <li class=\"item\">\n        <label class=\"label\">\n          <input type=\"checkbox\" value=\"N\" checked>\n          Unassigned\n        </label>\n        <span class=\"value\"></span>\n      </li>\n      <li class=\"separator\"><hr></li>\n      `;\n    }\n    if (this.kind === 'polyphen') {\n      html += `\n      <li class=\"item\">\n        <label class=\"label\">\n          <input type=\"checkbox\" value=\"N\" checked>\n          Unassigned\n        </label>\n        <span class=\"value\"></span>\n      </li>\n      <li class=\"separator\"><hr></li>\n      `;\n    }\n\n    html += conditionMaster.items\n      .map(\n        (item) => `\n    <li class=\"item\">\n      <label class=\"label\">\n        <input type=\"checkbox\" value=\"${item.id}\" checked>\n        ${\n          this.kind === 'dataset'\n            ? `<div class=\"dataset-icon\" data-dataset=\"${item.id}\"><div class=\"properties\"></div></div>`\n            : ''\n        }\n        ${\n          this.kind === 'significance'\n            ? `<div class=\"clinical-significance\" data-value=\"${item.id}\"></div>`\n            : ''\n        }\n        ${\n          this.kind === 'sift'\n            ? `<div class=\"variant-function _width_5em _align-center\" data-function=\"${\n                item.id\n              }\">${{ D: '&lt; 0.05', T: '&ge; 0.05' }[item.id]}</div>`\n            : ''\n        }\n        ${\n          this.kind === 'polyphen'\n            ? `<div class=\"variant-function _width_5em _align-center\" data-function=\"${\n                item.id\n              }\">${\n                {\n                  PROBD: '&gt; 0.908',\n                  POSSD: '&gt; 0.446',\n                  B: '&le; 0.446',\n                  U: 'Unknown',\n                }[item.id]\n              }</div>`\n            : ''\n        }\n        ${\n          this.kind === 'alphamissense'\n            ? `<div class=\"variant-function _width_5em _align-center\" data-function=\"${\n                item.id\n              }\">${\n                { LP: '&gt; 0.564', A: '&ge; 0.340', LB: '&lt; 0.340' }[item.id]\n              }</div>`\n            : ''\n        }\n        ${item.label}\n      </label>\n      <span class=\"value\"></span>\n    </li>\n    `\n      )\n      .join('');\n    this.elm\n      .querySelector('.content > .checklist-values')\n      .insertAdjacentHTML('beforeend', html);\n    // not\n    if (\n      ['significance', 'alphamissense', 'sift', 'polyphen'].includes(this.kind)\n    ) {\n      this.elm\n        .querySelector('.content > .checklist-values > .item:nth-child(5)')\n        .remove();\n    }\n  }\n\n  // \n  _changeFilter(e) {\n    if (e && e.target.value === 'all') {\n      // all\n      if (e.target.checked) {\n        // \n        for (const key in this._inputsValues) {\n          this._inputsValues[key].input.checked = true;\n        }\n      } else {\n        // \n        for (const key in this._inputsValues) {\n          this._inputsValues[key].input.checked = false;\n        }\n      }\n    } else {\n      // not all\n      let isAll = 0;\n      for (const key in this._inputsValues) {\n        if (key !== 'all') {\n          isAll += !this._inputsValues[key].input.checked;\n        }\n      }\n      this._inputsValues.all.input.checked = isAll === 0;\n    }\n    // Store \n    const checked = {};\n    for (const key in this._inputsValues) {\n      if (key !== 'all') {\n        checked[key] = this._inputsValues[key].input.checked ? '1' : '0';\n      }\n    }\n    setSimpleSearchCondition(this.kind, checked);\n  }\n\n  // \n  simpleSearchConditions(conditions) {\n    let isAll = 0;\n    for (const key in conditions[this.kind]) {\n      this._inputsValues[key].input.checked =\n        conditions[this.kind][key] !== '0';\n      isAll += conditions[this.kind][key] === '0';\n    }\n    this._inputsValues.all.input.checked = isAll === 0;\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport {\n  setSimpleSearchCondition,\n  getSimpleSearchCondition,\n  getSimpleSearchConditionMaster,\n} from '../store/searchManager';\nimport '../components/RangeSliderView.js';\n\nexport default class PanelViewFilterAlternativeAlleleFrequency extends PanelView {\n  constructor(elm) {\n    super(elm, 'frequency');\n\n    // default values\n    this._conditionMaster = getSimpleSearchConditionMaster(this.kind);\n    const condition = this._getConditionFromStore();\n\n    const rangeSlider = document.createElement('range-slider');\n    rangeSlider.value1 = condition.from;\n    rangeSlider.value2 = condition.to;\n    rangeSlider.sliderStep = 0.01;\n    rangeSlider.inputStep = 0.05;\n    rangeSlider.searchType = 'simple';\n\n    rangeSlider.addEventListener('range-changed', (e) => {\n      e.stopPropagation();\n      this.changeParameter(e.detail);\n    });\n\n    this.elm.querySelector('.range-selector-view').appendChild(rangeSlider);\n    this._rangeSelectorView = rangeSlider;\n\n    // events\n    storeManager.bind('simpleSearchConditions', this);\n  }\n\n  changeParameter(newCondition) {\n    const condition = this._getConditionFromStore();\n    for (const key in newCondition) {\n      condition[key] = newCondition[key];\n    }\n    setSimpleSearchCondition(this.kind, condition);\n  }\n\n  simpleSearchConditions(conditions) {\n    const condition = conditions[this.kind];\n    if (condition === undefined) return;\n  }\n\n  _getConditionFromStore() {\n    let condition = getSimpleSearchCondition(this.kind);\n    // if the condition is undefined, generate it from master\n    condition = condition\n      ? condition\n      : this._conditionMaster.items.reduce(\n          (acc, item) => Object.assign(acc, { [item.id]: item.default }),\n          {}\n        );\n    // if each items of the condition are not defined, generate them from master\n    for (const item of this._conditionMaster.items) {\n      condition[item.id] = condition[item.id]\n        ? condition[item.id]\n        : this._conditionMaster.items.find(\n            (frequency) => frequency.id === item.id\n          ).default;\n    }\n    return condition;\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport {\n  setSimpleSearchCondition,\n  getSimpleSearchCondition,\n} from '../store/searchManager';\n\nexport default class PanelViewFilterVariantCallingQuality extends PanelView {\n  constructor(elm) {\n    super(elm, 'quality');\n    storeManager.bind('simpleSearchConditions', this);\n    // reference\n    this.checkbox = this.elm.querySelector('.content > label > input');\n    // event\n    this.checkbox.addEventListener('change', this.change.bind(this));\n    this.checkbox.dispatchEvent(new Event('change'));\n    // initial condition\n    const condition = getSimpleSearchCondition(this.kind);\n    this.checkbox.checked = condition === undefined;\n  }\n\n  change(e) {\n    setSimpleSearchCondition('quality', e.target.checked ? '1' : '0');\n  }\n\n  simpleSearchConditions(conditions) {\n    if (conditions.quality !== undefined) {\n      this.checkbox.checked = conditions.quality === '1';\n    }\n  }\n}\n","import TopPageLayoutManager from \"./TopPageLayoutManager.js\";\n\nexport default class CollapseView {\n\n  constructor(collapseView) {\n    this.setup(collapseView);\n  }\n\n  setup(collapseView) {\n    if (collapseView.classList.contains('-terminal')) return;\n\n    // collapse event\n    collapseView.querySelector('.collapsebutton').addEventListener('click', _e => {\n      collapseView.classList.toggle('-collapsed');\n      // unstructured case\n      if (collapseView.classList.contains('-unstructured')) {\n        this.collapseTargets.forEach(target => {\n          const isParentCollapsed = target.ancestors.some(tr => tr.querySelector('.collapse-view').classList.contains('-collapsed'));\n          target.TR.style.display = isParentCollapsed ? 'none' : 'table-row';\n        });\n      }\n      // set status in localStorage\n      window.localStorage.setItem(collapseId, collapseView.classList.contains('-collapsed') ? 'collapsed' : '');\n      // update layout\n      if (collapseView.dataset.collapseId === 'advanced-search') {\n        TopPageLayoutManager.update();\n      }\n    });\n\n    // collapse targets\n    if (collapseView.classList.contains('-unstructured')) {\n      this.collapseTargets = [];\n      const ancestors = [];\n      const depth = parseInt(collapseView.dataset.collapseDepth);\n      let parentNode = collapseView;\n      while (parentNode.tagName !== 'TR') {\n        parentNode = parentNode.parentNode;\n      }\n      ancestors[depth] = parentNode;\n      let nextTR = parentNode.nextSibling;\n      while (nextTR !== null) {\n        let isValid = false, targetDepth;\n        const target = nextTR.querySelector('.collapse-view[data-collapse-depth]');\n        if (target) {\n          targetDepth = target.dataset.collapseDepth;\n          if (targetDepth) {\n            targetDepth = parseInt(targetDepth);\n            if (targetDepth > depth) {\n              isValid = true;\n            }\n          }\n        }\n        if (isValid) {\n          ancestors[targetDepth] = nextTR;\n          this.collapseTargets.push({\n            ancestors: ancestors.slice(depth, targetDepth),\n            TR:  nextTR\n          });\n          nextTR = nextTR.nextSibling;\n        } else {\n          break;\n        }\n      }\n    }\n\n    // default status\n    const collapseId = collapseView.dataset.collapseId;\n    if (collapseId && window.localStorage.getItem(collapseId) === 'collapsed') {\n      collapseView.querySelector('.collapsebutton').dispatchEvent(new Event('click'));\n    }\n\n  }\n  \n}\n","import CollapseView from './CollapseView.js';\nimport PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport {\n  setSimpleSearchCondition,\n  getSimpleSearchCondition,\n  getSimpleSearchConditionMaster,\n} from '../store/searchManager';\n\nconst KIND_OF_CONDITION = 'consequence';\n\nexport default class PanelViewFilterConsequence extends PanelView {\n  constructor(elm) {\n    super(elm, 'consequence');\n    // \n    const conditionMaster = getSimpleSearchConditionMaster(this.kind);\n    const grouping = getSimpleSearchConditionMaster(\n      'consequence_grouping'\n    ).items;\n    // GUI\n    this._createGUI(conditionMaster, grouping);\n    // collapse menu\n    elm\n      .querySelectorAll('.collapse-view')\n      .forEach((collapseView) => new CollapseView(collapseView));\n    // references\n    const condition = getSimpleSearchCondition(this.kind);\n    this._inputsValues = {};\n    this.elm\n      .querySelectorAll('.content > .checklist-values input')\n      .forEach((input) => {\n        this._inputsValues[input.value] = {\n          input: input,\n          value: input.parentNode.nextElementSibling,\n        };\n        if (condition && condition[input.value]) {\n          // \n          input.checked = condition[input.value] === '1';\n        }\n      });\n    this._inputsValues.all.values = this.findValues(grouping, []); // \n    this.updateNestedCheckboxes();\n    // events\n    for (const key in this._inputsValues) {\n      this._inputsValues[key].input.addEventListener(\n        'change',\n        this._changeFilter.bind(this)\n      );\n    }\n    storeManager.bind('simpleSearchConditions', this);\n    storeManager.bind('statisticsConsequence', this);\n  }\n\n  /*\n  // \n  searchConditionsMaster(master) {\n    const conditionMaster = master.find(condition => condition.id === this.kind).items;\n    const grouping = master.find(condition => condition.id === 'consequence_grouping').items;\n    console.log(grouping)\n    // GUI\n    this._createGUI(conditionMaster, grouping);\n    // accordion\n    this.elm.querySelectorAll('.-haschildren > .accordionbutton').forEach(elm => {\n      elm.addEventListener('click', () => {\n        elm.parentNode.classList.toggle('-collapsed');\n      })\n    });\n    // references\n    const condition = storeManager.getSimpleSearchCondition(this.kind);\n    console.log(condition)\n    this._inputsValues = {};\n    this.elm.querySelectorAll('.content > .checklist-values input').forEach(input => {\n      this._inputsValues[input.value] = {\n        input: input,\n        value: input.parentNode.nextElementSibling\n      }\n      if (condition && condition[input.value]) { // \n        input.checked = condition[input.value] === '1';\n      }\n    });\n    console.log(this._inputsValues)\n  }\n  */\n\n  _createGUI(conditionMaster, grouping) {\n    let html = `\n      <li class=\"item\">\n        <label class=\"label\">\n          <input type=\"checkbox\" value=\"all\" data-has-children=\"true\" checked>\n          All\n        </label>\n        <span class=\"value\"></span>\n      </li>\n      <li class=\"separator\"><hr></li>\n    `;\n    html += grouping\n      .map((group) => this.render(conditionMaster, group))\n      .join('');\n    this.elm\n      .querySelector('.content > .checklist-values')\n      .insertAdjacentHTML('beforeend', html);\n    // transcript variant \n    this.elm\n      .querySelector('.content > .checklist-values > .item:nth-child(3)')\n      .classList.remove('-collapsed');\n  }\n\n  render(conditionMaster, item) {\n    const hasChildren = typeof item === 'object';\n    item = hasChildren\n      ? item\n      : conditionMaster.items.find((condition) => condition.id === item);\n\n    return `\n      <li class=\"item${\n        hasChildren ? ' collapse-view -hierarchic -collapsed' : ''\n      }\">\n        ${hasChildren ? '<div class=\"collapsebutton\"></div>' : ''}\n        <label class=\"label\">\n          <input type=\"checkbox\" value=\"${\n            item.id ? item.id : item.label\n          }\" data-has-children=\"${item.items ? 'true' : 'false'}\" checked>\n          ${item.label}\n        </label>\n        <span class=\"value\"></span>\n        ${\n          hasChildren\n            ? `\n        <ul class=\"checklist-values collapsecontent\">\n          ${item.items\n            .map((item) => this.render(conditionMaster, item))\n            .join('')}\n        </ul>\n        `\n            : ''\n        }\n      </li>\n    `;\n  }\n\n  //  consequence \n  findValues(items, accumulator) {\n    let values = [];\n    for (const item of items) {\n      const hasChildren = typeof item === 'object';\n      if (hasChildren) {\n        const values2 = this.findValues(item.items, []);\n        this._inputsValues[item.label].values = values2;\n        values = values.concat(values2);\n      } else {\n        accumulator.push(item);\n      }\n    }\n    values = values.concat(accumulator);\n    return values;\n  }\n\n  // \n  _changeFilter(e) {\n    if (e && e.target.value === 'all') {\n      // all\n      if (e.target.checked) {\n        // \n        for (const key in this._inputsValues) {\n          this._inputsValues[key].input.checked = true;\n        }\n      } else {\n        // \n        for (const key in this._inputsValues) {\n          this._inputsValues[key].input.checked = false;\n        }\n      }\n    } else if (e.target.dataset.hasChildren === 'true') {\n      // \n      for (const value of this._inputsValues[e.target.value].values) {\n        this._inputsValues[value].input.checked = e.target.checked;\n      }\n    } else {\n      // not all\n      this.updateNestedCheckboxes();\n    }\n    // Store \n    const checked = {};\n    for (const key in this._inputsValues) {\n      const input = this._inputsValues[key];\n      if (input.values === undefined) {\n        checked[key] = this._inputsValues[key].input.checked ? '1' : '0';\n      }\n    }\n    setSimpleSearchCondition(KIND_OF_CONDITION, checked);\n  }\n\n  updateNestedCheckboxes() {\n    for (const key in this._inputsValues) {\n      const input = this._inputsValues[key];\n      if (input.values) {\n        // \n        input.input.checked = !input.values.reduce(\n          (accumulator, value) =>\n            accumulator + !this._inputsValues[value].input.checked,\n          0\n        );\n      }\n    }\n  }\n\n  // \n  simpleSearchConditions(conditions) {\n    for (const key in conditions[KIND_OF_CONDITION]) {\n      this._inputsValues[key].input.checked =\n        conditions[KIND_OF_CONDITION][key] !== '0';\n    }\n    this.updateNestedCheckboxes();\n  }\n\n  // \n  statisticsConsequence(values) {\n    if (values) {\n      for (const key in this._inputsValues) {\n        const input = this._inputsValues[key];\n        if (input.values === undefined) {\n          // \n          input.value.textContent = (\n            values[key] ? values[key] : 0\n          ).toLocaleString();\n        }\n      }\n    } else {\n      // \n      for (const key in this._inputsValues) {\n        const input = this._inputsValues[key];\n        if (input.values === undefined) {\n          this._inputsValues[key].value.textContent = '0';\n        }\n      }\n    }\n    this._inputsValues.all.value.textContent = storeManager\n      .getData('searchStatus')\n      .filtered.toLocaleString();\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\n\nexport default class PanelViewPreviewGene extends PanelView {\n  constructor(elm) {\n    super(elm, 'dataset');\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n    this.table = this.elm.querySelector('.content > .right-headline');\n  }\n\n  selectedRow() {\n    this.update();\n  }\n\n  offset() {\n    this.update();\n  }\n\n  update() {\n    let html = '';\n    this.elm.classList.add('-notfound');\n    if (storeManager.getData('selectedRow') !== undefined) {\n      const record = storeManager.getSelectedRecord();\n      if (record && record.symbols) {\n        for (const symbol of record.symbols) {\n          html += `\n            <tbody>\n              <tr>\n                <th>Symbol</th>\n                <td>\n                  <a href=\"gene/${\n                    symbol.id\n                  }\" target=\"_blank\" class=\"hyper-text -internal\">${\n            symbol.name\n          }</a>\n                </td>\n              </tr>\n              ${\n                symbol.synonyms.length === 0\n                  ? ''\n                  : `<tr><th>Alias</th><td>${symbol.synonyms.join(\n                      ', '\n                    )}</td></tr>`\n              }\n            </tbody>\n          `;\n\n          this.elm.classList.remove('-notfound');\n        }\n      }\n    }\n    this.table.innerHTML = html;\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\n\nexport default class PreviewToVariantReport extends PanelView {\n  constructor(elm) {\n    super(elm, 'dataset');\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n    this.title = this.elm.querySelector('.title');\n  }\n\n  selectedRow() {\n    this.update();\n  }\n\n  offset() {\n    this.update();\n  }\n\n  update() {\n    let html = '';\n\n    if (storeManager.getData('selectedRow') !== undefined) {\n      const record = storeManager.getSelectedRecord();\n      if (record && record.id) {\n        html = `<a class=\"hyper-text -internal\" href=\"/variant/${record.id}\">Detailed variant report page</a>`;\n\n        this.elm.classList.remove('-disable');\n      } else {\n        html = `<a class=\"hyper-text -internal\">Detailed variant report page</a>`;\n\n        this.elm.classList.add('-disable');\n      }\n    }\n\n    this.title.innerHTML = html;\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\n\nexport default class PanelViewPreviewExternalLinks extends PanelView {\n  constructor(elm) {\n    super(elm, 'dataset');\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n    this.table = this.elm.querySelector('.content > .right-headline');\n  }\n\n  selectedRow() {\n    this.update();\n  }\n\n  offset() {\n    this.update();\n  }\n\n  update() {\n    let html = '';\n    this.elm.classList.add('-notfound');\n    if (storeManager.getData('selectedRow') !== undefined) {\n      const record = storeManager.getSelectedRecord(),\n        list = [];\n      if (record && record.external_link) {\n        // resSNP\n        if (record.external_link.dbsnp) {\n          record.external_link.dbsnp.forEach((item) => {\n            list.push(this.#createLinkList('refSNP', item.title, item.xref));\n          });\n        }\n\n        // MGeND\n        if (record.external_link.mgend) {\n          record.external_link.mgend.forEach((item) => {\n            list.push(this.#createLinkList('MGeND', item.title, item.xref));\n          });\n        }\n\n        // ClinVar\n        if (record.external_link.clinvar) {\n          record.external_link.clinvar.forEach((item) => {\n            list.push(this.#createLinkList('ClinVar', item.title, item.xref));\n          });\n        }\n\n        //ToMMo\n        if (record.external_link.tommo) {\n          record.external_link.tommo.forEach((item) => {\n            list.push(this.#createLinkList('ToMMo', item.title, item.xref));\n          });\n        }\n\n        // gnomAD\n        if (record.external_link.gnomad) {\n          record.external_link.gnomad.forEach((item) => {\n            list.push(this.#createLinkList('gnomAD', item.title, item.xref));\n          });\n        }\n      }\n\n      if (list.length > 0) {\n        html = `\n                  <tbody>\n                    ${list\n                      .map(\n                        (item) =>\n                          `<tr><th>${item.title}</th><td>${item.content}</td></tr>`\n                      )\n                      .join('')}\n                  </tbody>\n                `;\n        this.elm.classList.remove('-notfound');\n      }\n    }\n    this.table.innerHTML = html;\n  }\n\n  #createLinkList(title, label, url) {\n    const content = `\n      <ul>\n        <li><a href=\"${url}\" class=\"hyper-text -external\" target=\"_blank\">${label}</a></li>\n      </ul>`;\n    return { title, content };\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport { getSimpleSearchConditionMaster } from '../store/searchManager';\n\nconst DECIMAL_DIGIT = 4;\n\nexport default class PanelViewPreviewAlternativeAlleleFrequencies extends PanelView {\n  constructor(elm) {\n    super(elm, 'frenquecies');\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n    const tbody = this.elm.querySelector('.frequency-detail > tbody');\n    this._master = getSimpleSearchConditionMaster('dataset').items;\n    // make DOM\n    tbody.innerHTML = this._master\n      .map((dataset) => {\n        if (dataset.has_freq) {\n          return `<tr data-dataset=\"${dataset.id}\">\n          <td>\n            <div class=\"dataset-icon\" data-dataset=\"${dataset.id}\">\n              <div class=\"properties\"></div>\n            </div>\n            ${dataset.label}\n          </td>\n          <td class=\"alt\"></td>\n          <td class=\"total\"></td>\n          <td class=\"frequency\"></td>\n        </tr>`;\n        } else {\n          return '';\n        }\n      })\n      .join('');\n    // set DOM reference\n    this._datasets = {};\n    for (const dataset of this._master) {\n      if (dataset.has_freq) {\n        const tr = tbody.querySelector(`tr[data-dataset=\"${dataset.id}\"]`);\n        this._datasets[dataset.id] = {\n          alt: tr.querySelector('.alt'),\n          total: tr.querySelector('.total'),\n          frequency: tr.querySelector('.frequency'),\n        };\n      }\n    }\n  }\n\n  selectedRow() {\n    this._update();\n  }\n\n  offset() {\n    this._update();\n  }\n\n  _update() {\n    if (storeManager.getData('selectedRow') !== undefined) {\n      const record = storeManager.getSelectedRecord();\n      if (record) {\n        for (const dataset of this._master) {\n          if (dataset.has_freq) {\n            const frequency = record.frequencies\n              ? record.frequencies.find(\n                  (frequency) => frequency.source === dataset.id\n                )\n              : null;\n            if (frequency) {\n              // \n              this._datasets[dataset.id].alt.textContent =\n                frequency.ac.toLocaleString();\n              this._datasets[dataset.id].total.textContent =\n                frequency.an.toLocaleString();\n              if ((frequency.af + '').length > DECIMAL_DIGIT + 2) {\n                // 0\n                const numOfDigits = (frequency.af + '').length;\n                const integerized = (\n                  frequency.af * 10 ** numOfDigits +\n                  ''\n                ).padStart(numOfDigits, '0');\n                const rounded = Math.round(\n                  parseFloat(\n                    integerized.slice(0, DECIMAL_DIGIT) +\n                      '.' +\n                      integerized.slice(DECIMAL_DIGIT)\n                  )\n                );\n                const floated = rounded / 10 ** DECIMAL_DIGIT;\n                this._datasets[dataset.id].frequency.textContent =\n                  floated > 0\n                    ? floated\n                    : frequency.af.toExponential(DECIMAL_DIGIT - 1);\n              } else {\n                this._datasets[dataset.id].frequency.textContent = strIns(\n                  (\n                    Math.round(frequency.af * 10 ** DECIMAL_DIGIT) + ''\n                  ).padStart(DECIMAL_DIGIT + 1, '0'),\n                  -DECIMAL_DIGIT,\n                  '.'\n                );\n              }\n            } else {\n              this._datasets[dataset.id].alt.textContent = '';\n              this._datasets[dataset.id].total.textContent = '';\n              this._datasets[dataset.id].frequency.textContent = '';\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction strIns(str, idx, val) {\n  return str.slice(0, idx) + val + str.slice(idx);\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport { getSimpleSearchConditionMaster } from '../store/searchManager';\n\nexport default class PanelViewPreviewConsequence extends PanelView {\n  constructor(elm) {\n    super(elm, 'frenquecies');\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n    this._content = this.elm.querySelector('.content');\n  }\n\n  selectedRow() {\n    this._update();\n  }\n\n  offset() {\n    this._update();\n  }\n\n  _update() {\n    let html = '';\n    this.elm.classList.add('-notfound');\n    if (storeManager.getData('selectedRow') !== undefined) {\n      const record = storeManager.getSelectedRecord();\n      if (record && record.transcripts && record.transcripts.length > 0) {\n        // consequence \n        let accessions = record.transcripts\n          .map((transcript) => transcript.consequence)\n          .reduce((first, second) => first.concat(second));\n        accessions = Array.from(new Set(accessions));\n        const master = getSimpleSearchConditionMaster('consequence');\n        const consequences = accessions.map((accession) =>\n          master.items.find((consequence) => consequence.id === accession)\n        );\n        html = consequences\n          .map(\n            (consequence) =>\n              `<dl class=\"above-headline\"><dt>${consequence.label}</dt><dd>${consequence.description}</dd></dl>`\n          )\n          .join('');\n        this.elm.classList.remove('-notfound');\n      }\n    }\n    this._content.innerHTML = html;\n  }\n}\n","import PanelView from './PanelView.js';\nimport { storeManager } from '../store/StoreManager';\nimport { getSimpleSearchConditionMaster } from '../store/searchManager';\n\nexport default class PanelViewPreviewClinicalSignificance extends PanelView {\n  constructor(elm) {\n    super(elm, 'clinicalSignificance');\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n    this.content = this.elm.querySelector('.content');\n  }\n\n  selectedRow() {\n    this.update();\n  }\n\n  offset() {\n    this.update();\n  }\n\n  update() {\n    let html = '';\n    if (storeManager.getData('selectedRow') !== undefined) {\n      const record = storeManager.getSelectedRecord();\n      if (record && record.significance) {\n        const master = getSimpleSearchConditionMaster('significance');\n\n        const deepClone = structuredClone(record.significance);\n\n        function mergeByMedgen(data) {\n          const merged = {};\n\n          data.forEach((entry) => {\n            // 'mgend'  conditions \n            if (entry.source === 'mgend') {\n              if (entry.conditions.length === 0) {\n                entry.conditions.push({ name: 'others', medgen: '' });\n              }\n            }\n\n            entry.conditions.forEach((condition) => {\n              const medgen = condition.medgen;\n              const medgenName = condition.name;\n\n              // MedGen ID \n              if (!merged[medgen]) {\n                merged[medgen] = {\n                  name: medgenName,\n                  interpretations: {}, // interpretationssource\n                };\n              }\n\n              entry.interpretations.forEach((interpretation) => {\n                // Set\n                if (!merged[medgen].interpretations[interpretation]) {\n                  merged[medgen].interpretations[interpretation] = new Set([\n                    entry.source,\n                  ]);\n                } else {\n                  // \n                  merged[medgen].interpretations[interpretation].add(\n                    entry.source\n                  );\n                }\n              });\n            });\n          });\n\n          //Set\n          const results = Object.keys(merged).map((medgen) => ({\n            medgen,\n            name: merged[medgen].name,\n            interpretations: Object.keys(merged[medgen].interpretations).map(\n              (interpretation) => ({\n                interpretation,\n                sources: Array.from(\n                  merged[medgen].interpretations[interpretation]\n                ),\n              })\n            ),\n          }));\n\n          // return results\n          return groupAndSortByInterpretation(results);\n        }\n\n        function groupAndSortByInterpretation(data) {\n          // \n          const grouped = {};\n\n          data.forEach((entry) => {\n            // interpretations\n            let interpretationKeys = [];\n            entry.interpretations.forEach((interpretationObj) => {\n              interpretationKeys.push(interpretationObj.interpretation);\n            });\n\n            // interpretationKey\n            if (!grouped[interpretationKeys]) {\n              grouped[interpretationKeys] = [];\n            }\n            // entryinterpretation\n            grouped[interpretationKeys].push(entry);\n            interpretationKeys = [];\n          });\n\n          // name\n          Object.keys(grouped).forEach((key) => {\n            grouped[key] = grouped[key].sort((a, b) => {\n              const nameA = a.name || ''; // \n              const nameB = b.name || '';\n              return nameA.localeCompare(nameB, undefined, {\n                sensitivity: 'base',\n              });\n            });\n          });\n\n          return Object.values(grouped).flat();\n        }\n\n        // \n        const significanceDataset = mergeByMedgen(deepClone);\n        html = significanceDataset\n          .map((data) => {\n            return `\n        <dl class=\"above-headline clinical-significance\">\n          <dt>\n          ${\n            data.medgen === 'undefined' || data.medgen === ''\n              ? data.name\n              : `<a href=\"/disease/${data.medgen}\" target=\"_blank\" class=\"hyper-text -internal\">\n              ${data.name}</a>`\n          }\n          </dt>\n          ${\n            data.interpretations\n              ? data.interpretations\n                  .map(\n                    (interpretation) => `\n            <dd>\n              <div class=\"clinical-significance\" data-value=\"${\n                interpretation.interpretation\n              }\">\n                ${\n                  master.items.find(\n                    (item) => item.id === interpretation.interpretation\n                  ).label\n                }\n              </div>\n              <div class=\"disease-category\">\n                ${\n                  interpretation.sources.includes('mgend')\n                    ? '<span class=\"mgend\">MGeND</span>'\n                    : ''\n                }\n                ${\n                  interpretation.sources.includes('clinvar')\n                    ? '<span class=\"clinvar\">ClinVar</span>'\n                    : ''\n                }\n              </div>\n            </dd> `\n                  )\n                  .join('')\n              : ''\n          }\n          </dl>`;\n          })\n          .join('');\n        this.elm.classList.remove('-notfound');\n      }\n    } else {\n      this.elm.classList.add('-notfound');\n    }\n    this.content.innerHTML = html;\n  }\n}\n","import tippy from 'tippy.js';\n// All data with [data-tooltip-id] gets tooltip\nexport default class TippyBox {\n  constructor() {\n    const tooltipElements = document.querySelectorAll('[data-tooltip-id]'),\n      data = this.getData();\n\n    tooltipElements.forEach((HTMLElement) => {\n      HTMLElement.addEventListener(\n        'mouseover',\n        this.setTooltip(HTMLElement, data)\n      );\n    });\n  }\n\n  // Tooltip data is stored in /assets/tooltips.json, id = [data-tooltip-id]\n  getData() {\n    const json = require('../../assets/tooltips.json');\n    Object.freeze(json);\n\n    return json;\n  }\n  // Set tooltip with tippy.js plugin\n  setTooltip(el, data) {\n    const id = el.getAttribute('data-tooltip-id');\n\n    try {\n      const tooltip = data.find((entry) => entry.id === id),\n        template = this.createTemplate(tooltip);\n\n      tippy(el, {\n        content: template.innerHTML,\n        allowHTML: true,\n        animation: 'fade',\n        duration: [400],\n        interactive: true,\n        theme: 'black',\n        placement: 'top',\n        appendTo: document.body,\n        maxWidth: '15rem',\n        delay: [300, 300],\n        offset: this.offset(el),\n        zIndex: 10100,\n      });\n    } catch (err) {\n      console.error(\n        `Failed to set the tooltip for item with a data-tooltip id of [${id}].\\nCheck if there is corresponding data in tooltips.JSON`\n      );\n    }\n  }\n  // HTML template for inside Tippy\n  createTemplate(tooltip) {\n    const template = document.createElement('span'),\n      contentP = document.createElement('p');\n\n    contentP.className = 'content';\n    contentP.innerText = tooltip.content;\n    // <a> tag will only be set when there is an URL in JSON file\n    if ('url' in tooltip) contentP.appendChild(this.createAnchor(tooltip.url));\n    template.appendChild(contentP);\n\n    return template;\n  }\n\n  createAnchor(url) {\n    const anchor = document.createElement('a');\n\n    anchor.className = 'url';\n    anchor.href = url;\n    anchor.innerText = 'Read More';\n\n    return anchor;\n  }\n\n  // Calculate offset based on props if rotated, otherwise return default\n  offset(el) {\n    const style = window.getComputedStyle(el),\n      props = el.getBoundingClientRect();\n\n    if (style.transform === 'none') return [3, 7];\n    return [props.width * 0.15 < 10 ? props.width * 0.1 : props.width * 0.2, 2];\n  }\n}\n","import { storeManager } from '../src/store/StoreManager';\nimport { ResultsView } from '../src/classes/Results/ResultsView';\nimport SideBar from '../src/classes/SideBar.js';\nimport Configuration from '../src/classes/Configuration.js';\nimport Karyotype from '../src/classes/Karyotype.js';\nimport ActivityIndicator from '../src/classes/ActivityIndicator.js';\nimport ModuleTabsView from '../src/classes/ModuleTabsView.js';\n// import CollapseView from '../src/classes/CollapseView.js';\nimport TopPageLayoutManager from '../src/classes/TopPageLayoutManager.js';\nimport DownloadButton from './classes/DownloadButton.js';\n// Search\nimport SimpleSearchView from './components/SearchField/SimpleSearch/SimpleSearchView';\nimport { AdvancedSearchBuilderView } from '../src/classes/AdvancedSearchBuilderView.ts';\n// PanelViews\n// PanelViews: Filters\nimport PanelViewCheckList from '../src/classes/PanelViewCheckList.js';\nimport PanelViewFilterAlternativeAlleleFrequency from '../src/classes/PanelViewFilterAlternativeAlleleFrequency.js';\nimport PanelViewFilterVariantCallingQuality from '../src/classes/PanelViewFilterVariantCallingQuality.js';\nimport PanelViewFilterConsequence from '../src/classes/PanelViewFilterConsequence.js';\n// PanelViews: Variant preview\nimport PanelViewPreviewGene from '../src/classes/PanelViewPreviewGene.js';\nimport PreviewToVariantReport from '../src/classes/PreviewToVariantReport.js';\nimport PanelViewPreviewExternalLinks from '../src/classes/PanelViewPreviewExternalLinks.js';\nimport PanelViewPreviewAlternativeAlleleFrequencies from '../src/classes/PanelViewPreviewAlternativeAlleleFrequencies.js';\nimport PanelViewPreviewConsequence from '../src/classes/PanelViewPreviewConsequence.js';\nimport PanelViewPreviewClinicalSignificance from '../src/classes/PanelViewPreviewClinicalSignificance.js';\nimport TippyBox from '../src/classes/TippyBox.js';\n\nimport qs from 'qs';\nimport { extractSearchCondition } from './store/searchManager';\nimport { initializeApp } from './store/initializeApp';\nconst _currentUrlParams = qs.parse(window.location.search.substring(1));\n\nexport function initHome() {\n  setUserAgent();\n\n  storeManager.setData('offset', 0);\n  storeManager.setData('selectedRow', undefined);\n\n  initializeApp(); // URL\n\n  new Configuration(document.getElementById('Configuration'));\n\n  new Karyotype(document.getElementById('Karyotype'));\n\n  new ActivityIndicator(document.getElementById('ActivityIndicator'));\n\n  readyInitialSearch(() => {\n    initResultsView();\n    initDownloadButtons();\n    initSidebar();\n    initVariantPreview();\n    initSearchInputs();\n    initModuleTabs();\n    initTooltip();\n\n    // \n    setupCleanupHandlers();\n  });\n}\n\nfunction setUserAgent() {\n  const ua = window.navigator.userAgent.toLowerCase();\n  let os = '';\n  switch (true) {\n    case ua.indexOf('windows nt') !== -1:\n      os = 'windows';\n      break;\n    case ua.indexOf('mac os x') !== -1:\n      os = 'mac';\n      break;\n  }\n  document.querySelector('html').dataset.os = os;\n}\n\n/** \n * @param {Function} callback -  */\nfunction readyInitialSearch(callback) {\n  const simpleSearchConditionsMaster = ((referenceGenome) => {\n    switch (referenceGenome) {\n      case 'GRCh37':\n        return require('../assets/GRCh37/search_conditions.json');\n      case 'GRCh38':\n        return require('../assets/GRCh38/search_conditions.json');\n      default:\n        return [];\n    }\n  })(TOGOVAR_FRONTEND_REFERENCE);\n\n  Object.freeze(simpleSearchConditionsMaster);\n  storeManager.setData(\n    'simpleSearchConditionsMaster',\n    simpleSearchConditionsMaster\n  );\n\n  // URL\n  const currentSearchMode = storeManager.getData('searchMode');\n  const simpleSearchConditions = {};\n  const advancedSearchConditions = {};\n\n  // URL\n  switch (currentSearchMode) {\n    case 'simple':\n      Object.assign(\n        simpleSearchConditions,\n        extractSearchCondition(_currentUrlParams)\n      );\n      break;\n    case 'advanced':\n      // advanced\n      break;\n  }\n\n  // isFromHistory = true\n  storeManager.setData('simpleSearchConditions', simpleSearchConditions);\n  storeManager.setData('advancedSearchConditions', advancedSearchConditions);\n\n  callback();\n}\n\n// : \nconst getElement = (id) => document.getElementById(id);\nconst getAllElements = (selector) => document.querySelectorAll(selector);\n\n// : ResultsView \nlet globalResultsView = null;\n\n// \nfunction initResultsView() {\n  const resultView = new ResultsView(getElement('ResultsView'));\n  globalResultsView = resultView; // \n  TopPageLayoutManager.init([resultView]);\n}\n\n// : \nfunction cleanupApplication() {\n  console.log('Cleaning up application resources...');\n\n  // ResultsView \n  if (globalResultsView && typeof globalResultsView.destroy === 'function') {\n    try {\n      globalResultsView.destroy();\n      console.log('ResultsView cleaned up successfully');\n    } catch (error) {\n      console.error('Error cleaning up ResultsView:', error);\n    }\n    globalResultsView = null;\n  }\n\n  // TopPageLayoutManager \n  if (typeof TopPageLayoutManager.cleanup === 'function') {\n    try {\n      TopPageLayoutManager.cleanup();\n      console.log('TopPageLayoutManager cleaned up successfully');\n    } catch (error) {\n      console.error('Error cleaning up TopPageLayoutManager:', error);\n    }\n  }\n\n  // StoreManager \n  if (typeof storeManager.cleanup === 'function') {\n    try {\n      storeManager.cleanup();\n      console.log('StoreManager cleaned up successfully');\n    } catch (error) {\n      console.error('Error cleaning up StoreManager:', error);\n    }\n  }\n\n  console.log('Application cleanup completed.');\n}\n\n// \nfunction setupCleanupHandlers() {\n  // \n  window.addEventListener('beforeunload', () => {\n    cleanupApplication();\n  });\n\n  // \n  document.addEventListener('visibilitychange', () => {\n    if (document.visibilityState === 'hidden') {\n      //  beforeunload \n      // cleanupApplication();\n    }\n  });\n\n  // : \n  if (typeof window !== 'undefined') {\n    window.cleanupTogovar = cleanupApplication;\n  }\n}\n\n// \nfunction initDownloadButtons() {\n  ['DownloadJson', 'DownloadCsv', 'DownloadTsv'].forEach((id) => {\n    new DownloadButton(getElement(id));\n  });\n}\n\n// \nfunction initSidebar() {\n  new SideBar(getElement('SideBar'));\n  new PanelViewCheckList(\n    getElement('FilterDatasets'),\n    'dataset',\n    'statisticsDataset'\n  );\n  new PanelViewFilterAlternativeAlleleFrequency(\n    getElement('FilterAlternativeAlleleFrequency')\n  );\n  new PanelViewFilterVariantCallingQuality(\n    getElement('FilterVariantCallingQuality')\n  );\n  new PanelViewCheckList(\n    getElement('FilterVariantType'),\n    'type',\n    'statisticsType'\n  );\n  new PanelViewCheckList(\n    getElement('FilterClinicalSignificance'),\n    'significance',\n    'statisticsSignificance'\n  );\n  new PanelViewFilterConsequence(getElement('FilterConsequence'));\n  new PanelViewCheckList(getElement('FilterSIFT'), 'sift');\n  new PanelViewCheckList(getElement('FilterPolyPhen'), 'polyphen');\n  new PanelViewCheckList(getElement('FilterAlphaMissense'), 'alphamissense');\n}\n\n// \nfunction initVariantPreview() {\n  new PanelViewPreviewGene(getElement('PreviewGene'));\n  new PreviewToVariantReport(getElement('PreviewToVariantReport'));\n  new PanelViewPreviewExternalLinks(getElement('PreviewExternalLinks'));\n  new PanelViewPreviewAlternativeAlleleFrequencies(\n    getElement('PreviewAlternativeAlleleFrequencies')\n  );\n  new PanelViewPreviewConsequence(getElement('PreviewConsequence'));\n  new PanelViewPreviewClinicalSignificance(\n    getElement('PreviewClinicalSignificance')\n  );\n}\n\n// \nfunction initSearchInputs() {\n  new SimpleSearchView();\n  new AdvancedSearchBuilderView(getElement('AdvancedSearchBuilderView'));\n\n  // \n  getAllElements('#SearchInputView > .tabscontainer > ul > li').forEach(\n    (elm) => {\n      elm.addEventListener('click', (e) => {\n        storeManager.setData('searchMode', e.target.dataset.target);\n      });\n    }\n  );\n}\n\n// \nfunction initModuleTabs() {\n  getAllElements('.module-tabs-view').forEach((elm) => {\n    new ModuleTabsView(elm);\n  });\n}\n\n// \nfunction initTooltip() {\n  new TippyBox();\n}\n","import Axios from 'axios';\nimport { setupCache } from 'axios-cache-interceptor';\n\nexport const axios = setupCache(\n  Axios.create({\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n  })\n);\n\n/** Cached axios */\nexport class cachedAxios {\n  /**\n   * Create cached axios instance\n   * @param {string} baseURL - base URL.\n   * @param {number} maxCacheSize - maximum cache entries number. After reaching this treshold, oldest entries will be deleted from cache.\n   */\n  constructor(baseURL, maxCacheSize = 100) {\n    this.axios = Axios.create({\n      baseURL,\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n    });\n    this.maxCacheSize = maxCacheSize;\n    this.cache = new Map();\n  }\n\n  /**\n   *\n   * @param {string} url - url part bo be fetched. Fetched url will be  baseURL + url\n   * @returns {object} {data} - response data\n   */\n  get(url) {\n    if (this.cache.has(url)) {\n      return Promise.resolve(this.cache.get(url));\n    }\n    return this.axios.get(url).then(({ data }) => {\n      this.cache.set(url, { data });\n      if (this.cache.size > this.maxCacheSize) {\n        const [first] = this.cache.keys();\n        this.cache.delete(first);\n      }\n      return { data };\n    });\n  }\n}\n","export const capitalizeFirstLetter = (string) => {\n  return `${string.charAt(0).toUpperCase()}${string.slice(1)}`;\n};\n","export function debounce(func, ms = 1000) {\n  let timeout;\n  return function () {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(this, arguments), ms);\n  };\n}\n","import { storeManager } from '../store/StoreManager';\n\nexport function keyDownEvent(storeName) {\n  switch (storeName) {\n    case 'showModal':\n      if (!storeManager.getData('showSuggest')) {\n        return true;\n      }\n      return false;\n\n    case 'selectedRow':\n      if (!storeManager.getData('showModal')) {\n        return true;\n      }\n      return false;\n\n    default:\n      break;\n  }\n}\n","module.exports = [{\"id\":\"term\",\"label\":\"Term\",\"type\":\"string\",\"default\":\"\"},{\"id\":\"dataset\",\"label\":\"Dataset\",\"type\":\"array\",\"items\":[{\"id\":\"gem_j_wga\",\"label\":\"GEM-J WGA\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"jga_wes\",\"label\":\"JGA-WES\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"jga_snp\",\"label\":\"JGA-SNP\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"tommo\",\"label\":\"ToMMo 8.3KJPN\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"hgvd\",\"label\":\"HGVD\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"gnomad_genomes\",\"label\":\"gnomAD genomes\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"gnomad_exomes\",\"label\":\"gnomAD exomes\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"mgend\",\"label\":\"MGeND\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":false},{\"id\":\"clinvar\",\"label\":\"ClinVar\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":false}]},{\"id\":\"frequency\",\"label\":\"Alternative allele frequency\",\"type\":\"array\",\"items\":[{\"id\":\"from\",\"label\":\"From\",\"type\":\"range\",\"default\":0},{\"id\":\"to\",\"label\":\"To\",\"type\":\"range\",\"default\":1},{\"id\":\"invert\",\"label\":\"Invert\",\"type\":\"boolean\",\"default\":\"0\"},{\"id\":\"match\",\"label\":\"Match\",\"type\":\"enumeration\",\"default\":\"any\",\"values\":[\"all\",\"any\"]}]},{\"id\":\"quality\",\"label\":\"Variant calling quality\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"type\",\"label\":\"Variant type\",\"type\":\"array\",\"items\":[{\"id\":\"SO_0001483\",\"label\":\"SNV\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_0000667\",\"label\":\"Insertion\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_0000159\",\"label\":\"Deletion\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_1000032\",\"label\":\"Indel\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_1000002\",\"label\":\"Substitution\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"significance\",\"label\":\"Clinical significance\",\"type\":\"array\",\"items\":[{\"id\":\"NC\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"P\",\"label\":\"Pathogenic\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LP\",\"label\":\"Likely pathogenic\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"PLP\",\"label\":\"Pathogenic, Low penetrance\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LPLP\",\"label\":\"Likely pathogenic, Low penetrance\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"ERA\",\"label\":\"Established risk allele\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LRA\",\"label\":\"Likely risk allele\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"URA\",\"label\":\"Uncertain risk allele\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"US\",\"label\":\"Uncertain significance\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LB\",\"label\":\"Likely benign\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"B\",\"label\":\"Benign\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"CI\",\"label\":\"Conflicting interpretations of pathogenicity\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"DR\",\"label\":\"Drug response\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"CS\",\"label\":\"Confers sensitivity\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"RF\",\"label\":\"Risk factor\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"A\",\"label\":\"Association\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"PR\",\"label\":\"Protective\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"AF\",\"label\":\"Affects\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"O\",\"label\":\"Other\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"NP\",\"label\":\"Not provided\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"AN\",\"label\":\"Association not found\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"consequence\",\"label\":\"Consequence\",\"type\":\"array\",\"items\":[{\"id\":\"SO_0001566\",\"label\":\"Regulatory region variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located within a regulatory region\"},{\"id\":\"SO_0001567\",\"label\":\"Stop retained variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base in the terminator codon is changed, but the terminator remains\"},{\"id\":\"SO_0001574\",\"label\":\"Splice acceptor variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A splice variant that changes the 2 base region at the 3' end of an intron\"},{\"id\":\"SO_0001575\",\"label\":\"Splice donor variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A splice variant that changes the 2 base region at the 5' end of an intron\"},{\"id\":\"SO_0001578\",\"label\":\"Stop lost\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base of the terminator codon (stop) is changed, resulting in an elongated transcript\"},{\"id\":\"SO_0001580\",\"label\":\"Coding sequence variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that changes the coding sequence\"},{\"id\":\"SO_0001583\",\"label\":\"Missense variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant, that changes one or more bases, resulting in a different amino acid sequence but where the length is preserved\"},{\"id\":\"SO_0001587\",\"label\":\"Stop gained\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant whereby at least one base of a codon is changed, resulting in a premature stop codon, leading to a shortened transcript\"},{\"id\":\"SO_0001589\",\"label\":\"Frameshift variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant which causes a disruption of the translational reading frame, because the number of nucleotides inserted or deleted is not a multiple of three\"},{\"id\":\"SO_0001619\",\"label\":\"Non coding transcript variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A transcript variant of a non coding RNA gene\"},{\"id\":\"SO_0001620\",\"label\":\"Mature miRNA variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A transcript variant located with the sequence of the mature miRNA\"},{\"id\":\"SO_0001621\",\"label\":\"NMD transcript variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A variant in a transcript that is the target of NMD\"},{\"id\":\"SO_0001623\",\"label\":\"5 prime UTR variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A UTR variant of the 5' UTR\"},{\"id\":\"SO_0001624\",\"label\":\"3 prime UTR variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A UTR variant of the 3' UTR\"},{\"id\":\"SO_0001626\",\"label\":\"Incomplete terminal codon variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base of the final codon of an incompletely annotated transcript is changed\"},{\"id\":\"SO_0001627\",\"label\":\"Intron variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A transcript variant occurring within an intron\"},{\"id\":\"SO_0001628\",\"label\":\"Intergenic variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located in the intergenic region, between genes\"},{\"id\":\"SO_0001630\",\"label\":\"Splice region variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant in which a change has occurred within the region of the splice site, either within 1-3 bases of the exon or 3-8 bases of the intron\"},{\"id\":\"SO_0001631\",\"label\":\"Upstream gene variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located 5' of a gene\"},{\"id\":\"SO_0001632\",\"label\":\"Downstream gene variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located 3' of a gene\"},{\"id\":\"SO_0001782\",\"label\":\"TF binding site variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located within a transcription factor binding site\"},{\"id\":\"SO_0001792\",\"label\":\"Non coding transcript exon variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that changes non-coding exon sequence in a non-coding transcript\"},{\"id\":\"SO_0001818\",\"label\":\"Protein altering variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence_variant which is predicted to change the protein encoded in the coding sequence\"},{\"id\":\"SO_0001819\",\"label\":\"Synonymous variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where there is no resulting change to the encoded amino acid\"},{\"id\":\"SO_0001821\",\"label\":\"Inframe insertion\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"An inframe non synonymous variant that inserts bases into in the coding sequence\"},{\"id\":\"SO_0001822\",\"label\":\"Inframe deletion\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"An inframe non synonymous variant that deletes bases from the coding sequence\"},{\"id\":\"SO_0001889\",\"label\":\"Transcript amplification\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature amplification of a region containing a transcript\"},{\"id\":\"SO_0001891\",\"label\":\"Regulatory region amplification\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature amplification of a region containing a regulatory region\"},{\"id\":\"SO_0001892\",\"label\":\"TFBS amplification\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature amplification of a region containing a transcription factor binding site\"},{\"id\":\"SO_0001893\",\"label\":\"Transcript ablation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature ablation whereby the deleted region includes a transcript feature\"},{\"id\":\"SO_0001894\",\"label\":\"Regulatory region ablation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature ablation whereby the deleted region includes a regulatory region\"},{\"id\":\"SO_0001895\",\"label\":\"TFBS ablation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature ablation whereby the deleted region includes a transcription factor binding site\"},{\"id\":\"SO_0001906\",\"label\":\"Feature truncation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that causes the reduction of a genomic feature, with regard to the reference sequence\"},{\"id\":\"SO_0001907\",\"label\":\"Feature elongation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that causes the extension of a genomic feature, with regard to the reference sequence\"},{\"id\":\"SO_0002012\",\"label\":\"Start lost\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A codon variant that changes at least one base of the canonical start codon\"},{\"id\":\"SO_0002019\",\"label\":\"Start retained variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base in the start codon is changed, but the start remains\"}]},{\"id\":\"consequence_grouping\",\"items\":[{\"label\":\"Transcript variant\",\"items\":[{\"label\":\"Coding variant\",\"items\":[\"SO_0001580\",\"SO_0001907\",\"SO_0001906\",\"SO_0001589\",\"SO_0001626\",\"SO_0001822\",\"SO_0001821\",\"SO_0001583\",\"SO_0001621\",\"SO_0001818\",\"SO_0001819\",\"SO_0002012\",\"SO_0001587\",\"SO_0001578\",\"SO_0002019\",\"SO_0001567\"]},{\"label\":\"Non-coding variant\",\"items\":[\"SO_0001624\",\"SO_0001623\",\"SO_0001627\",\"SO_0001792\",\"SO_0001619\"]},{\"label\":\"Splice variant\",\"items\":[\"SO_0001574\",\"SO_0001575\",\"SO_0001630\"]},\"SO_0001893\",\"SO_0001889\"]},{\"label\":\"Regulatory variant\",\"items\":[\"SO_0001620\",\"SO_0001894\",\"SO_0001891\",\"SO_0001566\",\"SO_0001782\",\"SO_0001895\",\"SO_0001892\"]},{\"label\":\"Intergenic variant\",\"items\":[\"SO_0001632\",\"SO_0001628\",\"SO_0001631\"]}]},{\"id\":\"alphamissense\",\"label\":\"AlphaMissense\",\"type\":\"array\",\"items\":[{\"id\":\"N\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LP\",\"label\":\"Likely pathogenic\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"A\",\"label\":\"Ambiguous\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LB\",\"label\":\"Likely benign\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"sift\",\"label\":\"SIFT\",\"type\":\"array\",\"items\":[{\"id\":\"N\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"D\",\"label\":\"Deleterious\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"T\",\"label\":\"Tolerated\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"polyphen\",\"label\":\"PolyPhen\",\"type\":\"array\",\"items\":[{\"id\":\"N\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"PROBD\",\"label\":\"Probably damaging\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"POSSD\",\"label\":\"Possibly damaging\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"B\",\"label\":\"Benign\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"U\",\"label\":\"Unknown\",\"type\":\"boolean\",\"default\":\"1\"}]}]","module.exports = [{\"id\":\"term\",\"label\":\"Term\",\"type\":\"string\",\"default\":\"\"},{\"id\":\"dataset\",\"label\":\"Dataset\",\"type\":\"array\",\"items\":[{\"id\":\"gem_j_wga\",\"label\":\"GEM-J WGA\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"jga_wgs\",\"label\":\"JGA-WGS\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"jga_wes\",\"label\":\"JGA-WES\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"jga_snp\",\"label\":\"JGA-SNP\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"tommo\",\"label\":\"ToMMo 54KJPN\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"ncbn\",\"label\":\"NCBN\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"gnomad_genomes\",\"label\":\"gnomAD genomes\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"gnomad_exomes\",\"label\":\"gnomAD exomes\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":true},{\"id\":\"mgend\",\"label\":\"MGeND\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":false},{\"id\":\"clinvar\",\"label\":\"ClinVar\",\"type\":\"boolean\",\"default\":\"1\",\"has_freq\":false}]},{\"id\":\"frequency\",\"label\":\"Alternative allele frequency\",\"type\":\"array\",\"items\":[{\"id\":\"from\",\"label\":\"From\",\"type\":\"range\",\"default\":0},{\"id\":\"to\",\"label\":\"To\",\"type\":\"range\",\"default\":1},{\"id\":\"invert\",\"label\":\"Invert\",\"type\":\"boolean\",\"default\":\"0\"},{\"id\":\"match\",\"label\":\"Match\",\"type\":\"enumeration\",\"default\":\"any\",\"values\":[\"all\",\"any\"]}]},{\"id\":\"quality\",\"label\":\"Variant calling quality\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"type\",\"label\":\"Variant type\",\"type\":\"array\",\"items\":[{\"id\":\"SO_0001483\",\"label\":\"SNV\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_0000667\",\"label\":\"Insertion\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_0000159\",\"label\":\"Deletion\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_1000032\",\"label\":\"Indel\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"SO_1000002\",\"label\":\"Substitution\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"significance\",\"label\":\"Clinical significance\",\"type\":\"array\",\"items\":[{\"id\":\"NC\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"P\",\"label\":\"Pathogenic\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LP\",\"label\":\"Likely pathogenic\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"PLP\",\"label\":\"Pathogenic, Low penetrance\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LPLP\",\"label\":\"Likely pathogenic, Low penetrance\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"ERA\",\"label\":\"Established risk allele\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LRA\",\"label\":\"Likely risk allele\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"URA\",\"label\":\"Uncertain risk allele\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"US\",\"label\":\"Uncertain significance\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LB\",\"label\":\"Likely benign\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"B\",\"label\":\"Benign\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"CI\",\"label\":\"Conflicting interpretations of pathogenicity\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"DR\",\"label\":\"Drug response\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"CS\",\"label\":\"Confers sensitivity\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"RF\",\"label\":\"Risk factor\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"A\",\"label\":\"Association\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"PR\",\"label\":\"Protective\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"AF\",\"label\":\"Affects\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"O\",\"label\":\"Other\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"NP\",\"label\":\"Not provided\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"AN\",\"label\":\"Association not found\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"consequence\",\"label\":\"Consequence\",\"type\":\"array\",\"items\":[{\"id\":\"SO_0001566\",\"label\":\"Regulatory region variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located within a regulatory region\"},{\"id\":\"SO_0001567\",\"label\":\"Stop retained variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base in the terminator codon is changed, but the terminator remains\"},{\"id\":\"SO_0001574\",\"label\":\"Splice acceptor variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A splice variant that changes the 2 base region at the 3' end of an intron\"},{\"id\":\"SO_0001575\",\"label\":\"Splice donor variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A splice variant that changes the 2 base region at the 5' end of an intron\"},{\"id\":\"SO_0001578\",\"label\":\"Stop lost\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base of the terminator codon (stop) is changed, resulting in an elongated transcript\"},{\"id\":\"SO_0001580\",\"label\":\"Coding sequence variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that changes the coding sequence\"},{\"id\":\"SO_0001583\",\"label\":\"Missense variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant, that changes one or more bases, resulting in a different amino acid sequence but where the length is preserved\"},{\"id\":\"SO_0001587\",\"label\":\"Stop gained\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant whereby at least one base of a codon is changed, resulting in a premature stop codon, leading to a shortened transcript\"},{\"id\":\"SO_0001589\",\"label\":\"Frameshift variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant which causes a disruption of the translational reading frame, because the number of nucleotides inserted or deleted is not a multiple of three\"},{\"id\":\"SO_0001619\",\"label\":\"Non coding transcript variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A transcript variant of a non coding RNA gene\"},{\"id\":\"SO_0001620\",\"label\":\"Mature miRNA variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A transcript variant located with the sequence of the mature miRNA\"},{\"id\":\"SO_0001621\",\"label\":\"NMD transcript variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A variant in a transcript that is the target of NMD\"},{\"id\":\"SO_0001623\",\"label\":\"5 prime UTR variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A UTR variant of the 5' UTR\"},{\"id\":\"SO_0001624\",\"label\":\"3 prime UTR variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A UTR variant of the 3' UTR\"},{\"id\":\"SO_0001626\",\"label\":\"Incomplete terminal codon variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base of the final codon of an incompletely annotated transcript is changed\"},{\"id\":\"SO_0001627\",\"label\":\"Intron variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A transcript variant occurring within an intron\"},{\"id\":\"SO_0001628\",\"label\":\"Intergenic variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located in the intergenic region, between genes\"},{\"id\":\"SO_0001630\",\"label\":\"Splice region variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant in which a change has occurred within the region of the splice site, either within 1-3 bases of the exon or 3-8 bases of the intron\"},{\"id\":\"SO_0001631\",\"label\":\"Upstream gene variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located 5' of a gene\"},{\"id\":\"SO_0001632\",\"label\":\"Downstream gene variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located 3' of a gene\"},{\"id\":\"SO_0001782\",\"label\":\"TF binding site variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant located within a transcription factor binding site\"},{\"id\":\"SO_0001792\",\"label\":\"Non coding transcript exon variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that changes non-coding exon sequence in a non-coding transcript\"},{\"id\":\"SO_0001818\",\"label\":\"Protein altering variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence_variant which is predicted to change the protein encoded in the coding sequence\"},{\"id\":\"SO_0001819\",\"label\":\"Synonymous variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where there is no resulting change to the encoded amino acid\"},{\"id\":\"SO_0001821\",\"label\":\"Inframe insertion\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"An inframe non synonymous variant that inserts bases into in the coding sequence\"},{\"id\":\"SO_0001822\",\"label\":\"Inframe deletion\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"An inframe non synonymous variant that deletes bases from the coding sequence\"},{\"id\":\"SO_0001889\",\"label\":\"Transcript amplification\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature amplification of a region containing a transcript\"},{\"id\":\"SO_0001891\",\"label\":\"Regulatory region amplification\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature amplification of a region containing a regulatory region\"},{\"id\":\"SO_0001892\",\"label\":\"TFBS amplification\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature amplification of a region containing a transcription factor binding site\"},{\"id\":\"SO_0001893\",\"label\":\"Transcript ablation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature ablation whereby the deleted region includes a transcript feature\"},{\"id\":\"SO_0001894\",\"label\":\"Regulatory region ablation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature ablation whereby the deleted region includes a regulatory region\"},{\"id\":\"SO_0001895\",\"label\":\"TFBS ablation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A feature ablation whereby the deleted region includes a transcription factor binding site\"},{\"id\":\"SO_0001906\",\"label\":\"Feature truncation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that causes the reduction of a genomic feature, with regard to the reference sequence\"},{\"id\":\"SO_0001907\",\"label\":\"Feature elongation\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant that causes the extension of a genomic feature, with regard to the reference sequence\"},{\"id\":\"SO_0002012\",\"label\":\"Start lost\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A codon variant that changes at least one base of the canonical start codon\"},{\"id\":\"SO_0002019\",\"label\":\"Start retained variant\",\"type\":\"boolean\",\"default\":\"1\",\"description\":\"A sequence variant where at least one base in the start codon is changed, but the start remains\"}]},{\"id\":\"consequence_grouping\",\"items\":[{\"label\":\"Transcript variant\",\"items\":[{\"label\":\"Coding variant\",\"items\":[\"SO_0001580\",\"SO_0001907\",\"SO_0001906\",\"SO_0001589\",\"SO_0001626\",\"SO_0001822\",\"SO_0001821\",\"SO_0001583\",\"SO_0001621\",\"SO_0001818\",\"SO_0001819\",\"SO_0002012\",\"SO_0001587\",\"SO_0001578\",\"SO_0002019\",\"SO_0001567\"]},{\"label\":\"Non-coding variant\",\"items\":[\"SO_0001624\",\"SO_0001623\",\"SO_0001627\",\"SO_0001792\",\"SO_0001619\"]},{\"label\":\"Splice variant\",\"items\":[\"SO_0001574\",\"SO_0001575\",\"SO_0001630\"]},\"SO_0001893\",\"SO_0001889\"]},{\"label\":\"Regulatory variant\",\"items\":[\"SO_0001620\",\"SO_0001894\",\"SO_0001891\",\"SO_0001566\",\"SO_0001782\",\"SO_0001895\",\"SO_0001892\"]},{\"label\":\"Intergenic variant\",\"items\":[\"SO_0001632\",\"SO_0001628\",\"SO_0001631\"]}]},{\"id\":\"alphamissense\",\"label\":\"AlphaMissense\",\"type\":\"array\",\"items\":[{\"id\":\"N\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LP\",\"label\":\"Likely pathogenic\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"A\",\"label\":\"Ambiguous\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"LB\",\"label\":\"Likely benign\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"sift\",\"label\":\"SIFT\",\"type\":\"array\",\"items\":[{\"id\":\"N\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"D\",\"label\":\"Deleterious\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"T\",\"label\":\"Tolerated\",\"type\":\"boolean\",\"default\":\"1\"}]},{\"id\":\"polyphen\",\"label\":\"PolyPhen\",\"type\":\"array\",\"items\":[{\"id\":\"N\",\"label\":\"Unassigned\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"PROBD\",\"label\":\"Probably damaging\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"POSSD\",\"label\":\"Possibly damaging\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"B\",\"label\":\"Benign\",\"type\":\"boolean\",\"default\":\"1\"},{\"id\":\"U\",\"label\":\"Unknown\",\"type\":\"boolean\",\"default\":\"1\"}]}]","module.exports = [{\"id\":\"table-header-togovar_id\",\"content\":\"TogoVar identifier assigned to variants observed in Japanese populations\"},{\"id\":\"table-header-refsnp_id\",\"content\":\"RefSNP (rs) identifier of dbSNP\"},{\"id\":\"table-header-position\",\"content\":\"Chromosomal position\"},{\"id\":\"table-header-ref_alt\",\"content\":\"Reference and alternative allele\"},{\"id\":\"table-header-type\",\"content\":\"Variant type (SNV, insertion, deletion, indel or substitution)\"},{\"id\":\"table-header-gene\",\"content\":\"The HUGO Gene Nomenclature Committee (HGNC) gene symbol\"},{\"id\":\"table-header-alt_frequency\",\"content\":\"Frequency indicator representing alternative allele frequencies\",\"url\":\"doc/help#s1\"},{\"id\":\"table-header-consequence\",\"content\":\"Variant consequence detected by Variant Effect Predictor (VEP)\",\"url\":\"/doc/help#d5\"},{\"id\":\"table-header-sift\",\"content\":\"Prediction of functional effects of a nonsynonymous variant by the Sorting Intolerant From Tolerant (SIFT) program\",\"url\":\"/doc/help#d6\"},{\"id\":\"table-header-polyphen\",\"content\":\"Prediction of functional effects of a nonsynonymous variant by the PolyPhen-2 (Polymorphism Phenotyping v2) program\",\"url\":\"/doc/help#d6\"},{\"id\":\"table-header-alphamissense\",\"content\":\"Prediction of functional effects of a nonsynonymous variant by the AlphaMissense program.\",\"url\":\"/doc/help#d6\"},{\"id\":\"table-header-clinical_significance\",\"content\":\"Clinical significance provided by ClinVar\",\"url\":\"/doc/help#d7\"}]","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}:host{--height-container:var(--height-advanced-search-condition-values-container);--height:var(--height-advanced-search-condition-value);display:inline-block}:host>.condition-item-value-container{display:flex;justify-content:space-between;gap:20px}:host .inner{align-self:center;line-height:1;padding:1px 10px 0 10px;background-color:#fff;border:solid 1px var(--color-key-dark1);border-radius:calc(var(--height)*.5);font-weight:700;margin-right:2px}:host([data-condition-type=dataset]),:host([data-condition-type=genotype]){display:block;position:relative}:host([data-condition-type=dataset]) .inner,:host([data-condition-type=genotype]) .inner{min-width:50px}:host([data-condition-type=dataset]) .inner::before,:host([data-condition-type=genotype]) .inner::before{font-family:fontello,sans-serif;content:var(--char-dataset);margin-right:4px}:host([data-condition-type=significance]) .inner::before{margin-right:4px;margin-left:-2px;font-size:10px;position:relative;top:-1px}:host([data-condition-type=pathogenicity_prediction]){position:relative}:host([data-condition-type=pathogenicity_prediction]) .inner{background-color:rgba(0,0,0,0);border:none}:host([data-condition-type=dataset][data-value=gem_j_wga]) .inner{border-color:var(--color-dataset-gemj);background-color:var(--color-dataset-gemj-light)}:host([data-condition-type=dataset][data-value=gem_j_wga]) .inner::before{color:var(--color-dataset-gemj)}:host([data-condition-type=dataset][data-value=jga_snp]) .inner,:host([data-condition-type=dataset][data-value=jga_wes]) .inner,:host([data-condition-type=dataset][data-value^=bbj_riken]) .inner,:host([data-condition-type=dataset][data-value^=jga_wgs]) .inner,:host([data-condition-type=genotype][data-value=jga_snp]) .inner,:host([data-condition-type=genotype][data-value=jga_wes]) .inner,:host([data-condition-type=genotype][data-value^=bbj_riken]) .inner,:host([data-condition-type=genotype][data-value^=jga_wgs]) .inner{border-color:var(--color-dataset-jga);background-color:var(--color-dataset-jga-light)}:host([data-condition-type=dataset][data-value=jga_snp]) .inner::before,:host([data-condition-type=dataset][data-value=jga_wes]) .inner::before,:host([data-condition-type=dataset][data-value^=bbj_riken]) .inner::before,:host([data-condition-type=dataset][data-value^=jga_wgs]) .inner::before,:host([data-condition-type=genotype][data-value=jga_snp]) .inner::before,:host([data-condition-type=genotype][data-value=jga_wes]) .inner::before,:host([data-condition-type=genotype][data-value^=bbj_riken]) .inner::before,:host([data-condition-type=genotype][data-value^=jga_wgs]) .inner::before{color:var(--color-dataset-jga)}:host([data-condition-type=dataset][data-value=hgvd]) .inner{border-color:var(--color-dataset-hgvd);background-color:var(--color-dataset-hgvd-light)}:host([data-condition-type=dataset][data-value=hgvd]) .inner::before{color:var(--color-dataset-hgvd)}:host([data-condition-type=dataset][data-value=tommo]) .inner{border-color:var(--color-dataset-tommo);background-color:var(--color-dataset-tommo-light)}:host([data-condition-type=dataset][data-value=tommo]) .inner::before{color:var(--color-dataset-tommo)}:host([data-condition-type=dataset][data-value^=ncbn]) .inner,:host([data-condition-type=genotype][data-value^=ncbn]) .inner{border-color:var(--color-dataset-ncbn);background-color:var(--color-dataset-ncbn-light)}:host([data-condition-type=dataset][data-value^=ncbn]) .inner::before,:host([data-condition-type=genotype][data-value^=ncbn]) .inner::before{color:var(--color-dataset-ncbn)}:host([data-condition-type=dataset][data-value^=gnomad_exomes]) .inner,:host([data-condition-type=dataset][data-value^=gnomad_genomes]) .inner{border-color:var(--color-dataset-foreign);background-color:var(--color-dataset-foreign-light)}:host([data-condition-type=dataset][data-value^=gnomad_exomes]) .inner::before,:host([data-condition-type=dataset][data-value^=gnomad_genomes]) .inner::before{color:var(--color-dataset-foreign)}:host([data-condition-type=significance][data-value=P]) .inner{border-color:var(--color-sign-dangerous);background-color:var(--color-sign-dangerous-light)}:host([data-condition-type=significance][data-value=P]) .inner::before{content:\"P\";color:var(--color-sign-dangerous)}:host([data-condition-type=significance][data-value=LP]) .inner{border-color:var(--color-sign-dangerous);background-color:var(--color-sign-dangerous-light)}:host([data-condition-type=significance][data-value=LP]) .inner::before{content:\"LP\";color:var(--color-sign-dangerous)}:host([data-condition-type=significance][data-value=PLP]) .inner{border-color:var(--color-sign-lowdangerous);background-color:var(--color-sign-lowdangerous-light)}:host([data-condition-type=significance][data-value=PLP]) .inner::before{content:\"P\";color:var(--color-sign-lowdangerous)}:host([data-condition-type=significance][data-value=LPLP]) .inner{border-color:var(--color-sign-lowdangerous);background-color:var(--color-sign-lowdangerous-light)}:host([data-condition-type=significance][data-value=LPLP]) .inner::before{content:\"LP\";color:var(--color-sign-lowdangerous)}:host([data-condition-type=significance][data-value=ERA]) .inner{border-color:var(--color-sign-warning);background-color:var(--color-sign-warning-light)}:host([data-condition-type=significance][data-value=ERA]) .inner::before{content:\"RA\";color:var(--color-sign-warning)}:host([data-condition-type=significance][data-value=LRA]) .inner{border-color:var(--color-sign-warning);background-color:var(--color-sign-warning-light)}:host([data-condition-type=significance][data-value=LRA]) .inner::before{content:\"RA\";color:var(--color-sign-warning)}:host([data-condition-type=significance][data-value=URA]) .inner{border-color:var(--color-sign-warning);background-color:var(--color-sign-warning-light)}:host([data-condition-type=significance][data-value=URA]) .inner::before{content:\"RA\";color:var(--color-sign-warning)}:host([data-condition-type=significance][data-value=US]) .inner{border-color:var(--color-sign-unknown);background-color:var(--color-sign-unknown-light)}:host([data-condition-type=significance][data-value=US]) .inner::before{content:\"US\";color:var(--color-sign-unknown)}:host([data-condition-type=significance][data-value=LB]) .inner{border-color:var(--color-sign-normal);background-color:var(--color-sign-normal-light)}:host([data-condition-type=significance][data-value=LB]) .inner::before{content:\"LB\";color:var(--color-sign-normal)}:host([data-condition-type=significance][data-value=B]) .inner{border-color:var(--color-sign-safe);background-color:var(--color-sign-safe-light)}:host([data-condition-type=significance][data-value=B]) .inner::before{content:\"B\";color:var(--color-sign-safe)}:host([data-condition-type=significance][data-value=CI]) .inner{border-color:var(--color-sign-modifier);background-color:var(--color-sign-modifier-light)}:host([data-condition-type=significance][data-value=CI]) .inner::before{content:\"CI\";color:var(--color-sign-modifier)}:host([data-condition-type=significance][data-value=DR]) .inner{border-color:var(--color-sign-other);background-color:var(--color-sign-other-light)}:host([data-condition-type=significance][data-value=DR]) .inner::before{content:\"DR\";color:var(--color-sign-other)}:host([data-condition-type=significance][data-value=CS]) .inner{border-color:var(--color-sign-other);background-color:var(--color-sign-other-light)}:host([data-condition-type=significance][data-value=CS]) .inner::before{content:\"CS\";color:var(--color-sign-other)}:host([data-condition-type=significance][data-value=RF]) .inner{border-color:var(--color-sign-other);background-color:var(--color-sign-other-light)}:host([data-condition-type=significance][data-value=RF]) .inner::before{content:\"RF\";color:var(--color-sign-other)}:host([data-condition-type=significance][data-value=A]) .inner{border-color:var(--color-sign-other);background-color:var(--color-sign-other-light)}:host([data-condition-type=significance][data-value=A]) .inner::before{content:\"A\";color:var(--color-sign-other)}:host([data-condition-type=significance][data-value=PR]) .inner{border-color:var(--color-sign-other);background-color:var(--color-sign-other-light)}:host([data-condition-type=significance][data-value=PR]) .inner::before{content:\"PR\";color:var(--color-sign-other)}:host([data-condition-type=significance][data-value=AF]) .inner{border-color:var(--color-sign-other);background-color:var(--color-sign-other-light)}:host([data-condition-type=significance][data-value=AF]) .inner::before{content:\"AF\";color:var(--color-sign-other)}:host([data-condition-type=significance][data-value=O]) .inner{border-color:var(--color-gray);background-color:#fff}:host([data-condition-type=significance][data-value=O]) .inner::before{content:\"O\";border-color:var(--color-gray)}:host([data-condition-type=significance][data-value=NP]) .inner{border-color:var(--color-gray);background-color:#fff}:host([data-condition-type=significance][data-value=NP]) .inner::before{content:\"NP\";border-color:var(--color-gray)}:host([data-condition-type=significance][data-value=AN]) .inner{border-color:var(--color-gray);background-color:#fff}:host([data-condition-type=significance][data-value=AN]) .inner::before{content:\"AN\";border-color:var(--color-gray)}button.delete{display:none;border-radius:50%;border:none;color:var(--color-gray);cursor:pointer;position:relative;font-family:fontello,sans-serif;background-color:rgba(0,0,0,0);padding:0;margin-left:.2em;margin-right:-.5em}button.delete::before{content:var(--char-delete);font-size:.8em}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}:host{display:flex;align-items:center;white-space:nowrap}:host>.frequencygraph{width:100px;height:3.5px;background-color:var(--color-darker-gray);position:relative;margin-right:4px}:host>.frequencygraph>.scale{position:absolute;top:-1px;bottom:-1px;border-left:dotted .5px var(--color-separator)}@media(-webkit-min-device-pixel-ratio:2){:host>.frequencygraph>.scale{border-left:dotted 1px var(--color-separator)}}:host>.frequencygraph>.bar{position:absolute;height:100%;background-color:var(--color-dataset-foreign)}:host([data-dataset=gem_j_wga])>.frequencygraph>.bar{background-color:var(--color-dataset-gemj)}:host([data-dataset=jga_snp]) .frequencygraph>.bar,:host([data-dataset=jga_wes]) .frequencygraph>.bar,:host([data-dataset^=bbj_riken]) .frequencygraph>.bar,:host([data-dataset^=jga_wgs]) .frequencygraph>.bar{background-color:var(--color-dataset-jga)}:host([data-dataset=tommo])>.frequencygraph>.bar{background-color:var(--color-dataset-tommo)}:host([data-dataset=hgvd])>.frequencygraph>.bar{background-color:var(--color-dataset-hgvd)}:host([data-dataset^=ncbn])>.frequencygraph>.bar{background-color:var(--color-dataset-ncbn)}:host>.range{margin-right:.6em;width:8.8em}:host>.range>.from,:host>.range>.to{font-weight:700}:host>.filtered{margin:0;font-size:10px}:host([data-mode=alt_alt])>.frequencygraph,:host([data-mode=alt_ref])>.frequencygraph,:host([data-mode=count])>.frequencygraph,:host([data-mode=hemi_alt])>.frequencygraph{visibility:hidden}:host([data-filtered=false])>.filtered{visibility:hidden}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}.number-input{display:flex;margin-bottom:30px;font-size:10px;align-items:center;gap:5px}.number-input input[type=number]{width:5em;margin-right:3px;font-size:inherit;display:inline-block;text-align:right;line-height:18px;padding:0 0 0 8px;border-radius:9px;border:solid 1px #94928d;box-shadow:0 1px 1px rgba(0,0,0,.2) inset;outline:0}.number-input button.inequality-sign{appearance:none;font-weight:700;background-color:#117f93;color:#fff;height:16px;width:16px;padding:0;border-radius:3px;border:none;cursor:pointer}.slider{max-width:247.5px;height:5px;position:relative;left:1px;background:#ddd}.slider .bar{height:inherit;position:absolute;left:0;right:0}.slider .ruler .scale{list-style:none;position:absolute;top:-18px;font-size:.6rem;z-index:10;line-height:1}.slider .ruler .scale::before{content:\"\";position:absolute;top:13px;height:14px;border-left:dotted 1px rgba(0,0,0,.3);left:.5em;display:block}.slider .threshold{display:flex}.slider .threshold .threshold-line{position:absolute;width:1px;background-color:rgba(0,0,0,.5)}.slider .threshold .threshold-button{position:absolute;font-size:.6rem;z-index:10;cursor:pointer;border:.5px solid #444;border-radius:8px;margin-left:5px;padding:3px}.slider .threshold .threshold-button:hover{background-color:#444;color:#fff}.slider .threshold .threshold-button:active{opacity:.7}.range-input{position:relative}.range-input input[type=range]{position:absolute;top:-5px;width:100%;max-width:250px;height:5px;background:0 0;pointer-events:none;-webkit-appearance:none;-moz-appearance:none}.range-input input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:1em;width:3px;border-top:solid 1px rgba(0,0,0,.5);border-bottom:solid 1px rgba(0,0,0,.5);pointer-events:auto;margin-top:-.2em;cursor:col-resize}.range-input .from[type=range]::-webkit-slider-thumb{transform:translateX(-3px);border-right:solid 1px rgba(0,0,0,.5)}.range-input .to[type=range]::-webkit-slider-thumb{transform:translateX(-1px);border-left:solid 1px rgba(0,0,0,.5)}.range-input input[type=range]::-moz-range-thumb{-moz-appearance:none;height:1em;width:3px;pointer-events:auto;margin-top:-.2em;cursor:col-resize}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}:host{position:absolute;top:0;left:142px;display:flex;align-items:center;white-space:nowrap}:host>.pathogenicity-graph{position:relative;width:100px;height:3.5px;background-color:var(--color-darker-gray);margin-right:5px}:host>.pathogenicity-graph>.ruler{list-style:none}:host>.pathogenicity-graph>.ruler>.scale{position:absolute;top:-1px;bottom:-1px;border-left:dotted .5px var(--color-separator)}@media(-webkit-min-device-pixel-ratio:2){:host>.pathogenicity-graph>.ruler>.scale{border-left:dotted 1px var(--color-separator)}}:host>.pathogenicity-graph>.bar{position:absolute;height:100%;background-color:var(--color-gray)}:host>.range{display:flex;gap:5px;align-items:center}:host>.range .text{font-size:10px}:host>.range>.from,:host>.range>.to{font-weight:700}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}.title{color:#117f93;font-size:12px;font-weight:400;line-height:16px;margin:4px 0 0;padding:5px 18px 0}.title:first-letter{text-transform:capitalize}.list{margin:10px 0;padding-left:0;list-style:none;overflow-y:scroll;max-height:300px}.list>.item{cursor:pointer;padding:0 18px;height:24px;line-height:24px;transition:background-color .2s}.list>.item>em{background-color:var(--color-suggest);font-style:normal}.list>.item:first-child{padding-top:4px}.list>.item:hover{background-color:rgba(255,221,0,.2)}.list>.item.-disabled{cursor:auto}.list>.item.-disabled:hover{background-color:inherit}.list>.item>.sub{padding-left:.5em;color:rgba(68,68,68,.5);font-size:12px}.list>.item.-selected{background-color:#fd0}.list>.item.-empty{padding:.5rem;text-align:center;color:rgba(68,68,68,.5)}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}:host{position:relative;display:block}.suggestions-container{position:absolute;top:100%;left:14px;display:flex;z-index:10200;color:#444;font-size:14px;box-shadow:0 2px 6px rgba(0,0,0,.2);background-color:#fff;max-width:50%;min-width:fit-content}.suggestions-container>.column+.column{border-left:solid 1px rgba(0,0,0,.2)}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}.fieldcontainer{box-sizing:border-box}.fieldcontainer>.field{position:relative;margin-bottom:4px;height:30px}.fieldcontainer>.field>.input-form>.searchfield[type=text]{font-family:\"Roboto Condensed\",sans-serif;box-sizing:border-box;width:100%;line-height:30px;border:solid 1px #0f6272;border-radius:15px;padding:0 12px;vertical-align:center;font-size:12px;outline:0;opacity:.9;box-shadow:0 1px 1px rgba(0,0,0,.2) inset}.fieldcontainer>.field>.input-form>.searchfield[type=text]:focus{opacity:1}.fieldcontainer>.field>.input-form>.delete{position:absolute;top:6px;right:23px;color:var(--color-gray);border:none;background-color:rgba(0,0,0,0);cursor:pointer}.fieldcontainer>.field>.input-form>.delete:after{font-family:fontello;content:var(--char-delete);position:absolute;font-size:1.2rem}.fieldcontainer>.field>.input-form .searchfield:not(:valid)~.delete{display:none}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}button{display:block;width:30px;height:30px;border:solid 1px #117f93;border-radius:100%;margin-right:-4px;position:relative;background-color:#fff;box-shadow:0 1px 1px rgba(0,0,0,.2);cursor:pointer}button:after,button:before{content:\"\";display:block;position:absolute;box-sizing:border-box}button:before{width:12px;height:12px;border:solid 2px #117f93;border-radius:6px;top:6px;left:6px}button:after{height:5px;border-left:solid 2px #117f93;transform:rotate(-45deg);top:16px;left:17px}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}:host{display:flex;gap:.2em;flex-wrap:wrap;align-items:center;height:fit-content;margin-top:.2rem}dl{font-size:12px;line-height:16px;margin-bottom:0;padding:0 .5em;display:inline-block;margin-block-start:0;border-radius:8px;cursor:pointer;transition:background-color .2s,box-shadow .2s}dl>dd,dl>dt{display:inline-block;margin-bottom:0;color:#fff;transition:color .2s}dl>dt{font-weight:400;opacity:.6}dl>dt:after{content:\":\"}dl>dd{margin-inline-start:.2em}dl:hover{background-color:#0f6272}`;\n    ","import {css} from 'lit'; export default css`.simple-search-container{display:flex;gap:.2rem;align-items:center}.simple-search-container>search-field-with-suggestions{flex:1}`;\n    ","import {css} from 'lit'; export default css`:root{--color-key:#62d5d9;--color-key-dark1:#117f93;--color-key-dark2:#0f6272;--color-key-dark3:#125263;--color-black:#444;--color-gray:#94928d;--color-pale-gray:hsl(42.8571428571, 3.1674208145%, 101.6666666667%);--color-light-gray:rgb(234.4230769231, 234.0384615385, 233.0769230769);--color-darker-gray:#dbdbdb;--color-selected:#ffdd00;--color-selected-hover:rgba(255, 221, 0, 0.2);--color-selected-light:#fdfae5;--color-singleton:rgb(255, 244.8, 178.5);--color-homozygote:#ff5a54;--color-suggest:#ffff50;--color-disable:#999999;--color-disable-deep:#808080;--color-separator:rgba(0, 0, 0, 0.3);--color-separator-sub:rgba(0, 0, 0, 0.2);--color-mutation-ref:#249eb3;--color-mutation-alt:#ff6682;--color-dataset-gemj:#dc2828;--color-dataset-gemj-light:rgb(252.13, 237.37, 237.37);--color-dataset-jga:#62d5d9;--color-dataset-jga-light:rgb(241.7153846154, 251.4461538462, 251.7846153846);--color-dataset-tommo:#ca678d;--color-dataset-tommo-light:hsl(336.9696969697, 48.2926829268%, 109.8039215686%);--color-dataset-hgvd:#005b80;--color-dataset-hgvd-light:rgb(230, 247.7734375, 255);--color-dataset-ncbn:#234b7c;--color-dataset-ncbn-light:hsl(213.0337078652, 55.9748427673%, 101.1764705882%);--color-dataset-bbj:#ff993f;--color-dataset-bbj-light:rgb(255, 247.828125, 241.5);--color-dataset-foreign:#94928d;--color-dataset-foreign-light:rgb(246.7692307692, 246.6153846154, 246.2307692308);--color-sign-safe:#04af58;--color-sign-safe-light:rgb(230.5586592179, 254.4413407821, 242.2905027933);--color-sign-normal:#9dcf3a;--color-sign-normal-light:rgb(242.68, 248.9657142857, 230.2342857143);--color-sign-warning:#ffae00;--color-sign-warning-light:rgb(255, 246.9, 229.5);--color-sign-lowdangerous:#ff953c;--color-sign-lowdangerous-light:rgb(255, 226.6246153846, 202.8);--color-sign-dangerous:#ff5a54;--color-sign-dangerous-light:rgb(255, 237.6315789474, 237);--color-sign-modifier:#c654ff;--color-sign-modifier-light:#f9edff;--color-sign-other:#9c8200;--color-sign-other-light:#fff7cf;--color-sign-unknown:#bbba7e;--color-sign-unknown-light:rgb(248.614213198, 248.5203045685, 242.885786802);--height-inline:18px;--height-advanced-search-condition-values-container:24px;--height-advanced-search-condition-value:18px;--z-index-base:10000;--z-index-layout-aside:calc(var(--z-index-base) + 100);--z-index-row-indicator:calc(var(--z-index-base) + 100);--z-index-advanced-search-menu:calc(var(--z-index-base) + 100);--z-index-detail-header:calc(var(--z-index-base) + 100);--z-index-module-tabs-view:calc(var(--z-index-base) + 200);--z-index-global-header:calc(var(--z-index-base) + 200);--z-index-suggest-view:calc(var(--z-index-base) + 200);--z-index-drawer:calc(var(--z-index-base) + 300);--z-index-configuration:calc(var(--z-index-base) + 400);--z-index-editing-condition:calc(var(--z-index-base) + 400);--z-index-activity-indicator:calc(var(--z-index-base) + 500);--char-TIMES:\"\";--char-INFO_CIRCLE:\"\";--char-ARROW_RIGHT:\"\";--char-ARROW_DOWN:\"\";--char-CARET-UP:\"\";--char-CARET-DOWN:\"\";--char-EXCRAMATION_TRIANGLE:\"\";--char-EXTERNAL_LINK:\"\";--char-ARROW_CIRCLE_RIGHT:\"\";--char-WRENCH:\"\";--char-CHECK:\"\";--char-dataset:\"\";--char-logical-op-and:\"\";--char-logical-op-or:\"\";--char-logical-op-outline:\"\";--char-edit:\"\";--char-delete:\"\";--char-group:\"\";--char-ungroup:\"\";--char-copy:\"\"}:host ul[role=tablist]{font-size:12px;font-weight:700;list-style:none;margin:0;padding:0;padding-left:10px;display:flex;gap:.1rem;background:#e2e2e2}:host ul[role=tablist] li{list-style:none}:host ul[role=tablist] li a{padding:3px 8px;display:block;text-decoration:none;color:#444;border-radius:7px 7px 0 0;margin-top:5px;outline:0}:host ul[role=tablist] li a[aria-selected=true]{background-color:#fff}:host .tab-panel{padding:10px}`;\n    ","import { storeManager } from '../store/StoreManager';\nimport * as qs from 'qs';\nimport * as _ from 'lodash';\nimport { API_URL } from '../global';\nconst LIMIT = 100;\nimport { extractSearchCondition } from '../store/searchManager';\nimport type { FetchOption, SearchResults, SearchStatistics } from '../types';\n\nlet currentAbortController: AbortController | null = null;\nlet _currentSearchMode: 'simple' | 'advanced' | null = null;\nconst lastRequestRanges = new Set(); // \n\n/**  &  */\nexport const executeSearch = (() => {\n  let isRequestInProgress = false;\n\n  return _.debounce((offset = 0, isFirstTime = false) => {\n    // \n    if (isRequestInProgress && !isFirstTime) {\n      return;\n    }\n\n    const newSearchMode = storeManager.getData('searchMode');\n\n    // \n    if (currentAbortController) {\n      currentAbortController.abort();\n    }\n\n    if (_currentSearchMode && _currentSearchMode !== newSearchMode) {\n      // mode\n      _currentSearchMode = newSearchMode;\n      isFirstTime = true; // \n      lastRequestRanges.clear(); // \n    } else {\n      // \n      const offsetStart = offset - (offset % LIMIT);\n      const rangeKey = `${offsetStart}-${offsetStart + LIMIT}`;\n\n      if (storeManager.getData('searchMode') === 'simple') {\n        // \n        if (!lastRequestRanges.has(rangeKey)) {\n          lastRequestRanges.add(rangeKey);\n        } else {\n          return; // \n        }\n      }\n    }\n\n    // \n    _currentSearchMode = newSearchMode;\n\n    //  AbortController \n    currentAbortController = new AbortController();\n    const signal = currentAbortController.signal;\n\n    // \n    if (isFirstTime) {\n      _resetSearchResults();\n      lastRequestRanges.clear(); // \n    }\n\n    // \n    storeManager.setData('isFetching', true);\n    isRequestInProgress = true;\n\n    // API \n    const apiEndpoints = _determineSearchEndpoints(offset, isFirstTime);\n\n    // API \n    const requestOptions = _getRequestOptions(signal);\n\n    // \n    if (apiEndpoints && apiEndpoints.length > 0) {\n      Promise.all(\n        apiEndpoints.map((endpoint) => _fetchData(endpoint, requestOptions))\n      )\n        .then(() => {\n          // \n          storeManager.setData('isFetching', false);\n          isRequestInProgress = false;\n          _updateAppState();\n        })\n        .catch((error) => {\n          // AbortError\n          if (error instanceof Error && error.name === 'AbortError') return;\n          storeManager.setData('isFetching', false);\n          isRequestInProgress = false;\n          storeManager.setData('searchMessages', { error });\n        });\n    } else {\n      storeManager.setData('isFetching', false);\n      isRequestInProgress = false;\n    }\n  }, 300);\n})();\n\n/**  */\nfunction _resetSearchResults() {\n  storeManager.setData('numberOfRecords', 0);\n  storeManager.setData('offset', 0);\n  storeManager.setData('rowCount', 0);\n  storeManager.setData('isFetching', false);\n  storeManager.setData('searchResults', []);\n  lastRequestRanges.clear(); // \n}\n\n/**  API  */\nfunction _determineSearchEndpoints(\n  offset: number,\n  isFirstTime: boolean\n): string[] {\n  let basePath: string;\n  let conditions = '';\n\n  switch (storeManager.getData('searchMode')) {\n    case 'simple': {\n      // Simple searchLIMIT\n      const offsetStart = offset - (offset % LIMIT);\n      conditions = qs.stringify(\n        extractSearchCondition(storeManager.getData('simpleSearchConditions'))\n      );\n      basePath = `${API_URL}/search?offset=${offsetStart}${\n        conditions ? '&' + conditions : ''\n      }`;\n\n      return isFirstTime\n        ? [`${basePath}&stat=0&data=1`, `${basePath}&stat=1&data=0`]\n        : [`${basePath}&stat=0&data=1`];\n    }\n\n    case 'advanced': {\n      // Advanced searchoffset\n      basePath = `${API_URL}/api/search/variant`;\n\n      return isFirstTime\n        ? [`${basePath}?stat=0&data=1`, `${basePath}?stat=1&data=0`]\n        : [`${basePath}?stat=0&data=1`];\n    }\n\n    default:\n      return [];\n  }\n}\n\n/** API  */\nfunction _getRequestOptions(signal: AbortSignal): FetchOption {\n  if (storeManager.getData('searchMode') === 'simple') {\n    // Simple search \n    return {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      mode: 'cors',\n      signal: signal,\n    };\n  }\n\n  // Advanced search \n  const body: Partial<{ offset: number; query: Record<string, unknown> }> = {\n    offset: _calculateOffset(storeManager.getData('offset'), LIMIT),\n  };\n\n  if (\n    storeManager.getData('advancedSearchConditions') &&\n    Object.keys(storeManager.getData('advancedSearchConditions')).length > 0\n  ) {\n    body.query = storeManager.getData('advancedSearchConditions');\n  }\n\n  return {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n    mode: 'cors',\n    signal: signal,\n    body: JSON.stringify(body),\n  };\n}\n\nfunction _calculateOffset(offset: number, limit: number): number {\n  const roundedOffset =\n    Math.round(offset / (limit / 2)) * (limit / 2) - limit / 4;\n  return Math.max(0, roundedOffset);\n}\n\n/**  */\nasync function _fetchData(endpoint: string, options: FetchOption) {\n  try {\n    const response = await fetch(endpoint, options);\n    if (!response.ok) {\n      throw new Error(_getErrorMessage(response.status));\n    }\n    const jsonResponse = await response.json();\n    const url = new URL(endpoint);\n    const queryParams = Object.fromEntries(url.searchParams.entries());\n\n    // \n    if (_currentSearchMode === storeManager.getData('searchMode')) {\n      if (queryParams.data === '1') {\n        _processSearchResults(jsonResponse);\n      }\n      if (queryParams.stat === '1') {\n        _processStatistics(jsonResponse);\n      }\n    }\n\n    if (jsonResponse.notice || jsonResponse.warning || jsonResponse.error) {\n      storeManager.setData('searchMessages', {\n        notice: jsonResponse.notice?.join?.('<br>'),\n        warning: jsonResponse.warning?.join?.('<br>'),\n        error: jsonResponse.error?.join?.('<br>'),\n      });\n    } else {\n      storeManager.setData('searchMessages', '');\n    }\n  } catch (error) {\n    console.error(error);\n    if (error instanceof Error && error.name === 'AbortError') {\n      // AbortError\n      const abortError = new Error('ABORTED');\n      abortError.name = 'AbortError';\n      throw abortError;\n    }\n    throw error;\n  }\n}\n\n/** HTTP  */\nfunction _getErrorMessage(statusCode: number): string {\n  const errorTypes: Record<number, string> = {\n    400: 'INVALID_REQUEST',\n    401: 'UNAUTHORIZED',\n    404: 'NOT_FOUND',\n    500: 'INTERNAL_SERVER_ERROR',\n    502: 'BAD_GATEWAY',\n  };\n  return errorTypes[statusCode] || 'UNKNOWN_ERROR';\n}\n\n/**  */\nfunction _processSearchResults(json: SearchResults) {\n  const rows = Array.isArray(json?.data) ? json.data : [];\n  const offset =\n    typeof json?.scroll?.offset === 'number' ? json.scroll.offset : 0;\n\n  if (!Array.isArray(json?.data)) {\n    console.error('[search] Unexpected result shape (no data array):', json);\n  }\n\n  storeManager.setResults(rows, offset);\n}\n\n/**  */\nfunction _processStatistics(json: SearchStatistics) {\n  // status\n  storeManager.setData('searchStatus', {\n    available: Math.min(json.statistics.filtered, json.scroll.max_rows),\n    filtered: json.statistics.filtered,\n    total: json.statistics.total,\n  });\n  storeManager.setData(\n    'numberOfRecords',\n    storeManager.getData('searchStatus').available\n  );\n\n  // statistics\n  storeManager.setData('statisticsDataset', json.statistics.dataset); // dataset\n  storeManager.setData('statisticsSignificance', json.statistics.significance); // significance\n  storeManager.setData('statisticsType', json.statistics.type); // total_variant_type\n  storeManager.setData('statisticsConsequence', json.statistics.consequence); // consequence\n}\n\n/**  */\nasync function _updateAppState() {\n  // for Download button\n  storeManager.getData('searchMode');\n  switch (storeManager.getData('searchMode')) {\n    case 'simple':\n      if (storeManager.getData('simpleSearchConditions').term) {\n        document.body.setAttribute('data-has-conditions', 'true');\n      }\n      break;\n    case 'advanced': {\n      const advancedConditions = storeManager.getData(\n        'advancedSearchConditions'\n      );\n      document.body.toggleAttribute(\n        'data-has-conditions',\n        advancedConditions && Object.keys(advancedConditions).length > 0\n      );\n      break;\n    }\n  }\n\n  // offset\n  storeManager.publish('offset');\n\n  // \n  storeManager.publish('searchResults');\n\n  // \n  storeManager.setData('appStatus', 'normal');\n}\n","import { setAdvancedSearchCondition } from '../store/searchManager';\nimport { ConditionGroupView } from './Condition/ConditionGroupView';\nimport { type ConditionView, isGroupView } from './Condition/ConditionView';\nimport { AdvancedSearchToolbar } from './AdvancedSearchToolbar';\nimport { AdvancedSearchSelection } from './AdvancedSearchSelection';\nimport { CONDITION_NODE_KIND, type ConditionTypeValue } from '../definition';\nimport { selectRequired } from '../utils/dom/select';\n\ntype Selection = ReadonlyArray<ConditionView>;\n\ntype SelectionCapabilities = Readonly<{\n  canDelete: boolean;\n  canGroup: boolean;\n  canUngroup: boolean;\n  canCopy: boolean;\n}>;\n\n/**\n * AdvancedSearchBuilderView\n * - Owns the root group and toolbar\n * - Mediates selection  capability flags  toolbar state\n * - Builds and submits the query on changes\n */\nexport class AdvancedSearchBuilderView {\n  private _advancedSearchBuilderEl: HTMLElement;\n  private _container: HTMLElement;\n  private _rootGroup: ConditionGroupView;\n  private _toolbar: AdvancedSearchToolbar;\n  private _selection: AdvancedSearchSelection;\n\n  constructor(advancedSearchBuilderEl: HTMLElement) {\n    this._advancedSearchBuilderEl = advancedSearchBuilderEl;\n\n    // Container that holds all condition/group views\n    this._container = selectRequired(\n      advancedSearchBuilderEl,\n      ':scope > .inner'\n    );\n\n    // Root (AND) group\n    this._rootGroup = new ConditionGroupView(\n      this,\n      this._container,\n      'and',\n      [],\n      null,\n      true\n    );\n\n    // Toolbar & selection manager\n    this._toolbar = new AdvancedSearchToolbar(\n      this,\n      this._rootGroup.makeToolbar()\n    );\n    this._selection = new AdvancedSearchSelection(this);\n  }\n\n  // \n  // Selection  capability flags\n  // \n\n  /** Back-compat: legacy callers still call selectedConditionViews(...) */\n  selectedConditionViews(selection: ConditionView[]): void {\n    this.onSelectionChange(selection);\n  }\n\n  /** Primary entry from selection manager. */\n  onSelectionChange(selection: ConditionView[]): void {\n    const caps = this._computeSelectionCapabilities(selection);\n    this._applyCapabilitiesToDataset(caps);\n  }\n\n  /** Compute capability flags from current selection. */\n  private _computeSelectionCapabilities(\n    selection: Selection\n  ): SelectionCapabilities {\n    const n = selection.length;\n    if (n === 0) {\n      return {\n        canDelete: false,\n        canGroup: false,\n        canUngroup: false,\n        canCopy: false,\n      };\n    }\n\n    const parents = new Set(\n      selection.map((v) => v.parentGroup).filter(Boolean)\n    );\n    const single = n === 1;\n    const first = selection[0];\n\n    // canUngroup: a single selected group (or item that declares canUngroup)\n    const canUngroup =\n      single &&\n      (first.canUngroup === true ||\n        first.conditionNodeKind === CONDITION_NODE_KIND.group);\n\n    // canGroup: 2+ items, same parent, and not all siblings selected\n    const canGroup =\n      n > 1 &&\n      parents.size === 1 &&\n      (() => {\n        const parent = parents.values().next().value!;\n        const total = parent.childViews.length;\n        return n < total;\n      })();\n\n    // canDelete: any selection\n    const canDelete = true;\n\n    const canCopy =\n      single &&\n      (first.canCopy === true ||\n        first.conditionNodeKind === CONDITION_NODE_KIND.condition);\n\n    return { canDelete, canGroup, canUngroup, canCopy };\n  }\n\n  private _setFlag(\n    name: 'canDelete' | 'canGroup' | 'canUngroup' | 'canCopy',\n    v: boolean\n  ) {\n    this._advancedSearchBuilderEl.dataset[name] = String(v);\n  }\n\n  /** Reflect capability flags as data-* attributes for CSS/toolbar state. */\n  private _applyCapabilitiesToDataset(caps: SelectionCapabilities): void {\n    this._setFlag('canDelete', caps.canDelete);\n    this._setFlag('canGroup', caps.canGroup);\n    this._setFlag('canUngroup', caps.canUngroup);\n    this._setFlag('canCopy', caps.canCopy);\n  }\n\n  // \n  // Public actions\n  // \n\n  /** Notify that the condition set changed  re-run search. */\n  changeCondition(): void {\n    this._submitAdvancedSearchCondition();\n  }\n\n  /** Group selected views into a new subgroup under their common parent. */\n  group(): void {\n    const selected = this._selection.getSelectedConditionViews();\n    if (selected.length === 0)\n      throw new Error('No condition views selected to group.');\n\n    const parents = new Set(selected.map((v) => v.parentGroup).filter(Boolean));\n    if (parents.size !== 1) return; // \n    const parent = parents.values().next().value!;\n\n    // Compute insertion position = the minimum index among selected\n    const siblings = parent.childViews;\n    let insertionEl: HTMLElement | null = null;\n    let minIndex = Infinity;\n    for (const v of selected) {\n      const idx = siblings.indexOf(v);\n      if (idx >= 0 && idx < minIndex) {\n        minIndex = idx;\n        insertionEl = v.rootEl;\n      }\n    }\n\n    const newGroup = parent.addNewConditionGroup(selected, insertionEl);\n    this._selection.selectConditionView(newGroup, true);\n    this.changeCondition();\n  }\n\n  /** Ungroup the (single) selected group. No-op if selection is empty or not a group. */\n  ungroup(): void {\n    const selected = this._selection.getSelectedConditionViews();\n    if (selected.length === 0) return;\n\n    // Deselect current selection before modification\n    selected.forEach((v) => this._selection.deselectConditionView(v));\n\n    const first = selected[0];\n    if (isGroupView(first)) {\n      first.ungroup();\n      this.changeCondition();\n    }\n  }\n\n  // copyedit\n  // copy() {\n  //   console.log('_copy')\n  //   const selectingConditionViews = this._selection.getSelectingConditionViews();\n  //   this.changeCondition();\n  // }\n\n  // edit() {\n  //   console.log('_edit')\n  //   this.changeCondition();\n  // }\n\n  /** Delete selected (or provided) views. */\n  deleteCondition(views?: ConditionView[]): void {\n    const list = views ?? this._selection.getSelectedConditionViews();\n    if (list.length === 0) return;\n\n    for (const v of list) {\n      v.remove();\n      this._selection.deselectConditionView(v);\n    }\n    this.changeCondition();\n  }\n\n  /** Rebuild query from the root group and submit to the store. */\n  private _submitAdvancedSearchCondition(): void {\n    const query = this._rootGroup.queryFragment;\n    setAdvancedSearchCondition(query);\n  }\n\n  /**\n   * Add a condition under the selected group (or root if none selected).\n   * If a single condition is selected, we could insert \"after\" it; currently we\n   * append to its parent group (kept as-is to avoid interface drift).\n   * @param options - Optional initial values (e.g., from karyotype selection: {chr, start, end})\n   */\n  addCondition(conditionType: ConditionTypeValue, options?: unknown): void {\n    const selected = this._selection.getSelectedConditionViews();\n    const target = selected.length > 0 ? selected[0] : this._rootGroup;\n\n    this._selection.deselectAllConditions();\n\n    if (target.conditionNodeKind === CONDITION_NODE_KIND.condition) {\n      target.parentGroup?.addNewConditionItem(\n        conditionType,\n        target.rootEl.nextSibling,\n        options\n      );\n    } else if (\n      target.conditionNodeKind === CONDITION_NODE_KIND.group &&\n      isGroupView(target)\n    ) {\n      target.addNewConditionItem(conditionType, null, options);\n    }\n  }\n\n  // \n  // _defineEvents() {\n  //   let downX, downY;\n  //   this._elm.addEventListener('mousedown', (e) => {\n  //     [downX, downY] = [e.x, e.y];\n  //   });\n  //   this._elm.addEventListener('click', (e) => {\n  //     if (Math.abs(downX - e.x) > 2 || Math.abs(downY - e.y) > 2) return;\n  //     e.stopImmediatePropagation();\n  //     this._selection.deselectAllConditions();\n  //   });\n  // }\n\n  // Rewroted _defineEvents(), but it doesn't work, so it needs fixing.\n  // /** Call once after construction */\n  // private _defineEvents(): void {\n  //   this._bindBackgroundDeselect();\n  // }\n\n  // /**\n  //  * Binds \"background click\" to clear the current selection.\n  //  * - Clears only on a *true click* (movement within tolerance).\n  //  * - Ignores clicks on interactive controls and on condition views.\n  //  * - Left mouse button only.\n  //  */\n  // private _bindBackgroundDeselect(): void {\n  //   const root = this._advancedSearchBuilderEl;\n  //   const CLICK_TOLERANCE = 3; // px\n  //   let downX = 0,\n  //     downY = 0,\n  //     isPointerDown = false;\n\n  //   const isInteractive = (el: Element | null): boolean => {\n  //     return !!(\n  //       el &&\n  //       el.closest(\n  //         'a,button,input,select,textarea,[contenteditable=\"true\"],.command'\n  //       )\n  //     );\n  //   };\n\n  //   const isConditionNode = (el: Element | null): boolean => {\n  //     // : \n  //     return !!(\n  //       el &&\n  //       el.closest(\n  //         '.advanced-search-condition-group-view, .advanced-search-condition-item-view'\n  //       )\n  //     );\n  //   };\n\n  //   root.addEventListener('pointerdown', (e) => {\n  //     const pe = e as PointerEvent;\n  //     if (pe.button !== 0) return; // left only\n  //     isPointerDown = true;\n  //     downX = pe.clientX;\n  //     downY = pe.clientY;\n  //   });\n\n  //   root.addEventListener('pointerup', (e) => {\n  //     if (!isPointerDown) return;\n  //     isPointerDown = false;\n\n  //     const pe = e as PointerEvent;\n  //     // Ignore drag-like movement\n  //     const moved = Math.hypot(pe.clientX - downX, pe.clientY - downY);\n  //     if (moved > CLICK_TOLERANCE) return;\n\n  //     const target = e.target as Element | null;\n\n  //     // Do not clear when clicking controls or condition nodes\n  //     if (isInteractive(target) || isConditionNode(target)) return;\n\n  //     // Clear only for genuine background clicks inside root\n  //     if (target && root.contains(target)) {\n  //       e.stopPropagation(); // usually enough; prefer not to use stopImmediatePropagation()\n  //       this._selection.deselectAllConditions();\n  //     }\n  //   });\n  // }\n\n  // \n  // Accessors\n  // \n\n  get container(): HTMLElement {\n    return this._container;\n  }\n  get selection(): AdvancedSearchSelection {\n    return this._selection;\n  }\n\n  destroy(options?: { clearDom?: boolean }): void {\n    // AbortController \n    this._toolbar?.destroy({ clearDom: options?.clearDom });\n    //  View  remove/Observer\n    this._rootGroup?.remove();\n    //  GC \n    // this._toolbar =\n    //   this._rootGroup =\n    //   this._selection =\n    //   this._container =\n    //   this._advancedSearchBuilderEl =\n    //     null;\n  }\n}\n","import { selectRequired } from '../utils/dom/select';\nimport type { AdvancedSearchBuilderView } from './AdvancedSearchBuilderView';\nimport { type ConditionView, viewByEl } from './Condition/ConditionView';\n\n/** CSS selector for selected views (group or item share this base class). */\nconst SELECTED_SEL =\n  '.advanced-search-condition-view[aria-selected=\"true\"]' as const;\n\n/** ARIA attribute used to indicate selection state. */\nconst ARIA_SELECTED = 'aria-selected';\n\nconst ROOT_CONTAINER_SEL =\n  ':scope > .advanced-search-condition-group-view.-root > .container' as const;\n\n/**\n * Manages multi-selection for Advanced Search.\n *\n * Source of truth is the DOM:\n * - Selected elements are marked with `aria-selected=\"true\"`.\n * - We resolve DOM  View via the global `viewByEl` map (no custom HTMLElement fields).\n *\n * Results are returned in **document order**.\n * This class only manages state & notifications; visuals are handled by CSS.\n */\nexport class AdvancedSearchSelection {\n  private readonly _builder: AdvancedSearchBuilderView; // Owning view that reacts to selection changes.\n  private readonly _rootContainer: HTMLElement;\n\n  constructor(builder: AdvancedSearchBuilderView) {\n    this._builder = builder;\n    this._rootContainer = selectRequired(\n      this._builder.container,\n      ROOT_CONTAINER_SEL\n    );\n  }\n\n  /** Return selected ConditionView instances in document order. */\n  getSelectedConditionViews(): ConditionView[] {\n    const els = Array.from(this._selectedNodeList());\n    els.sort((a, b) => {\n      const pos = a.compareDocumentPosition(b);\n      if (pos & Node.DOCUMENT_POSITION_PRECEDING) return 1;\n      if (pos & Node.DOCUMENT_POSITION_FOLLOWING) return -1;\n      return 0;\n    });\n    return els\n      .map((el) => viewByEl.get(el))\n      .filter((v): v is ConditionView => !!v);\n  }\n\n  /**\n   * Select a view. Optionally clear previous selection.\n   * To preserve legacy behavior, we only keep selections under the **same parent container**.\n   */\n  selectConditionView(\n    view: ConditionView,\n    deselectSelecting: boolean = true\n  ): void {\n    if (deselectSelecting) this.deselectAllConditions();\n\n    // Keep only sibling selections (same parent element).\n    const parentEl = view.rootEl.parentElement;\n    const existing = this.getSelectedConditionViews();\n    for (const v of existing) {\n      if (v.rootEl.parentElement !== parentEl) this._unmarkSelected(v);\n    }\n\n    this._markSelected(view);\n    this._notifyBuilder();\n  }\n\n  /** Deselect a single view. */\n  deselectConditionView(view: ConditionView): void {\n    this._unmarkSelected(view);\n    this._notifyBuilder();\n  }\n\n  /** Deselect all selected views within the boundary. */\n  deselectAllConditions(): void {\n    const nodes = this._selectedNodeList();\n    nodes.forEach((el) => {\n      const view = viewByEl.get(el as HTMLElement);\n      if (view) this._unmarkSelected(view);\n    });\n    this._notifyBuilder();\n  }\n\n  // \n  // Internals\n  // \n\n  /** Query selected elements under the boundary. */\n  private _selectedNodeList(): NodeListOf<HTMLElement> {\n    return this._rootContainer.querySelectorAll(SELECTED_SEL);\n  }\n\n  /** Apply selected state to DOM + delegate. */\n  private _markSelected(view: ConditionView): void {\n    view.select();\n    view.rootEl.setAttribute(ARIA_SELECTED, 'true');\n  }\n\n  /** Remove selected state from DOM + delegate. */\n  private _unmarkSelected(view: ConditionView): void {\n    view.deselect();\n    view.rootEl.removeAttribute(ARIA_SELECTED);\n  }\n\n  /** Notify the builder that the selection has changed. */\n  private _notifyBuilder(): void {\n    this._builder.onSelectionChange(this.getSelectedConditionViews());\n  }\n}\n","import { ADVANCED_CONDITIONS } from '../global';\nimport { createEl } from '../utils/dom/createEl';\nimport type { AdvancedSearchBuilderView } from './AdvancedSearchBuilderView';\nimport type { ConditionTypeValue } from '../definition';\nimport type { Command, CommandDef } from '../types';\n\nconst COMMANDS: ReadonlyArray<CommandDef> = [\n  { command: 'group', label: 'Group', shortcut: [71] }, // G\n  { command: 'ungroup', label: 'Ungroup', shortcut: [16, 71] }, // Shift + G\n  { command: 'delete', label: 'Delete', shortcut: [46] }, // Del\n  // TODO: These are currently unused, but may be implemented in the future.\n  // { command: 'copy', label: 'Copy', shortcut: [67] },\n  // { command: 'edit', label: 'Edit', shortcut: [69] },\n];\n\n/** Formats a shortcut label from key codes. */\nfunction formatShortcut(codes: number[]): string {\n  // Minimal mapping; extend as needed.\n  const map: Record<number, string> = { 16: 'Shift', 46: 'Del' };\n  const parts = codes.map((c) => map[c] ?? String.fromCharCode(c));\n  return parts.join('+');\n}\n\n/**\n * Represents the toolbar for advanced search functionality.\n * This class initializes the toolbar UI, handles user interactions,\n * and delegates commands to the AdvancedSearchBuilderView.\n */\nexport class AdvancedSearchToolbar {\n  private _builder: AdvancedSearchBuilderView;\n  private _toolbar: HTMLElement;\n  private _usesSignal = false; // set true only if addEventListener with {signal} succeeded\n  private _disposed = false; // guard against multiple destroy() calls\n\n  /** One controller to remove all listeners on destroy. */\n  private readonly _events = new AbortController();\n\n  constructor(builder: AdvancedSearchBuilderView, toolbar: HTMLElement) {\n    this._builder = builder;\n    this._toolbar = toolbar;\n\n    this._initializeToolbar();\n    this._attachEventDelegation();\n  }\n\n  // =========================================================\n  // DOM Creation\n  // =========================================================\n\n  /** Build the toolbar DOM once. */\n  private _initializeToolbar(): void {\n    const root = this._toolbar;\n    root.classList.add('advanced-search-toolbar');\n\n    // Build \"Add condition\" items\n    const addItems = Object.keys(ADVANCED_CONDITIONS).map((key, index) => {\n      const condition =\n        ADVANCED_CONDITIONS[key as keyof typeof ADVANCED_CONDITIONS];\n      const label: string =\n        (condition && typeof condition === 'object' && 'label' in condition\n          ? String(condition.label)\n          : key) ?? key;\n\n      return createEl('li', {\n        class: 'command',\n        attrs: { tabindex: '0', role: 'button' },\n        dataset: {\n          command: 'add-condition',\n          condition: key,\n          shortcut: String(index + 1),\n        },\n        children: [\n          createEl('p', { text: label }),\n          createEl('small', {\n            class: 'shortcut',\n            children: [\n              createEl('span', { class: ['char', '-command'] }),\n              String(index + 1),\n            ],\n          }),\n        ],\n      });\n    });\n\n    // Wrap the add-condition submenu\n    const liAdd = createEl('li', {\n      class: '-haschild',\n      children: [\n        createEl('p', { text: 'Add condition' }),\n        createEl('ul', { children: addItems }),\n      ],\n    });\n\n    // Build command items (group / ungroup / delete)\n    const commandLis = COMMANDS.map((cmd) =>\n      createEl('li', {\n        class: 'command',\n        attrs: { tabindex: '0', role: 'button' },\n        dataset: { command: cmd.command },\n        children: [\n          createEl('p', {\n            children: [\n              cmd.label, // text node\n              createEl('small', {\n                class: 'shortcut',\n                children: [\n                  createEl('span', { class: ['char', '-command'] }),\n                  String(formatShortcut(cmd.shortcut)),\n                ],\n              }),\n            ],\n          }),\n        ],\n      })\n    );\n\n    // Root <ul> with both sections\n    const ul = createEl('ul', { children: [liAdd, ...commandLis] });\n\n    // Hydrate toolbar\n    root.replaceChildren(ul);\n  }\n\n  // =========================================================\n  // Event Handling\n  // =========================================================\n\n  /** One delegated click handler for the whole toolbar. */\n  private _onClick = (e: Event) => {\n    // Ignore non-primary buttons (e.g., right/middle click) for MouseEvent.\n    if (e instanceof MouseEvent && e.button !== 0) return;\n\n    const target = e.target;\n    if (!(target instanceof Element)) return;\n    const cmdEl = target.closest<HTMLElement>('.command');\n    if (!cmdEl) return;\n\n    // Stop bubbling beyond the toolbar (but keep other toolbar listeners alive).\n    e.stopPropagation();\n\n    // Optional: ignore disabled items.\n    if (cmdEl.getAttribute('aria-disabled') === 'true') return;\n\n    const command = cmdEl.dataset.command as Command | undefined;\n    const condition = cmdEl.dataset.condition as ConditionTypeValue | undefined;\n    if (!command) return;\n\n    this._handleCommand(command, condition, e);\n  };\n\n  /** Keyboard activation for accessibility: Enter/Space triggers the same action. */\n  private _onKeydown = (e: KeyboardEvent) => {\n    const target = e.target;\n    if (!(target instanceof Element)) return;\n\n    // Only handle focused .command items.\n    const cmdEl = target.closest<HTMLElement>('.command');\n    if (!cmdEl) return;\n\n    // Activate on Enter or Space (Space also prevents page scroll).\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const command = cmdEl.dataset.command as Command | undefined;\n      const condition = cmdEl.dataset.condition as\n        | ConditionTypeValue\n        | undefined;\n      if (!command) return;\n\n      this._handleCommand(command, condition);\n    }\n  };\n\n  /** Event delegation: set up click + keyboard once on the toolbar. */\n  private _attachEventDelegation(): void {\n    try {\n      this._toolbar.addEventListener('click', this._onClick, {\n        signal: this._events.signal,\n      });\n      this._toolbar.addEventListener('keydown', this._onKeydown, {\n        signal: this._events.signal,\n      });\n      this._usesSignal = true;\n    } catch {\n      // Older envs without AbortController on addEventListener.\n      this._toolbar.addEventListener('click', this._onClick);\n      this._toolbar.addEventListener('keydown', this._onKeydown);\n      this._usesSignal = false;\n    }\n  }\n\n  /**\n   * Execute a command based on user interaction.\n   * @param command - Command identifier (click target).\n   * @param condition - Condition type (only for 'add-condition').\n   * @param event - Original event (may carry CustomEvent detail).\n   */\n  private _handleCommand(\n    command: Command,\n    ConditionTypeValue: ConditionTypeValue | undefined,\n    event?: Event\n  ): void {\n    switch (command) {\n      case 'add-condition': {\n        if (!ConditionTypeValue) return;\n        // Pass CustomEvent detail (e.g., from karyotype selection) if available\n        const options = event instanceof CustomEvent ? event.detail : undefined;\n        this._builder.addCondition(ConditionTypeValue, options);\n        break;\n      }\n      case 'group':\n        this._builder.group();\n        break;\n      case 'ungroup':\n        this._builder.ungroup();\n        break;\n      case 'delete':\n        this._builder.deleteCondition(\n          this._builder.selection.getSelectedConditionViews()\n        );\n        break;\n      // TODO: Future commands (copy/edit) may be added here.\n    }\n  }\n\n  // =========================================================\n  // Lifecycle\n  // =========================================================\n\n  // TODO: This feature is not currently implemented, but we intend to implement it in the future, so we will leave it uncommented.\n  /**\n   * Clean up all resources and prevent memory leaks.\n   * Call this method when the toolbar component is no longer needed.\n   */\n  destroy(options?: { clearDom?: boolean }): void {\n    if (this._disposed) return;\n\n    // Remove listeners\n    if (this._usesSignal) {\n      this._events.abort();\n    } else {\n      this._toolbar.removeEventListener('click', this._onClick);\n      this._toolbar.removeEventListener('keydown', this._onKeydown);\n    }\n\n    // Optional: clear toolbar contents if this instance owns the DOM\n    if (options?.clearDom) {\n      this._toolbar.replaceChildren();\n    }\n\n    // Drop references to help GC (no re-init assumed)\n    this._builder = null!;\n    this._toolbar = null!;\n    this._disposed = true;\n  }\n}\n","import {\n  type ConditionView,\n  BaseConditionView,\n  type GroupView,\n  viewByEl,\n} from './ConditionView';\nimport { ConditionItemView } from './ConditionItemView';\nimport type { AdvancedSearchBuilderView } from '../AdvancedSearchBuilderView';\nimport { CONDITION_NODE_KIND, type ConditionTypeValue } from '../../definition';\nimport type { ConditionQuery, LogicalOperator } from '../../types';\nimport { createEl } from '../../utils/dom/createEl';\n\n/** Selector constants to avoid repetition and typos. */\nconst CHILD_VIEW_SEL = ':scope > .advanced-search-condition-view' as const;\n\n/**\n * Manages a group of condition views (items or nested groups).\n * Handles logical-operator toggling, selection, and child lifecycle.\n */\nexport class ConditionGroupView extends BaseConditionView implements GroupView {\n  readonly conditionNodeKind = CONDITION_NODE_KIND.group;\n\n  private _isRoot: boolean; // root group cannot be selected or ungrouped\n\n  // DOM refs\n  private _logicalOperatorSwitch!: HTMLDivElement;\n  private _childContainerEl!: HTMLDivElement; // implements GroupView.container\n\n  private _mutationObserver!: MutationObserver; // Observes direct child-list\n\n  private readonly _events = new AbortController(); // For controller to clean up\n\n  /**\n   * @param builder         Owning AdvancedSearchBuilderView\n   * @param parentContainer Where this group's root element is inserted\n   * @param logicalOperator Initial logical operator (and/or)\n   * @param conditionViews  Optional initial children to move under this group\n   * @param referenceElm    Insert this group before this node (or append when null)\n   * @param isRoot          Whether this group is the top-level group\n   */\n  constructor(\n    builder: AdvancedSearchBuilderView,\n    parentContainer: HTMLElement,\n    logicalOperator: LogicalOperator = 'and',\n    conditionViews: ConditionView[] = [],\n    referenceElm: Node | null = null,\n    isRoot: boolean = false\n  ) {\n    super(builder, parentContainer, referenceElm);\n    this._isRoot = isRoot;\n\n    this.rootEl.classList.add('advanced-search-condition-group-view');\n    if (isRoot) this.rootEl.classList.add('-root');\n\n    this._buildDOM(); // Create and cache DOM nodes\n    this.logicalOperator = logicalOperator;\n    this._attachEvents();\n\n    // Move provided children under this group's container\n    for (const cv of conditionViews) {\n      this._childContainerEl.append(cv.rootEl);\n    }\n\n    // Observe changes to child list\n    this._mutationObserver = this._createChildObserver();\n    this._syncNumberOfChildren();\n  }\n\n  // \n  // Public API\n  // \n\n  /** Create and append a toolbar container inside this group. */\n  makeToolbar(): HTMLElement {\n    const toolbar = createEl('nav', { class: 'advanced-search-toolbar-host' });\n    this.rootEl.append(toolbar);\n    return toolbar;\n  }\n\n  /** Add a new condition item as a direct child of this group. */\n  addNewConditionItem(\n    conditionType: ConditionTypeValue,\n    referenceElm: Node | null = null,\n    options?: unknown\n  ): ConditionItemView {\n    const item = new ConditionItemView(\n      this._builder,\n      this,\n      conditionType,\n      referenceElm,\n      options\n    );\n    this._syncNumberOfChildren();\n    return item;\n  }\n\n  /** Wrap given views into a new subgroup under this group. */\n  addNewConditionGroup(\n    selected: ConditionView[],\n    ref?: HTMLElement | null\n  ): GroupView {\n    const group = new ConditionGroupView(\n      this._builder,\n      this._childContainerEl,\n      'and',\n      selected,\n      ref ?? null,\n      false\n    );\n    this._syncNumberOfChildren();\n    return group;\n  }\n\n  /**\n   * Ungroup this group: move its children to the parent group, then remove self.\n   * No-op if no parent group.\n   */\n  ungroup(): void {\n    const nodes = Array.from(\n      this._childContainerEl.querySelectorAll(CHILD_VIEW_SEL)\n    );\n    const parent = this.parentGroup;\n    if (parent) {\n      parent.addConditionViews(nodes, this.rootEl);\n    }\n    this.remove(); // disconnects observer & listeners\n  }\n\n  /**\n   * Insert existing view nodes before a reference element and refresh state.\n   * Used by parent when \"ungroup\" moves descendants up one level.\n   */\n  addConditionViews(conditionViews: Node[], referenceElm: Node | null): void {\n    for (const n of conditionViews) {\n      this._childContainerEl.insertBefore(n, referenceElm);\n    }\n    this._syncNumberOfChildren();\n  }\n\n  /** Public API: remove one child view from DOM and refresh state. */\n  removeConditionView(view: ConditionView): void {\n    view.rootEl.remove(); // DOM \n    this._syncNumberOfChildren(); // data-number-of-child \n  }\n\n  /** Dispose this group and its resources. */\n  remove(): void {\n    this._mutationObserver?.disconnect();\n    this._events.abort();\n    super.remove();\n  }\n\n  // \n  // Accessors\n  // \n\n  /** Direct container that holds child condition views (items or groups). */\n  get container(): HTMLDivElement {\n    return this._childContainerEl;\n  }\n\n  /**\n   * Current children as live View instances.\n   * DOM is the single source of truth; we resolve views via viewByEl.\n   */\n  get childViews(): ConditionView[] {\n    return Array.from(this._childContainerEl.querySelectorAll(CHILD_VIEW_SEL))\n      .map((el) => viewByEl.get(el as HTMLElement)!)\n      .filter(Boolean);\n  }\n\n  /** Current logical operator, normalized to 'and' | 'or'. */\n  get logicalOperator(): LogicalOperator {\n    const op = (this._logicalOperatorSwitch.dataset.operator ??\n      'and') as LogicalOperator;\n    return op === 'or' ? 'or' : 'and';\n  }\n  set logicalOperator(op: LogicalOperator) {\n    this._logicalOperatorSwitch.dataset.operator = op;\n    // Reflect state for a11y: treat 'or' as checked=true.\n    this._logicalOperatorSwitch.setAttribute(\n      'aria-checked',\n      String(op === 'or')\n    );\n  }\n\n  /** Group-level query assembled from child queries. */\n  get queryFragment(): ConditionQuery {\n    const children = this.childViews;\n    switch (children.length) {\n      case 0:\n        return {} as ConditionQuery;\n      case 1:\n        return children[0].queryFragment as ConditionQuery;\n      default: {\n        // Filter out null, undefined, and empty objects to prevent malformed queries\n        const validFragments = children\n          .map((v) => v.queryFragment)\n          .filter((fragment) => {\n            if (fragment == null) return false; // null or undefined\n            if (\n              typeof fragment === 'object' &&\n              Object.keys(fragment).length === 0\n            )\n              return false; // empty object\n            return true;\n          });\n\n        // If no valid fragments remain, return empty query\n        if (validFragments.length === 0) {\n          return {} as ConditionQuery;\n        }\n\n        // If only one valid fragment, return it directly (no need for logical operator wrapper)\n        if (validFragments.length === 1) {\n          return validFragments[0] as ConditionQuery;\n        }\n\n        return {\n          [this.logicalOperator]: validFragments,\n        } as ConditionQuery;\n      }\n    }\n  }\n\n  // \n  // Internals\n  // \n\n  /** Create and cache the inner structure using createEl (no innerHTML). */\n  private _buildDOM(): void {\n    // Operator switch (use role=\"switch\" for binary toggle; Space/Enter works nicely)\n    this._logicalOperatorSwitch = createEl('div', {\n      class: 'logical-operator-switch',\n      attrs: {\n        role: 'switch',\n        'aria-label': 'Toggle logical operator',\n        'aria-checked': 'false',\n        tabindex: '0',\n      },\n    });\n\n    // Children container\n    this._childContainerEl = createEl('div', { class: 'container' });\n\n    // Hydrate\n    this.rootEl.replaceChildren(\n      this._logicalOperatorSwitch,\n      this._childContainerEl\n    );\n  }\n\n  /** Wire up selection behavior and operator toggle (mouse + keyboard). */\n  private _attachEvents(): void {\n    const { signal } = this._events;\n\n    // Background click toggles selection for non-root groups.\n    if (!this._isRoot) {\n      this.rootEl.addEventListener('click', this._toggleSelection.bind(this), {\n        signal,\n      });\n    }\n\n    // Toggle logical operator (mouse)\n    this._logicalOperatorSwitch.addEventListener(\n      'click',\n      (e) => {\n        e.stopPropagation();\n        this.logicalOperator = this.logicalOperator === 'and' ? 'or' : 'and';\n        this._notifyChanged();\n      },\n      { signal }\n    );\n\n    // Toggle logical operator (keyboard: Enter/Space)\n    this._logicalOperatorSwitch.addEventListener(\n      'keydown',\n      (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          e.stopPropagation();\n          this.logicalOperator = this.logicalOperator === 'and' ? 'or' : 'and';\n          this._notifyChanged();\n        }\n      },\n      { signal }\n    );\n  }\n\n  /** Notify the builder that this group's condition settings changed. */\n  private _notifyChanged(): void {\n    this._builder.changeCondition();\n  }\n\n  /**\n   * Track child-list changes to keep count in sync and auto-ungroup small groups.\n   * We disconnect before ungroup to avoid re-entrancy loops.\n   */\n  private _createChildObserver(): MutationObserver {\n    const observer = new MutationObserver(() => {\n      this._syncNumberOfChildren();\n      if (!this._isRoot && this._numberOfChildren <= 1) {\n        observer.disconnect();\n        this.ungroup();\n        // If this group still exists (rare), resume observing:\n        if (this.rootEl.isConnected) {\n          observer.observe(this._childContainerEl, {\n            childList: true,\n            subtree: false,\n          });\n        }\n      }\n    });\n    observer.observe(this._childContainerEl, {\n      childList: true,\n      subtree: false,\n    });\n    return observer;\n  }\n\n  /** Write data-number-of-child to match the current DOM count. */\n  private _syncNumberOfChildren(): void {\n    this.rootEl.dataset.numberOfChild = String(this._numberOfChildren);\n  }\n\n  /** Count children directly from DOM (single source of truth). */\n  private get _numberOfChildren(): number {\n    return this._childContainerEl.querySelectorAll(CHILD_VIEW_SEL).length;\n  }\n}\n","import { BaseConditionView } from './ConditionView';\nimport ConditionValues from './ConditionValues';\nimport { storeManager } from '../../store/StoreManager';\nimport {\n  supportsRelation,\n  type NoRelationType,\n  type KeysWithRelation,\n} from '../../conditions';\nimport { ADVANCED_CONDITIONS } from '../../global';\n\nimport { CONDITION_NODE_KIND, type ConditionTypeValue } from '../../definition';\nimport { keyDownEvent } from '../../utils/keyDownEvent.js';\nimport { buildQueryFragment } from './queryBuilders';\nimport { createEl } from '../../utils/dom/createEl';\nimport type { AdvancedSearchBuilderView } from '../AdvancedSearchBuilderView';\nimport type { ConditionGroupView } from './ConditionGroupView';\nimport type {\n  ConditionQuery,\n  Relation,\n  ConditionDefinition,\n} from '../../types';\nimport type { ConditionItemValueView } from '../../components/ConditionItemValueView';\n\n/**\n * A single condition row with edit/delete behaviors.\n * Owns its editor(s), relation state, and all event wiring for the row.\n */\nexport class ConditionItemView extends BaseConditionView {\n  readonly conditionNodeKind = CONDITION_NODE_KIND.condition;\n\n  private readonly _conditionType: ConditionTypeValue;\n  private readonly _relationSupported: boolean;\n\n  private _isFirstTime = true;\n  private _keepLastRelation: Relation = 'eq'; // restored when user cancels with Esc.\n\n  // DOM references\n  private _summaryEl!: HTMLDivElement;\n  private _relationEl!: HTMLDivElement;\n  private _valuesContainerEl!: HTMLDivElement;\n  private _btnEdit!: HTMLButtonElement;\n  private _btnDelete!: HTMLButtonElement;\n  private _editorEl!: HTMLDivElement;\n  private _classificationEl!: HTMLDivElement;\n\n  /** Manages concrete editors (checkboxes, selects, etc.) inside this row. */\n  private _conditionValues!: ConditionValues;\n\n  /** Single controller to clean up every listener added by this instance. */\n  private readonly _events = new AbortController();\n\n  /**\n   * @param builder      Owning AdvancedSearchBuilderView (for callbacks)\n   * @param parentGroup  The logical parent group view\n   * @param conditionType Type discriminator for this row\n   * @param referenceElm  Insert before this node (or appended when null)\n   * @param options      Optional initial values (e.g., from karyotype selection)\n   */\n  constructor(\n    builder: AdvancedSearchBuilderView,\n    parentGroup: ConditionGroupView,\n    conditionType: ConditionTypeValue,\n    referenceElm: Node | null = null,\n    options?: unknown\n  ) {\n    super(\n      builder,\n      parentGroup.container,\n      referenceElm ?? document.createTextNode('')\n    );\n\n    this._conditionType = conditionType;\n    this._relationSupported = supportsRelation(conditionType);\n\n    this._initializeHTML();\n    this._conditionValues = new ConditionValues(this, options);\n    this._attachEventDelegation();\n    this._enterEditMode(); // Start in edit mode on first render.\n  }\n\n  // \n  // Public API (called by outer components)\n  // \n\n  /** Leave edit mode, close modal, and notify the builder that this item changed. */\n  doneEditing(): void {\n    this.rootEl.classList.remove('-editing');\n    this._isFirstTime = false;\n    this._toggleGlobalKeydown(false);\n    storeManager.setData('showModal', false);\n    this._builder.changeCondition();\n  }\n\n  /** Clean up resources and remove this item from the DOM. */\n  remove(): void {\n    this._toggleGlobalKeydown(false);\n    this._events.abort(); // Detach all listeners registered with this controller.\n    storeManager.setData('showModal', false);\n    // this._conditionValues?.destroy?.(); // Uncomment if ConditionValues implements destroy().\n    super.remove();\n  }\n\n  /** Update the classification text (called by child editors) */\n  updateClassificationText(newText: string): void {\n    if (this._classificationEl) {\n      this._classificationEl.textContent = newText;\n    }\n  }\n\n  // \n  // Read-only accessors\n  // \n  get conditionType(): ConditionTypeValue {\n    return this._conditionType;\n  }\n  get valuesContainerEl(): HTMLDivElement {\n    return this._valuesContainerEl;\n  }\n  get editorElement(): HTMLDivElement {\n    return this._editorEl;\n  }\n  get isFirstTime(): boolean {\n    return this._isFirstTime;\n  }\n  get keepLastRelation(): Relation {\n    return this._keepLastRelation;\n  }\n\n  // \n  // Query building\n  // \n  /**\n   * Build a query fragment from the current UI and relation state.\n   * Note: relation is undefined for types that do not support it.\n   */\n  get queryFragment(): ConditionQuery {\n    const values = Array.from(\n      this._valuesContainerEl.querySelectorAll(\n        ':scope > condition-item-value-view'\n      )\n    ) as ConditionItemValueView[];\n\n    if (supportsRelation(this._conditionType)) {\n      const type = this._conditionType as KeysWithRelation;\n      const relation: Relation = this._readRelation() ?? 'eq';\n\n      return buildQueryFragment<KeysWithRelation>({\n        type,\n        relation,\n        values,\n        valuesContainer: this._valuesContainerEl,\n      });\n    } else {\n      const type = this._conditionType as NoRelationType;\n      return buildQueryFragment<NoRelationType>({\n        type,\n        values,\n        valuesContainer: this._valuesContainerEl,\n      });\n    }\n  }\n\n  // \n  // DOM creation / initial sync\n  // \n  /**\n   * Set up static structure and initial dataset attributes on the root element.\n   * - classification: the condition type\n   * - relation: 'eq' or 'ne' if supported; removed when unsupported\n   * - children: built by _generateDOM()\n   */\n  private _initializeHTML(): void {\n    this.rootEl.classList.add('advanced-search-condition-item-view');\n    this.rootEl.dataset.classification = this._conditionType;\n\n    if (this._relationSupported) {\n      this.rootEl.dataset.relation = 'eq';\n    } else {\n      delete this.rootEl.dataset.relation;\n    }\n\n    const { body, bg } = this._generateDOM();\n    this.rootEl.replaceChildren(body, bg);\n    this._setRelation(this._readRelation());\n  }\n\n  /**\n   * Create the inner DOM using `createEl` and cache important nodes.\n   * We keep direct references (buttons, relation, values) to avoid repeated queries.\n   */\n  private _generateDOM(): { body: HTMLDivElement; bg: HTMLDivElement } {\n    const cond = ADVANCED_CONDITIONS[\n      this._conditionType\n    ] as ConditionDefinition;\n\n    const relationChild = this._relationSupported\n      ? (this._relationEl = createEl('div', {\n          class: 'relation',\n          attrs: {\n            role: 'button',\n            'aria-label': 'Toggle relation',\n            tabindex: '0',\n          },\n        }))\n      : null;\n\n    this._summaryEl = createEl('div', {\n      class: 'summary',\n      children: [\n        // TODO: In the future, implement drag-and-drop ordering.\n        (this._classificationEl = createEl('div', {\n          class: 'classification',\n          text: cond.label,\n        })),\n        ...(relationChild ? [relationChild] : []),\n        (this._valuesContainerEl = createEl('div', {\n          class: 'values-container',\n        })),\n        createEl('div', {\n          class: 'buttons',\n          children: [\n            (this._btnEdit = createEl('button', {\n              class: 'edit',\n              attrs: { type: 'button', title: 'Edit', 'aria-label': 'Edit' },\n            })),\n            (this._btnDelete = createEl('button', {\n              class: 'delete',\n              attrs: {\n                type: 'button',\n                title: 'Delete',\n                'aria-label': 'Delete',\n              },\n            })),\n          ],\n        }),\n      ],\n    });\n\n    const body = createEl('div', {\n      class: 'body',\n      children: [\n        this._summaryEl,\n        (this._editorEl = createEl('div', {\n          class: 'advanced-search-condition-editor-view',\n        })),\n      ],\n    });\n\n    const bg = createEl('div', { class: 'bg' });\n    return { body, bg };\n  }\n\n  // \n  // Event wiring\n  // \n  /**\n   * Centralized event wiring:\n   * - Stops bubbling out of this item\n   * - Direct listeners for Edit/Delete/Relation\n   * - Click on the summary background toggles selection\n   */\n  private _attachEventDelegation(): void {\n    const { signal } = this._events;\n\n    // Prevent clicks from bubbling outside of this condition item.\n    this.rootEl.addEventListener('click', (e) => e.stopPropagation(), {\n      signal,\n    });\n\n    // Delete\n    this._btnDelete.addEventListener(\n      'click',\n      (e) => {\n        e.stopPropagation();\n        this._builder.deleteCondition([this]);\n      },\n      { signal }\n    );\n\n    // Edit\n    this._btnEdit.addEventListener(\n      'click',\n      (e) => {\n        e.stopPropagation();\n        this._enterEditMode();\n      },\n      { signal }\n    );\n\n    // Relation (mouse)\n    if (this._relationSupported && this._relationEl) {\n      this._relationEl.addEventListener(\n        'click',\n        (e) => {\n          e.stopPropagation();\n          this._toggleRelation();\n        },\n        { signal }\n      );\n\n      // Relation (keyboard)\n      this._relationEl.addEventListener(\n        'keydown',\n        (e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            e.stopPropagation();\n            this._toggleRelation();\n          }\n        },\n        { signal }\n      );\n    }\n\n    // Background click inside summary toggles selection (excluding controls).\n    this._summaryEl.addEventListener(\n      'click',\n      (e) => {\n        const t = e.target as Element;\n        if (t.closest('button, .relation')) return; // handled above\n        this._toggleSelection(e);\n      },\n      { signal }\n    );\n  }\n\n  // \n  // Relation helpers\n  // \n  /**\n   * Toggle relation ('eq' <-> 'ne') if this type supports relation.\n   * Also updates ARIA state and notifies the builder if the modal is not open.\n   */\n  private _toggleRelation(): void {\n    if (!this._relationSupported) return;\n    const cur = this._readRelation() ?? 'eq';\n    const next: Relation = cur === 'eq' ? 'ne' : 'eq';\n    this._setRelation(next);\n\n    if (!storeManager.getData('showModal')) {\n      this._keepLastRelation = next;\n      this._builder.changeCondition();\n    }\n  }\n\n  /** Read relation from dataset. returns undefined when unsupported or absent. */\n  private _readRelation(): Relation | undefined {\n    if (!this._relationSupported) return undefined;\n    const r = this.rootEl.dataset.relation;\n    return r === 'eq' || r === 'ne' ? r : undefined;\n  }\n\n  /**\n   * Normalize and write relation to dataset, then sync ARIA.\n   * When unsupported: clear the attribute and do not show ARIA pressed state.\n   */\n  private _setRelation(next: Relation | undefined): void {\n    if (!this._relationSupported) {\n      delete this.rootEl.dataset.relation;\n      return;\n    }\n    if (!next) next = 'eq';\n    this.rootEl.dataset.relation = next;\n    if (this._relationEl) {\n      this._relationEl.setAttribute('aria-pressed', String(next === 'ne'));\n    }\n  }\n\n  // \n  // Edit mode helpers (modal lifecycle)\n  // \n  /** Enter edit mode and bind the global Escape handler while the modal is open. */\n  private _enterEditMode(): void {\n    this.rootEl.classList.add('-editing');\n    this._conditionValues.startToEditCondition();\n    storeManager.setData('showModal', true);\n    this._toggleGlobalKeydown(true);\n  }\n\n  /**\n   * Attach/detach a single global keydown handler via AbortController.\n   * This keeps the wiring localized to this instance.\n   */\n  private _toggleGlobalKeydown(enable: boolean): void {\n    const fn = this._keydownEscapeEvent;\n    if (enable) {\n      window.addEventListener('keydown', fn, { signal: this._events.signal });\n    } else {\n      window.removeEventListener('keydown', fn);\n    }\n  }\n\n  /**\n   * Global Escape handler:\n   * - On first edit, Esc removes the item entirely\n   * - Otherwise, Esc restores previous state and exits edit mode\n   */\n  private readonly _keydownEscapeEvent = (e: KeyboardEvent) => {\n    if (e.key !== 'Escape' || !storeManager.getData('showModal')) return;\n    if (keyDownEvent('showModal')) {\n      if (this._isFirstTime) {\n        this.remove();\n      } else {\n        this._revertChanges();\n        this.doneEditing();\n      }\n    }\n  };\n\n  /** Restore editor UI and last confirmed relation when canceling edits. */\n  private _revertChanges(): void {\n    for (const editor of this._conditionValues.editors) editor.restore();\n    this._setRelation(\n      this._relationSupported ? this._keepLastRelation : undefined\n    );\n  }\n}\n","import { createEl } from '../../../utils/dom/createEl';\nimport { selectRequired, selectOrNull } from '../../../utils/dom/select';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport type { ConditionTypeValue } from '../../../definition';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport type { EditorSectionClassName } from '../../../types';\n\ntype SectionChildren = ReadonlyArray<Node | string>;\ntype SectionContent =\n  | string\n  | DocumentFragment\n  | SectionChildren\n  | (() => SectionChildren);\n\nexport class ConditionValueEditor {\n  private _sectionEl: HTMLElement | null = null;\n\n  constructor(\n    private readonly _conditionValues: ConditionValues,\n    private readonly _conditionItemView: ConditionItemView\n  ) {}\n\n  // \n  // DOM Creation\n  // \n\n  /** Create an element for the edit screen. */\n  protected createSectionEl(\n    className: EditorSectionClassName,\n    content: SectionContent\n  ): HTMLElement {\n    const sectionEl = createEl('section', {\n      class: className,\n      dataset: { conditionType: String(this.conditionType) },\n    });\n\n    if (typeof content === 'string') {\n      sectionEl.innerHTML = content;\n    } else {\n      const list =\n        typeof content === 'function'\n          ? content()\n          : content instanceof DocumentFragment\n          ? [content]\n          : content;\n\n      const frag = document.createDocumentFragment();\n      for (const n of list) {\n        frag.append(n instanceof Node ? n : document.createTextNode(String(n)));\n      }\n      sectionEl.append(frag);\n    }\n\n    this._conditionValues.sections.append(sectionEl);\n    this._sectionEl = sectionEl;\n    return sectionEl;\n  }\n\n  /** If there is only one value in the condition, update it,\n   * for multiple values, add them without duplicates. (for variant id)\n   */\n  protected addValueView(\n    value: string,\n    label: string,\n    isOnly = false,\n    showDeleteButton = false\n  ): ConditionItemValueView {\n    const selector = isOnly ? '' : `[data-value=\"${value}\"]`;\n    let valueView = selectOrNull<ConditionItemValueView>(\n      this.valuesContainerEl,\n      `condition-item-value-view${selector}`\n    );\n\n    if (!valueView) {\n      // HTMLElementTagNameMap  ConditionItemValueView\n      valueView = document.createElement('condition-item-value-view');\n      valueView.conditionType = this.conditionType;\n      valueView.deleteButton = showDeleteButton;\n      this.valuesContainerEl.append(valueView);\n    }\n\n    valueView.label = label;\n    valueView.value = value;\n    return valueView;\n  }\n\n  /** Delete if argument value contains a value */\n  protected removeValueView(value: string): void {\n    const selector = value ? `[data-value=\"${value}\"]` : '';\n    const view = selectOrNull<ConditionItemValueView>(\n      this.valuesContainerEl,\n      `condition-item-value-view${selector}`\n    );\n    if (view) view.remove();\n  }\n\n  // \n  // Accessors\n  // \n  protected get sectionEl(): HTMLElement {\n    if (!this._sectionEl) throw new Error('not mounted yet');\n    return this._sectionEl;\n  }\n\n  protected get bodyEl(): HTMLElement {\n    return selectRequired<HTMLElement>(\n      this.sectionEl,\n      ':scope > .body',\n      'ConditionValueEditor.bodyEl'\n    );\n  }\n\n  /** Access to the parent condition item view */\n  protected get conditionItemView(): ConditionItemView {\n    return this._conditionItemView;\n  }\n\n  /** Access to the condition values component */\n  protected get conditionValues(): ConditionValues {\n    return this._conditionValues;\n  }\n\n  /** Get the condition type from the parent view */\n  protected get conditionType(): ConditionTypeValue {\n    return this._conditionItemView.conditionType;\n  }\n\n  // div.values which is a wrapper for condition-item-value-view\n  protected get valuesContainerEl(): HTMLDivElement {\n    return this._conditionItemView.valuesContainerEl;\n  }\n\n  /** Get all condition item value views. */\n  protected get conditionItemValueViews(): ConditionItemValueView[] {\n    return Array.from(\n      this.valuesContainerEl.querySelectorAll<ConditionItemValueView>(\n        ':scope > condition-item-value-view'\n      )\n    );\n  }\n\n  // \n  // Options handling (for karyotype selection, etc.)\n  // \n\n  /**\n   * Apply initial options to the editor (e.g., from karyotype selection).\n   * Override this method in subclasses to handle specific options.\n   * @param _options - Options object (structure depends on the editor type)\n   */\n  applyOptions(_options: unknown): void {\n    // Base implementation does nothing; subclasses can override\n  }\n}\n","import { createEl } from '../../../utils/dom/createEl';\nimport { ConditionValueEditor } from './ConditionValueEditor';\nimport { ADVANCED_CONDITIONS } from '../../../global';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\n\n/**\n * Editor for flat enumeration conditions (e.g., Variant type).\n * It renders a list of checkboxes and syncs them with <condition-item-value-view> elements.\n *\n * Assumptions:\n * - `ADVANCED_CONDITIONS[this.conditionType]` is a flat enumeration definition\n *   (i.e., `values` is an array of {value, label}).\n * - Clinical significance (with mgend/clinvar split) should use a different editor class.\n */\nexport class ConditionValueEditorCheckboxes extends ConditionValueEditor {\n  private _checkboxes: HTMLInputElement[] = [];\n  private _lastValues: string[] = [];\n\n  constructor(\n    conditionValues: ConditionValues,\n    conditionView: ConditionItemView\n  ) {\n    super(conditionValues, conditionView);\n\n    // Read the master definition for this condition type and assert it is flat.\n    const master = ADVANCED_CONDITIONS.type;\n    if (!master) {\n      throw new Error('type condition not found');\n    }\n\n    // Build HTML (template string kept for brevity; safe because values are static text)\n    this.createSectionEl('checkboxes-editor-view', () => [\n      // <header>Select {type}</header>\n      createEl('header', { text: `Select ${this.conditionType}` }),\n\n      // buttons\n      createEl('div', {\n        class: 'buttons',\n        children: [\n          createEl('button', {\n            class: ['button-view', '-weak'],\n            text: 'Select all',\n          }),\n          createEl('button', {\n            class: ['button-view', '-weak'],\n            text: 'Clear all',\n          }),\n        ],\n      }),\n\n      // <ul class=\"checkboxes body\"> ...items... </ul>\n      createEl('ul', {\n        class: ['checkboxes', 'body'],\n        children: master.values.map((item) =>\n          createEl('li', {\n            dataset: { value: item.value },\n            children: [\n              createEl('label', {\n                children: [\n                  createEl('input', {\n                    attrs: { type: 'checkbox' },\n                    domProps: { value: item.value }, // value property\n                    dataset: { label: item.label }, // data-label\n                  }),\n                  ' ',\n                  item.label,\n                ],\n              }),\n            ],\n          })\n        ),\n      }),\n    ]);\n\n    // Cache references\n    this._checkboxes = Array.from(\n      this.sectionEl.querySelectorAll<HTMLInputElement>(\n        ':scope > ul > li > label > input[type=\"checkbox\"]'\n      )\n    );\n\n    // Wire events\n    this._checkboxes.forEach((checkbox) => {\n      checkbox.addEventListener('change', () => this._update());\n    });\n\n    this.sectionEl\n      .querySelectorAll<HTMLButtonElement>(':scope > .buttons > button')\n      .forEach((button, index) => {\n        button.addEventListener('click', () => {\n          // index: 0 => Select all, 1 => Clear all\n          const checked = index === 0;\n          this._checkboxes.forEach((cb) => (cb.checked = checked));\n          this._update();\n        });\n      });\n  }\n\n  // \n  // Public API\n  // \n  /** Save current values so they can be restored on cancel. */\n  keepLastValues(): void {\n    const views = Array.from(\n      this.valuesContainerEl.querySelectorAll<ConditionItemValueView>(\n        ':scope > condition-item-value-view'\n      )\n    );\n    this._lastValues = views.map((v) => v.value);\n  }\n\n  /** Restore checkbox states to the last confirmed values. */\n  restore(): void {\n    this._checkboxes.forEach((checkbox) => {\n      checkbox.checked = this._lastValues.includes(checkbox.value);\n    });\n    this._update();\n  }\n\n  /** Whether the current state is valid (at least one option checked). */\n  get isValid(): boolean {\n    return this._checkboxes.some((checkbox) => checkbox.checked);\n  }\n\n  /**\n   * Sync the checked state into <condition-item-value-view> list and\n   * update the parent editor's OK button enabled state.\n   */\n  private _update(): void {\n    // Reflect checkbox checks into value views\n    this._checkboxes.forEach((checkbox) => {\n      const label = checkbox.dataset.label ?? checkbox.value; // guard against undefined\n      if (checkbox.checked) {\n        this.addValueView(checkbox.value, label);\n      } else {\n        this.removeValueView(checkbox.value);\n      }\n    });\n\n    // Validation: enable/disable OK based on current validity\n    this.conditionValues.update(this.isValid);\n  }\n}\n","import { createEl } from '../../../utils/dom/createEl';\nimport { ConditionValueEditor } from './ConditionValueEditor';\nimport { ADVANCED_CONDITIONS } from '../../../global';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport type {\n  EnumerationItem,\n  MutableSignificanceValues,\n  SignificanceSource,\n} from '../../../types';\n\nconst LABELS = {\n  selectHeader: (t: string) => `Select ${t}`,\n  selectAll: 'Select all',\n  clearAll: 'Clear all',\n  mgend: 'MGeND',\n  clinvar: 'Clinvar',\n} as const;\n\n/**\n * Editor for the \"Clinical significance\" condition.\n * - Renders MGeND and ClinVar buckets with checkboxes\n * - Maintains mutable selection state\n * - Keeps last confirmed values for restore()\n */\nexport class ConditionValueEditorClinicalSignificance extends ConditionValueEditor {\n  private _checkboxes: HTMLInputElement[] = [];\n  private _values: MutableSignificanceValues = { mgend: [], clinvar: [] };\n  private _lastValues: MutableSignificanceValues = { mgend: [], clinvar: [] };\n\n  /** Cached UL containers (filled after initial render) */\n  private _mgendUl?: HTMLUListElement;\n  private _clinvarUl?: HTMLUListElement;\n\n  /**\n   * @param conditionValues Parent view orchestrating editors\n   * @param conditionView Condition row (provides container & meta)\n   */\n  constructor(\n    conditionValues: ConditionValues,\n    conditionView: ConditionItemView\n  ) {\n    super(conditionValues, conditionView);\n\n    // Typed config from JSON (significance is always enumeration with 2 buckets)\n    const master = ADVANCED_CONDITIONS.significance;\n    if (!master) {\n      throw new Error('Missing condition definition: significance');\n    }\n\n    // Build section skeleton\n    this.createSectionEl('clinical-significance-view', () => [\n      createEl('header', { text: LABELS.selectHeader(this.conditionType) }),\n      createEl('div', {\n        class: 'buttons',\n        children: [\n          createEl('button', {\n            class: ['button-view', '-weak'],\n            text: LABELS.selectAll,\n          }),\n          createEl('button', {\n            class: ['button-view', '-weak'],\n            text: LABELS.clearAll,\n          }),\n        ],\n      }),\n      createEl('div', {\n        class: ['dataset-title', 'mgend'],\n        text: LABELS.mgend,\n      }),\n      (this._mgendUl = createEl('ul', {\n        class: ['checkboxes', 'body'],\n        dataset: { type: 'clinical-significance', source: 'mgend' },\n      })),\n      createEl('hr'),\n      createEl('div', {\n        class: ['dataset-title', 'clinvar'],\n        text: LABELS.clinvar,\n      }),\n      (this._clinvarUl = createEl('ul', {\n        class: ['checkboxes', 'body'],\n        dataset: { type: 'clinical-significance', source: 'clinvar' },\n      })),\n    ]);\n\n    // Populate checkboxes (accept readonly input, create mutable UI)\n    const mgendVals = this._filterValues(master.values.mgend, 'mgend');\n    const clinvarVals = this._filterValues(master.values.clinvar, 'clinvar');\n\n    this._mgendUl!.append(\n      ...this._generateCheckboxListNodes(mgendVals, 'mgend')\n    );\n    this._clinvarUl!.append(\n      ...this._generateCheckboxListNodes(clinvarVals, 'clinvar')\n    );\n\n    // Cache all checkbox refs once\n    this._checkboxes = Array.from(\n      this.sectionEl.querySelectorAll<HTMLInputElement>(\n        ':scope ul[data-type=\"clinical-significance\"] input[type=\"checkbox\"]'\n      )\n    );\n\n    this._attachCheckboxEventsDelegated();\n    this._attachButtonEvents();\n  }\n\n  // \n  // Public API\n  // \n\n  /** Capture current rendered value-views as \"last confirmed\" values. */\n  keepLastValues(): void {\n    const mgendNodes =\n      this.valuesContainerEl.querySelectorAll<ConditionItemValueView>(\n        ':scope > .mgend-wrapper > .mgend-condition-wrapper > condition-item-value-view'\n      );\n    const clinvarNodes =\n      this.valuesContainerEl.querySelectorAll<ConditionItemValueView>(\n        ':scope > .clinvar-wrapper > .clinvar-condition-wrapper > condition-item-value-view'\n      );\n\n    this._lastValues = {\n      mgend: Array.from(mgendNodes, (v) => ({\n        value: v.value,\n        label: v.label,\n      })),\n      clinvar: Array.from(clinvarNodes, (v) => ({\n        value: v.value,\n        label: v.label,\n      })),\n    };\n  }\n\n  /** Restore checkboxes from the last confirmed values, then re-render. */\n  restore(): void {\n    const has = (src: SignificanceSource, val: string) =>\n      this._lastValues[src].some((x) => x.value === val);\n\n    for (const cb of this._checkboxes) {\n      const src = (cb.dataset.source as SignificanceSource) || 'mgend';\n      cb.checked = has(src, cb.value);\n    }\n    this._update();\n  }\n\n  // \n  // DOM build helpers\n  // \n\n  /**\n   * Create LI nodes for one bucket.\n   * @param values Readonly source items from JSON\n   * @param source Either \"mgend\" or \"clinvar\"\n   */\n  private _generateCheckboxListNodes(\n    values: ReadonlyArray<EnumerationItem>,\n    source: SignificanceSource\n  ): HTMLLIElement[] {\n    return values.map(({ value, label }) =>\n      createEl('li', {\n        dataset: { value, source },\n        children: [\n          createEl('label', {\n            children: [\n              createEl('input', {\n                attrs: { type: 'checkbox' },\n                dataset: { source, label },\n                domProps: { value },\n              }),\n              createEl('span', {\n                class: 'clinical-significance',\n                dataset: { value },\n              }),\n              ' ',\n              label,\n            ],\n          }),\n        ],\n      })\n    );\n  }\n\n  /** Attach a single delegated change handler for all checkboxes. */\n  private _attachCheckboxEventsDelegated(): void {\n    this.sectionEl.addEventListener('change', (e) => {\n      const t = e.target as Element | null;\n      if (!t || !(t instanceof HTMLInputElement)) return;\n      if (!t.matches('input[type=\"checkbox\"]')) return;\n      this._update();\n    });\n  }\n\n  /** Wire \"Select all\" / \"Clear all\" buttons with a single handler. */\n  private _attachButtonEvents(): void {\n    const btns = this.sectionEl.querySelectorAll<HTMLButtonElement>(\n      ':scope > .buttons > button'\n    );\n    btns.forEach((button, index) => {\n      button.addEventListener('click', () => {\n        const check = index === 0; // 0: select all, 1: clear all\n        for (const cb of this._checkboxes) cb.checked = check;\n        this._update();\n      });\n    });\n  }\n\n  /**\n   * Filter master values into a mutable array for UI consumption.\n   * @param values Source values (readonly, from JSON)\n   * @param source MGeND or ClinVar\n   */\n  private _filterValues(\n    values: ReadonlyArray<EnumerationItem>,\n    source: SignificanceSource\n  ): EnumerationItem[] {\n    if (this.conditionType === 'significance' && source === 'clinvar') {\n      return values.filter((v) => v.value !== 'NC'); // new mutable array\n    }\n    return Array.from(values); // mutable copy\n  }\n\n  // \n  // State & rendering\n  // \n\n  /**\n   * Recompute selection state from checkboxes and update the rendered chips.\n   * Side-effects:\n   * - Mutates `_values`\n   * - Re-renders value views\n   * - Notifies parent about validity\n   */\n  private _update(): void {\n    // Rebuild `_values` from checkbox states\n    this._values = { mgend: [], clinvar: [] };\n    for (const cb of this._checkboxes) {\n      if (!cb.checked) continue;\n      const source = (cb.dataset.source as SignificanceSource) || 'mgend';\n      const label = cb.dataset.label ?? cb.value;\n      this._values[source].push({ value: cb.value, label });\n    }\n\n    // Re-render both sources\n    this._renderSource('mgend', this._values.mgend);\n    this._renderSource('clinvar', this._values.clinvar);\n\n    // Update parent validity\n    this.conditionValues.update(this.isValid);\n  }\n\n  /**\n   * Render one bucket (mgend/clinvar):\n   * - If empty: remove wrapper group\n   * - Else: ensure wrapper and replace all chips\n   */\n  private _renderSource(\n    source: SignificanceSource,\n    values: Array<EnumerationItem>\n  ): void {\n    if (values.length === 0) {\n      this._removeConditionWrapper(source);\n      return;\n    }\n\n    const wrapper = this._ensureWrapperExists(source);\n\n    // Clear existing chips\n    wrapper\n      .querySelectorAll<ConditionItemValueView>('condition-item-value-view')\n      .forEach((v) => v.remove());\n\n    // Append chips\n    for (const v of values) {\n      const chip = document.createElement(\n        'condition-item-value-view'\n      ) as ConditionItemValueView;\n      chip.conditionType = this.conditionType;\n      chip.label = v.label;\n      chip.value = v.value;\n      wrapper.append(chip);\n    }\n  }\n\n  /**\n   * Ensure existence of the bucket wrapper:\n   * <div class=\"{source}-wrapper\">\n   *   <span class=\"{source}\">MGeND|Clinvar</span>\n   *   <div class=\"{source}-condition-wrapper\"></div>\n   * </div>\n   * @returns the inner \"{source}-condition-wrapper\" element\n   */\n  private _ensureWrapperExists(source: SignificanceSource): HTMLElement {\n    const wrapperClass = `${source}-wrapper`;\n    const conditionWrapperClass = `${source}-condition-wrapper`;\n\n    // outer (parent of header and inner wrapper)\n    const outer =\n      this.valuesContainerEl.querySelector<HTMLElement>(`.${wrapperClass}`) ??\n      createEl('div', { class: wrapperClass });\n\n    // If it's not in the DOM yet, append it.\n    if (!outer.isConnected) {\n      this.valuesContainerEl.append(outer);\n    }\n\n    // inner wrapper\n    const conditionWrapper =\n      outer.querySelector<HTMLElement>(`.${conditionWrapperClass}`) ??\n      createEl('div', { class: conditionWrapperClass });\n\n    // When creating a new one, add it together with the label.\n    if (!conditionWrapper.isConnected) {\n      const label = createEl('span', {\n        class: source,\n        text: source === 'mgend' ? LABELS.mgend : LABELS.clinvar,\n      });\n      outer.append(label, conditionWrapper);\n    }\n\n    return conditionWrapper;\n  }\n\n  /**\n   * Remove the entire wrapper group for one source.\n   * This prevents an empty \"Clinvar\" or \"MGeND\" header from lingering.\n   */\n  private _removeConditionWrapper(source: SignificanceSource): void {\n    const outer = this.valuesContainerEl.querySelector<HTMLElement>(\n      `.${source}-wrapper`\n    );\n    if (outer) outer.remove();\n  }\n\n  /** Editor validity: true if at least one checkbox is checked. */\n  public get isValid(): boolean {\n    return this._checkboxes.some((cb) => cb.checked);\n  }\n}\n","import type { HierarchyNode } from 'd3-hierarchy';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport { ConditionValueEditor } from './ConditionValueEditor';\nimport type ConditionValues from '../ConditionValues';\nimport { storeManager } from '../../../store/StoreManager';\n\n// Import separated modules\nimport { DatasetTreeDataProcessor } from './dataset-columns/DatasetTreeDataProcessor';\nimport { DatasetColumnRenderer } from './dataset-columns/DatasetColumnRenderer';\nimport { DatasetColumnEventHandler } from './dataset-columns/DatasetColumnEventHandler';\nimport { DatasetCheckStateManager } from './dataset-columns/DatasetCheckStateManager';\nimport { DatasetValueViewManager } from './dataset-columns/DatasetValueViewManager';\nimport type { UiNode } from './dataset-columns/types';\nimport { createEl } from '../../../utils/dom/createEl';\nimport { selectRequired } from '../../../utils/dom/select';\n\n/**\n * A condition value editor that displays datasets in a hierarchical column-based interface.\n *\n * Similar to macOS Finder's column view, this interface allows users to:\n * - Navigate through dataset categories by clicking arrows\n * - Select individual datasets or entire categories with checkboxes\n * - View parent-child selection relationships (indeterminate states)\n * - Handle restricted datasets that require authentication\n *\n * The interface dynamically creates columns as users drill down through the hierarchy,\n * with each column showing the children of the selected item in the previous column.\n */\nexport class ConditionValueEditorDatasetColumns extends ConditionValueEditor {\n  /** Previously selected values, stored for cancellation/restore functionality */\n  private _lastValueViews: Array<{ dataset: { value?: string } }> = [];\n\n  /** The complete hierarchical tree structure of all available datasets */\n  private _data: HierarchyNode<UiNode>;\n\n  /** The main DOM container that holds all the column elements */\n  private _columns: HTMLElement | null = null;\n\n  /** Array of currently selected nodes that should appear in the value display */\n  private _nodesToShowInValueView: Array<HierarchyNode<UiNode>>;\n\n  // \n  // Specialized modules - each handles a specific aspect of the interface\n  // \n\n  /** Converts raw dataset configuration into hierarchical tree structures */\n  private _dataProcessor = new DatasetTreeDataProcessor();\n\n  /** Creates DOM elements for columns, checkboxes, and navigation arrows */\n  private _renderer = new DatasetColumnRenderer(\n    `${Date.now()}-${Math.random().toString(36).substring(2, 9)}`\n  );\n\n  /** Handles user interactions: checkbox changes, arrow clicks, navigation */\n  private _eventHandler = new DatasetColumnEventHandler();\n\n  /** Manages selection state propagation between parent and child nodes */\n  private _checkStateManager = new DatasetCheckStateManager();\n\n  /** Determines which selected values should be displayed in the summary */\n  private _valueViewManager = new DatasetValueViewManager();\n\n  /**\n   * Creates a new hierarchical dataset selection interface.\n   *\n   * Initializes the column-based UI and loads the dataset hierarchy based on the\n   * condition type (e.g., 'dataset' or 'genotype'). The interface starts with\n   * the root categories displayed in the first column.\n   *\n   * @param valuesView - Component that displays the selected values summary\n   * @param conditionView - Parent component that contains this editor\n   */\n  constructor(valuesView: ConditionValues, conditionView: ConditionItemView) {\n    super(valuesView, conditionView);\n\n    this._data = this._dataProcessor.prepareHierarchicalData(\n      this.conditionType\n    );\n    this._nodesToShowInValueView = [];\n\n    this._initializeUI();\n    this._initializeWithLoginStatus();\n  }\n\n  /**\n   * Initializes the interface after ensuring login status is fetched.\n   */\n  private async _initializeWithLoginStatus(): Promise<void> {\n    await storeManager.fetchLoginStatus();\n    this._renderInitialColumn();\n  }\n\n  // \n  // Public API\n  // \n  /**\n   * Captures a snapshot of the current selection state for later restoration.\n   *\n   * This creates a backup of the current selections so that if the user clicks\n   * \"Cancel\" during editing, we can restore the interface to this exact state.\n   * Called automatically when the user begins editing (clicks the pencil icon).\n   */\n  keepLastValues(): void {\n    this._lastValueViews = this.conditionItemValueViews;\n  }\n\n  /**\n   * Reverts all selections back to the previously saved state.\n   *\n   * This method:\n   * 1. Clears all current selection states in the data tree\n   * 2. Restores the selections from the saved snapshot\n   * 3. Updates parent/child relationships to maintain consistency\n   * 4. Refreshes the UI to reflect the restored state\n   *\n   * Called when the user clicks \"Cancel\" to abandon their changes.\n   */\n  restore(): void {\n    this._dataProcessor.resetAllCheckStates(this._data);\n    this._dataProcessor.restoreCheckedStates(\n      this._data,\n      this._lastValueViews,\n      (node, checked) =>\n        this._checkStateManager.updateChildrenCheckState(node, checked),\n      (node, checked) =>\n        this._checkStateManager.updateParentCheckState(node, checked)\n    );\n    this._updateUI();\n  }\n\n  /**\n   * Determines whether the current selection state is valid for saving.\n   *\n   * A valid selection requires at least one dataset to be selected.\n   * This is used to enable/disable the \"Apply\" button and show validation messages.\n   *\n   * @returns true if one or more datasets are selected, false if none are selected\n   */\n  get isValid(): boolean {\n    return this.conditionItemValueViews.length > 0;\n  }\n\n  /**\n   * Sets up the basic DOM structure for the column-based interface.\n   *\n   * Creates:\n   * - Header with condition type (e.g., \"Select dataset\")\n   * - Body container for the scrollable content\n   * - Columns container that will hold the individual column elements\n   *\n   * Also stores references to key DOM elements for later use.\n   */\n  private _initializeUI(): void {\n    this.createSectionEl('columns-editor-view', () => [\n      createEl('header', { text: `Select ${this.conditionType}` }),\n      createEl('div', {\n        class: 'body',\n        children: [createEl('div', { class: 'columns' })],\n      }),\n    ]);\n\n    // Use selectRequired for safer DOM element retrieval\n    this._columns = selectRequired<HTMLDivElement>(\n      this.bodyEl,\n      ':scope > .columns',\n      'ConditionValueEditorDatasetColumns._initializeUI'\n    );\n  }\n\n  /**\n   * Displays the first column containing the top-level dataset categories.\n   *\n   * This is called during initialization to show the root categories\n   * (e.g., \"Genomic Studies\", \"Clinical Data\") that users can navigate into.\n   */\n  private _renderInitialColumn(): void {\n    this._drawColumn();\n  }\n\n  /**\n   * Creates and displays a new column showing the children of a selected item.\n   *\n   * This method:\n   * 1. Uses the provided login status (for restricted dataset handling)\n   * 2. Retrieves child items for the specified parent (or root if no parent)\n   * 3. Creates a new column DOM element\n   * 4. Renders the child items as a list with checkboxes and navigation arrows\n   * 5. Attaches event listeners for user interactions\n   * 6. Updates the overall UI state\n   *\n   * @param parentId - ID of the parent node whose children should be displayed.\n   *                   If undefined, shows root-level categories.\n   * @param userIsLoggedIn - Whether the current user is authenticated.\n   *                         If undefined, fetches from store manager.\n   */\n  private async _drawColumn(\n    parentId?: string,\n    userIsLoggedIn?: boolean\n  ): Promise<void> {\n    const loginStatus: boolean =\n      userIsLoggedIn ?? storeManager.getData('isLogin');\n\n    const childItems = await this._getChildItems(parentId);\n\n    const newColumnElement = this._createColumnElement();\n    if (!this._columns) throw new Error('Columns container not found');\n    this._columns.append(newColumnElement);\n\n    newColumnElement.append(this._generateColumnList(childItems, loginStatus));\n\n    this._attachColumnEventListeners(newColumnElement, loginStatus);\n    this._updateUI();\n    this._scrollToRevealNewColumn();\n  }\n\n  // \n  // DOM Generation and Rendering (delegated to DatasetColumnRenderer)\n  // \n  /**\n   * Creates a list of selectable items for display in a column.\n   *\n   * Each item in the list includes:\n   * - A checkbox for selection (or lock icon for restricted datasets)\n   * - The item label (dataset name or category name)\n   * - An arrow for navigation if the item has children\n   *\n   * @param hierarchyItems - Array of dataset nodes to display in this column\n   * @param userIsLoggedIn - Whether the current user is authenticated (affects restricted dataset display)\n   * @returns HTML unordered list element containing all the selectable items\n   */\n  private _generateColumnList(\n    hierarchyItems: HierarchyNode<UiNode>[],\n    userIsLoggedIn: boolean\n  ): HTMLUListElement {\n    return this._renderer.generateColumnList(\n      hierarchyItems,\n      userIsLoggedIn,\n      this.conditionType\n    );\n  }\n\n  /**\n   * Creates a new column DOM element with appropriate attributes.\n   * @returns The created column element\n   */\n  private _createColumnElement(): HTMLDivElement {\n    if (!this._columns) throw new Error('Columns container not found');\n    return this._renderer.createColumnElement(this._columns);\n  }\n\n  /**\n   * Adds a column prompting the user to login for JGAD datasets.\n   */\n  private async _addLoginPromptColumn(): Promise<void> {\n    if (!this._columns) throw new Error('columns not mounted');\n    await this._renderer.addLoginPromptColumn(this._columns);\n  }\n\n  // \n  // Event Handling (delegated to DatasetColumnEventHandler)\n  // \n\n  /**\n   * Attaches event listeners to the column element.\n   * @param column - The column element to attach listeners to\n   * @param userIsLoggedIn - Whether the user is logged in\n   */\n  private _attachColumnEventListeners(\n    column: HTMLElement,\n    userIsLoggedIn: boolean\n  ): void {\n    this._eventHandler.attachCheckboxEventListeners(\n      column,\n      this._data,\n      (node, checked) =>\n        this._checkStateManager.updateChildrenCheckState(node, checked),\n      (node, checked) =>\n        this._checkStateManager.updateParentCheckState(node, checked),\n      () => this._updateUI()\n    );\n    this._eventHandler.attachArrowClickEventListeners(\n      column,\n      userIsLoggedIn,\n      (listItem, target, userIsLoggedIn) =>\n        this._handleArrowClick(listItem, target, userIsLoggedIn)\n    );\n  }\n\n  /**\n   * Handles arrow click events for navigation.\n   * @param listItem - The clicked list item\n   * @param target - The arrow element that was clicked\n   * @param userIsLoggedIn - Whether the user is logged in\n   */\n  private _handleArrowClick(\n    listItem: Element,\n    target: HTMLElement,\n    userIsLoggedIn: boolean\n  ): void {\n    this._eventHandler.clearSelectionAndSubColumns(listItem);\n    listItem.classList.add('-selected');\n    this._drawColumn(target.dataset.id, userIsLoggedIn);\n\n    if (target.dataset.value === 'jga_wgs' && !userIsLoggedIn) {\n      this._addLoginPromptColumn();\n    }\n  }\n\n  // \n  // State Management (delegated to DatasetCheckStateManager)\n  // \n\n  /**\n   * Updates the entire UI including DOM elements and value views.\n   */\n  private _updateUI(): void {\n    if (this._columns) {\n      this._checkStateManager.updateCheckboxStatesInDOM(\n        this._columns,\n        this._data\n      );\n    }\n    this._syncValueViewsWithSelection();\n    this.conditionValues.update(this.isValid);\n  }\n\n  // \n  // Value Display Logic (delegated to DatasetValueViewManager)\n  // \n\n  /**\n   * Processes nodes to determine which should be shown in value view.\n   */\n  private _processNodesToShowInValueView(): void {\n    this._nodesToShowInValueView = this._valueViewManager.getOptimalNodesToShow(\n      this._data\n    );\n  }\n\n  /**\n   * Scrolls to reveal the newly added column if necessary.\n   */\n  private _scrollToRevealNewColumn(): void {\n    if (!this.bodyEl) return;\n    const left = this.bodyEl.scrollWidth - this.bodyEl.clientWidth;\n    if (left > 0) {\n      this.bodyEl.scrollTo({\n        top: 0,\n        left: left,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  /**\n   * Retrieves child items for the specified parent node in the hierarchy.\n   * Returns root-level children if no parent ID is provided.\n   * @param parentId - ID of the parent node to get children for, or undefined for root level\n   * @returns Promise resolving to array of child hierarchy nodes\n   */\n  private _getChildItems(parentId?: string): Promise<HierarchyNode<UiNode>[]> {\n    return new Promise((resolve) => {\n      if (!parentId) {\n        resolve(this._data.children || []);\n        return;\n      }\n\n      const parentNode = this._data.find((datum) => datum.data.id === parentId);\n      resolve(parentNode?.children || []);\n    });\n  }\n\n  /**\n   * Synchronizes the value views with the current selection state.\n   * Processes nodes that should be shown, clears existing views, and adds\n   * new value views with appropriate labels and paths.\n   */\n  private _syncValueViewsWithSelection(): void {\n    this._processNodesToShowInValueView();\n\n    // Clear all existing condition value views\n    this.conditionItemValueViews.forEach((view) => view.remove());\n\n    for (const selectedNode of this._nodesToShowInValueView) {\n      this.addValueView(\n        selectedNode.data.value || '',\n        this._valueViewManager.getLabelWithPath(selectedNode, this._data)\n      );\n    }\n  }\n}\n","import { ConditionValueEditor } from './ConditionValueEditor';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport { ConditionDiseaseSearch } from '../../../components/ConditionDiseaseSearch/ConditionDiseaseSearch.js';\nimport { createEl } from '../../../utils/dom/createEl';\n\ninterface DiseaseData {\n  id: string | null;\n  label: string | null;\n}\n\ninterface DiseaseSelectionEventDetail {\n  id: string;\n  label: string;\n}\n\n/** Disease Search editing screen */\nexport class ConditionValueEditorDisease extends ConditionValueEditor {\n  private _data: DiseaseData = { id: null, label: null };\n  private _lastValues: DiseaseData = { id: null, label: null };\n  private _conditionElem!: ConditionDiseaseSearch;\n  constructor(valuesView: ConditionValues, conditionView: ConditionItemView) {\n    super(valuesView, conditionView);\n\n    this._initializeElements();\n    this._setupEventListeners();\n  }\n\n  // \n  // Initialization\n  // \n  private _initializeElements(): void {\n    this.createSectionEl('text-field-editor-view', () => [\n      createEl('header', { text: `Select ${this.conditionType}` }),\n      createEl('div', { class: 'body' }),\n    ]);\n\n    this._conditionElem =\n      this.bodyEl.querySelector('condition-disease-search') ||\n      new ConditionDiseaseSearch(this.bodyEl);\n  }\n\n  private _setupEventListeners(): void {\n    this._conditionElem.addEventListener('disease-selected', (e: Event) => {\n      this._handleDiseaseSelection(e);\n    });\n  }\n\n  private _handleDiseaseSelection(e: Event): void {\n    e.stopPropagation();\n    const customEvent = e as CustomEvent<DiseaseSelectionEventDetail>;\n    const { id, label } = customEvent.detail;\n\n    if (id) {\n      this._selectDisease({ id, label });\n    } else {\n      this._clearSelection();\n    }\n  }\n\n  // \n  // Public API\n  // \n  keepLastValues(): void {\n    this._lastValues = { ...this._data };\n  }\n\n  /** Restore the value before editing if cancel button is pressed */\n  restore(): void {\n    this._data = { ...this._lastValues };\n\n    if (this._lastValues.id && this._lastValues.label) {\n      this.addValueView(this._lastValues.id, this._lastValues.label, true);\n    }\n\n    this._update();\n  }\n\n  // \n  // Private Methods\n  // \n  private _selectDisease(diseaseData: DiseaseData): void {\n    this._data = { ...diseaseData };\n\n    if (this._data.id && this._data.label) {\n      this.addValueView(this._data.id, this._data.label, true);\n    }\n\n    this._update();\n  }\n\n  private _clearSelection(): void {\n    if (this._data.id) {\n      this.removeValueView(this._data.id);\n    }\n    this._data = { id: null, label: null };\n    this._update();\n  }\n\n  private _update(): void {\n    this.conditionValues.update(this.isValid);\n  }\n\n  // \n  // Validation\n  // \n  get isValid(): boolean {\n    return !!this._data.id;\n  }\n}\n","import { createEl } from '../../../utils/dom/createEl';\nimport { selectOrNull } from '../../../utils/dom/select';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport { ConditionValueEditor } from './ConditionValueEditor';\nimport type ConditionValues from '../ConditionValues';\nimport '../../../components/RangeSliderView.js';\nimport {\n  MODE,\n  type FrequencyCountValueView,\n} from '../../../components/FrequencyCountValueView';\n\nexport type RangeSliderData = {\n  from?: number;\n  to?: number;\n  invert?: boolean;\n};\n\ntype ModeType = (typeof MODE)[keyof typeof MODE];\ntype CountMode = Exclude<ModeType, 'frequency'>;\n\ntype ConditionState = {\n  frequency: FrequencyCondition;\n} & CountBuckets;\ntype CountBuckets = Record<CountMode, CountCondition>;\n\nexport interface FrequencyCondition {\n  from: number;\n  to: number;\n  invert: boolean;\n}\n\ninterface CountCondition {\n  from: number | null;\n  to: number | null;\n}\n\n// Interface for range selector custom element\ninterface RangeSliderElement extends HTMLElement {\n  searchType: string;\n  sliderStep: number;\n  inputStep: number;\n}\n\nconst SELECTORS = {\n  SWITCHING: ':scope > .switching',\n  FREQUENCY_COUNT_VIEW: 'frequency-count-value-view',\n  RANGE_SELECTOR: '.range-selector-view',\n  RADIO_INPUT: ':scope > label > input',\n  FILTERED_CHECKBOX: ':scope > .filtered > label > input',\n} as const;\n\n/**\n * ConditionState value editor for frequency and count filtering\n * Provides UI controls for setting frequency ranges and count ranges for variant filtering\n */\nexport class ConditionValueEditorFrequencyCount extends ConditionValueEditor {\n  _condition: ConditionState;\n  _mode: ModeType;\n  _rangeSelectorView: RangeSliderElement | null = null;\n  _filtered: HTMLInputElement | null = null;\n  _lastValue: FrequencyCondition | CountCondition | null = null;\n  private static _idCounter = 0;\n  private static readonly DEFAULT_CONDITION: ConditionState = {\n    frequency: { from: 0, to: 1, invert: false },\n    count: { from: null, to: null },\n    aac: { from: null, to: null },\n    arc: { from: null, to: null },\n    hac: { from: null, to: null },\n  };\n  private readonly _radioGroupName = `freqcount-${ConditionValueEditorFrequencyCount._idCounter++}`;\n\n  /**\n   * Creates a new frequency/count condition editor\n   * @param valuesView - The parent values view component\n   * @param conditionView - The parent condition view component\n   */\n  constructor(valuesView: ConditionValues, conditionView: ConditionItemView) {\n    super(valuesView, conditionView);\n\n    this._condition = {\n      frequency: {\n        ...ConditionValueEditorFrequencyCount.DEFAULT_CONDITION.frequency,\n      },\n      count: { ...ConditionValueEditorFrequencyCount.DEFAULT_CONDITION.count },\n      aac: {\n        ...ConditionValueEditorFrequencyCount.DEFAULT_CONDITION.aac,\n      },\n      arc: {\n        ...ConditionValueEditorFrequencyCount.DEFAULT_CONDITION.arc,\n      },\n      hac: {\n        ...ConditionValueEditorFrequencyCount.DEFAULT_CONDITION.hac,\n      },\n    };\n    this._mode =\n      this.conditionType === 'genotype' ? MODE.alt_alt : MODE.frequency;\n\n    this._initializeComponent();\n    this._setupEventListeners();\n    this._observeValueChanges();\n    this._updateErrorMessageVisibility();\n\n    // Set initial classification text based on default mode\n    this.conditionItemView.updateClassificationText(\n      this._getModeDisplayText(this._mode)\n    );\n  }\n\n  // \n  // Public API\n  // \n  /**\n   * Stores the current values for potential restoration\n   */\n  keepLastValues(): void {\n    const currentCondition = this._condition[this._mode];\n    if (currentCondition) {\n      this._lastValue = { ...currentCondition };\n    }\n  }\n\n  /**\n   * Restores previously stored values\n   */\n  restore(): void {\n    if (this._lastValue && this._condition[this._mode]) {\n      if (this._mode === MODE.frequency) {\n        this._condition[this._mode] = this._lastValue as FrequencyCondition;\n      } else {\n        this._condition[this._mode] = this._lastValue as CountCondition;\n      }\n      this._update();\n    }\n  }\n\n  /**\n   * Gets the validation state of the current condition\n   * Validates that:\n   * - At least one value (from or to) is not null\n   * - For count modes: from is not greater than to\n   * @returns True if the condition is valid\n   */\n  get isValid(): boolean {\n    const currentCondition = this._condition[this._mode];\n    if (!currentCondition) {\n      return false;\n    }\n\n    // Check if at least one value is not null\n    const hasValue = Object.values(currentCondition).some(\n      (value) => value !== null\n    );\n    if (!hasValue) {\n      return false;\n    }\n\n    // For count modes, validate that from <= to\n    if (this._mode !== MODE.frequency) {\n      const countCondition = currentCondition as CountCondition;\n      if (\n        countCondition.from !== null &&\n        countCondition.to !== null &&\n        countCondition.from > countCondition.to\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Observes changes in the values view and triggers updates\n   */\n  private _observeValueChanges(): void {\n    const observer = new MutationObserver(() => {\n      window.requestAnimationFrame(() => this._update());\n    });\n    observer.observe(this.valuesContainerEl, {\n      attributes: false,\n      childList: true,\n      subtree: false,\n    });\n  }\n\n  // \n  // DOM Generation\n  // \n  /** Initializes the component's HTML structure */\n  private _initializeComponent(): void {\n    this.createSectionEl('frequency-count-editor-view', () => [\n      createEl('header', { text: 'Specify range' }),\n      createEl('div', {\n        class: 'body',\n        children: this._createBodyElements(this._radioGroupName),\n      }),\n    ]);\n\n    this._setupRangeSlider();\n  }\n\n  /**\n   * Creates the body elements for the component\n   * @param name - Unique name for radio button grouping\n   * @returns Array of HTML elements\n   */\n  private _createBodyElements(name: string): HTMLElement[] {\n    if (this.conditionType === 'genotype') {\n      return this._createGenotypeElements(name);\n    }\n    return this._createDatasetElements(name);\n  }\n\n  /**\n   * Creates elements for dataset condition type\n   * @param name - Unique name for radio button grouping\n   * @returns Array of HTML elements\n   */\n  private _createDatasetElements(name: string): HTMLElement[] {\n    const frequencySection = this._createFrequencySection(name);\n    const countSection = this._createCountSection(name, MODE.count, 'Count');\n    const filteredSection = this._createFilteredSection();\n\n    return [frequencySection, countSection, filteredSection];\n  }\n\n  /**\n   * Creates elements for genotype dataset condition type\n   * @param name - Unique name for radio button grouping\n   * @returns Array of HTML elements\n   */\n  private _createGenotypeElements(name: string): HTMLElement[] {\n    const genotypeOptions = [\n      { mode: MODE.alt_alt, label: 'Alt/Alt: Number of homozygous genotypes' },\n      {\n        mode: MODE.alt_ref,\n        label: 'Alt/Ref: Number of heterozygous genotypes',\n      },\n      {\n        mode: MODE.hemi_alt,\n        label: 'Hemi_Alt: Number of hemizygous genotypes',\n      },\n    ];\n\n    const sections = genotypeOptions.map((option) =>\n      this._createCountSection(name, option.mode, option.label)\n    );\n\n    const filteredSection = this._createFilteredSection();\n    return [...sections, filteredSection];\n  }\n\n  /**\n   * Creates a frequency section with range slider\n   */\n  private _createFrequencySection(name: string): HTMLElement {\n    return createEl('section', {\n      class: ['frequency', 'switching'],\n      dataset: { mode: MODE.frequency },\n      children: [\n        createEl('label', {\n          children: [\n            createEl('input', {\n              attrs: {\n                type: 'radio',\n                name,\n                value: MODE.frequency,\n              },\n            }),\n            createEl('span', { text: 'Frequency' }),\n          ],\n        }),\n        createEl('div', { class: ['range-selector-view', 'input'] }),\n      ],\n    });\n  }\n\n  /**\n   * Creates a count input section\n   * @param name - Radio button group name\n   * @param mode - Mode value for the section\n   * @param label - Display label for the section\n   * @returns HTML element for a single count section\n   */\n  private _createCountSection(\n    name: string,\n    mode: string,\n    label: string\n  ): HTMLElement {\n    const shouldShowError =\n      mode === this._mode && this._isCurrentConditionInvalid();\n\n    return createEl('section', {\n      class: ['count', 'switching'],\n      dataset: { mode },\n      children: [\n        createEl('label', {\n          children: [\n            createEl('input', {\n              attrs: {\n                type: 'radio',\n                name,\n                value: mode,\n              },\n            }),\n            createEl('span', { text: label }),\n          ],\n        }),\n        createEl('div', {\n          class: 'input-container',\n          children: [\n            createEl('div', {\n              class: 'input',\n              children: [\n                createEl('input', {\n                  class: 'from',\n                  attrs: {\n                    min: '0',\n                    step: '1',\n                    type: 'number',\n                  },\n                }),\n                ' ~ ',\n                createEl('input', {\n                  class: 'to',\n                  attrs: {\n                    min: '0',\n                    step: '1',\n                    type: 'number',\n                  },\n                }),\n              ],\n            }),\n            createEl('div', {\n              class: ['messages-view', ...(shouldShowError ? [] : ['-hidden'])],\n              children: [\n                createEl('div', {\n                  class: ['message', '-error'],\n                  text: 'The maximum and minimum values are invalid.',\n                }),\n              ],\n            }),\n          ],\n        }),\n      ],\n    });\n  }\n\n  /**\n   * Creates the filtered checkbox section\n   * @returns HTML element for the filtered section\n   */\n  private _createFilteredSection(): HTMLElement {\n    const filteredCheckboxId = `${this._radioGroupName}-filtered`;\n\n    return createEl('section', {\n      class: 'filtered',\n      children: [\n        createEl('label', {\n          attrs: {\n            for: filteredCheckboxId,\n          },\n          children: [\n            createEl('input', {\n              attrs: {\n                type: 'checkbox',\n                checked: 'checked',\n                id: filteredCheckboxId,\n              },\n            }),\n            createEl('span', { text: 'Exclude filtered out variants' }),\n          ],\n        }),\n      ],\n    });\n  }\n\n  /**\n   * Sets up the range slider component\n   */\n  private _setupRangeSlider(): void {\n    const rangeSlider = createEl('range-slider', {\n      domProps: {\n        searchType: 'advanced',\n        sliderStep: 0.01,\n        inputStep: 0.05,\n      },\n      attrs: {\n        value1: this._condition.frequency.from.toString(),\n        value2: this._condition.frequency.to.toString(),\n        invert: this._condition.frequency.invert.toString(), // \"true\" or \"false\"\n      },\n    });\n\n    // Listen for changes from the range slider and update condition\n    rangeSlider.addEventListener(\n      'range-changed',\n      (e: CustomEvent<RangeSliderData>) => {\n        e.stopPropagation();\n        this.changeParameter(e.detail);\n      }\n    );\n\n    const rangeContainer = selectOrNull<HTMLElement>(\n      this.sectionEl,\n      SELECTORS.RANGE_SELECTOR\n    );\n    rangeContainer?.appendChild(rangeSlider);\n    this._rangeSelectorView = rangeSlider;\n\n    // Force initial state sync after DOM insertion\n    requestAnimationFrame(() => {\n      if (this._rangeSelectorView) {\n        // Ensure the checkbox reflects the current state\n        const shadowHost = this._rangeSelectorView as HTMLElement & {\n          shadowRoot?: ShadowRoot;\n        };\n        if (shadowHost.shadowRoot) {\n          const checkboxInShadow = selectOrNull<HTMLInputElement>(\n            shadowHost.shadowRoot,\n            '.invert'\n          );\n          if (checkboxInShadow) {\n            checkboxInShadow.checked = this._condition.frequency.invert;\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Sets up all event listeners for the component\n   */\n  private _setupEventListeners(): void {\n    this._setupModeToggleListeners();\n    this._setupCountInputListeners();\n    this._setupFilteredCheckboxListener();\n  }\n\n  /**\n   * Sets up event listeners for mode toggle radio buttons\n   */\n  private _setupModeToggleListeners(): void {\n    const switchingElements = this.bodyEl.querySelectorAll(SELECTORS.SWITCHING);\n\n    for (const el of switchingElements) {\n      const input = selectOrNull<HTMLInputElement>(el, SELECTORS.RADIO_INPUT);\n      if (!input) continue;\n\n      input.addEventListener('change', (e) => {\n        this._handleModeChange(e, switchingElements);\n      });\n\n      // Set default selection based on condition type\n      const defaultMode =\n        this.conditionType === 'genotype' ? MODE.alt_alt : MODE.frequency;\n      if (input.value === defaultMode) {\n        requestAnimationFrame(() => {\n          input.dispatchEvent(new Event('change'));\n          input.checked = true;\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles mode change events\n   * @param e - Change event\n   * @param switchingElements - All switching elements\n   */\n  private _handleModeChange(\n    e: Event,\n    switchingElements: NodeListOf<Element>\n  ): void {\n    const target = e.target as HTMLInputElement;\n\n    // Update visual state of switching elements\n    for (const el of switchingElements) {\n      const htmlEl = el as HTMLElement;\n      if (htmlEl.dataset.mode === target.value) {\n        htmlEl.classList.add('-current');\n      } else {\n        htmlEl.classList.remove('-current');\n      }\n    }\n\n    this._mode = target.value as ModeType;\n\n    // Update parent classification text based on selected mode\n    this.conditionItemView.updateClassificationText(\n      this._getModeDisplayText(this._mode)\n    );\n\n    this._updateErrorMessageVisibility();\n    this._update();\n  }\n\n  /**\n   * Sets up event listeners for count input fields\n   */\n  private _setupCountInputListeners(): void {\n    const switchingElements = this.bodyEl.querySelectorAll(SELECTORS.SWITCHING);\n\n    // Set up input listeners for all switching sections\n    switchingElements.forEach((element) => {\n      const inputs = element.querySelectorAll(':scope .input > input');\n      inputs.forEach((input) => {\n        input.addEventListener('change', (e) => {\n          this._handleCountInputChange(e);\n        });\n        // Also listen to input event for real-time validation\n        input.addEventListener('input', (e) => {\n          this._handleCountInputChange(e);\n        });\n      });\n    });\n  }\n\n  /**\n   * Handles count input change events\n   * For count modes (non-frequency), ensures:\n   * - Negative values are converted to 0\n   * - Decimal values are truncated to integers\n   * @param e - Change event from count input\n   */\n  private _handleCountInputChange(e: Event): void {\n    const target = e.target as HTMLInputElement;\n    const key = target.className as keyof CountCondition;\n    const currentCondition = this._condition[this._mode] as CountCondition;\n    if (currentCondition && key in currentCondition) {\n      const value = target.value.trim();\n\n      if (value === '') {\n        currentCondition[key] = null;\n      } else {\n        let numValue = Number(value);\n\n        // For count modes (not frequency), enforce integer constraints\n        if (this._mode !== MODE.frequency) {\n          // Convert negative values to 0\n          if (numValue < 0) {\n            numValue = 0;\n          }\n          // Truncate decimal values to integers (floor)\n          numValue = Math.floor(numValue);\n\n          // Update the input field to reflect the corrected value\n          target.value = numValue.toString();\n        }\n\n        currentCondition[key] = numValue;\n      }\n\n      this._updateErrorMessageVisibility();\n      this._update();\n    }\n  }\n\n  /**\n   * Checks if the current condition has an invalid range (from > to)\n   * This is specifically for showing error messages to the user\n   * @returns True if the range is invalid (from > to for count modes)\n   */\n  private _isCurrentConditionInvalid(): boolean {\n    // Only validate count modes, not frequency mode\n    if (this._mode === MODE.frequency) {\n      return false;\n    }\n\n    const currentCondition = this._condition[this._mode] as CountCondition;\n    return (\n      currentCondition.from !== null &&\n      currentCondition.to !== null &&\n      currentCondition.from > currentCondition.to\n    );\n  }\n\n  /**\n   * Updates error message visibility by re-rendering the section\n   */\n  private _updateErrorMessageVisibility(): void {\n    const isInvalid = this._isCurrentConditionInvalid();\n\n    // Find the current mode's section and update error message visibility\n    const currentSection = this.bodyEl.querySelector(\n      `[data-mode=\"${this._mode}\"]`\n    );\n    if (currentSection) {\n      const messagesView = currentSection.querySelector(\n        '.messages-view'\n      ) as HTMLElement;\n      if (messagesView) {\n        if (isInvalid) {\n          messagesView.classList.remove('-hidden');\n        } else {\n          messagesView.classList.add('-hidden');\n        }\n      }\n    }\n  }\n\n  /**\n   * Sets up event listener for filtered checkbox\n   */\n  private _setupFilteredCheckboxListener(): void {\n    this._filtered = selectOrNull<HTMLInputElement>(\n      this.bodyEl,\n      SELECTORS.FILTERED_CHECKBOX\n    );\n    if (this._filtered) {\n      this._filtered.addEventListener('change', () => {\n        this._update();\n      });\n      this._filtered.dispatchEvent(new Event('change'));\n    }\n  }\n\n  /**\n   * Updates the condition parameters based on range slider changes\n   * @param newCondition - New condition values from range slider\n   */\n  changeParameter(newCondition: RangeSliderData): void {\n    if (!this._rangeSelectorView) return;\n\n    if (newCondition.from !== undefined) {\n      this._condition.frequency.from = newCondition.from;\n    }\n    if (newCondition.to !== undefined) {\n      this._condition.frequency.to = newCondition.to;\n    }\n    if (newCondition.invert !== undefined) {\n      // Convert string/boolean to boolean for consistent internal state\n      this._condition.frequency.invert =\n        typeof newCondition.invert === 'string'\n          ? newCondition.invert === '1' || newCondition.invert === 'true'\n          : Boolean(newCondition.invert);\n    }\n    this._update();\n  }\n\n  /**\n   * Updates the component state and validates conditions\n   */\n  private _update(): void {\n    this._applyConditionToAllViews();\n    this.conditionValues.update(this.isValid);\n  }\n\n  /**\n   * Applies current condition values to frequency count views\n   */\n  private _applyConditionToAllViews(): void {\n    this.valuesContainerEl\n      .querySelectorAll(':scope > condition-item-value-view')\n      .forEach((view) => {\n        const freqCountView = this._getFrequencyCountView(view);\n        if (!freqCountView) return;\n\n        this._updateFrequencyCountView(freqCountView);\n      });\n  }\n\n  /**\n   * Gets the frequency count view from a condition item value view\n   * @param view - Parent view element\n   * @returns Frequency count view element or null\n   */\n  private _getFrequencyCountView(\n    view: Element\n  ): FrequencyCountValueView | null {\n    const viewWithShadow = view as Element & { shadowRoot?: ShadowRoot };\n    const shadowRoot = viewWithShadow.shadowRoot;\n    if (!shadowRoot) return null;\n\n    const freqCountView = selectOrNull<FrequencyCountValueView>(\n      shadowRoot,\n      SELECTORS.FREQUENCY_COUNT_VIEW\n    );\n    return freqCountView && typeof freqCountView.setValues === 'function'\n      ? freqCountView\n      : null;\n  }\n\n  /**\n   * Updates a frequency count view with current condition values\n   * @param freqCountView - The frequency count view to update\n   */\n  private _updateFrequencyCountView(\n    freqCountView: FrequencyCountValueView\n  ): void {\n    const currentCondition = this._condition[this._mode];\n    const invertValue =\n      this._mode === MODE.frequency ? this._condition.frequency.invert : false;\n    const isFiltered = this._filtered?.checked ?? false;\n\n    // Format frequency values to always show at least one decimal place\n    const fromValue =\n      this._mode === MODE.frequency\n        ? this._formatFrequencyValue(currentCondition.from as number)\n        : currentCondition.from;\n    const toValue =\n      this._mode === MODE.frequency\n        ? this._formatFrequencyValue(currentCondition.to as number)\n        : currentCondition.to;\n\n    freqCountView.setValues(\n      this.conditionType as 'dataset' | 'genotype',\n      this._mode,\n      fromValue,\n      toValue,\n      invertValue,\n      isFiltered\n    );\n\n    freqCountView.mode = this._mode;\n    freqCountView.from = fromValue;\n    // Note: Removed .update() call as it's protected and may not be needed externally\n  }\n\n  /**\n   * Formats a frequency value to ensure at least one decimal place is shown (e.g., 0.0, 1.0)\n   * @param value - The numeric frequency value\n   * @returns Formatted value (number with at least 1 decimal place)\n   */\n  private _formatFrequencyValue(value: number): number {\n    // Round to 2 decimal places to avoid floating point precision issues\n    return Math.round(value * 100) / 100;\n  }\n\n  /**\n   * Gets the display text for classification based on current mode\n   * @param mode - The mode to get display text for\n   * @returns Display text for classification\n   */\n  private _getModeDisplayText(mode: ModeType): string {\n    const displayTextMap: Record<ModeType, string> = {\n      [MODE.frequency]: 'Alternative allele frequency',\n      [MODE.count]: 'Alternative allele count',\n      [MODE.alt_alt]: 'Genotype count (Alt/Alt)',\n      [MODE.alt_ref]: 'Genotype count (Alt/Ref)',\n      [MODE.hemi_alt]: 'Genotype count (Hemi_Alt)',\n    };\n\n    return displayTextMap[mode];\n  }\n}\n","import { ConditionValueEditor } from './ConditionValueEditor';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport SearchFieldWithSuggestions from '../../../components/SearchField/suggestions/SearchFieldWithSuggestions';\nimport { API_URL } from '../../../global';\nimport { createEl } from '../../../utils/dom/createEl';\n\n/** Gene Search editing screen */\nexport class ConditionValueEditorGene extends ConditionValueEditor {\n  private _searchFieldView!: SearchFieldWithSuggestions;\n  private _value: string = '';\n  private _label: string = '';\n  private _lastValue: string = '';\n  private _lastLabel: string = '';\n\n  constructor(\n    conditionValues: ConditionValues,\n    conditionItemView: ConditionItemView\n  ) {\n    super(conditionValues, conditionItemView);\n\n    // HTML\n    this.createSectionEl('text-field-editor-view', () => [\n      createEl('header', { text: `Search for ${this.conditionType}` }),\n      createEl('div', { class: 'body' }),\n    ]);\n\n    /** @property {HTMLDivElement} _searchFieldView - CustomElement */\n    this._searchFieldView = new SearchFieldWithSuggestions(\n      'BRCA2',\n      `${API_URL}/api/search/${this.conditionType}`,\n      'term',\n      this.bodyEl,\n      {\n        valueMappings: {\n          valueKey: 'id',\n          labelKey: 'symbol',\n          aliasOfKey: 'alias_of',\n        },\n      }\n    );\n\n    this._searchFieldView.addEventListener(\n      'new-suggestion-selected',\n      (e: Event) => {\n        const customEvent = e as CustomEvent<{ id: number; label: string }>;\n        this._handleSuggestSelect(customEvent);\n      }\n    );\n  }\n\n  // \n  // Public API\n  // \n  /** Retain value when changing to edit screen */\n  keepLastValues(): void {\n    const valueView = this.valuesContainerEl.querySelector(\n      'condition-item-value-view'\n    ) as Element & { value?: string; label?: string };\n\n    this._lastValue = valueView?.value || '';\n    this._lastLabel = valueView?.label || '';\n  }\n\n  /** Restore the value before editing if cancel button is pressed */\n  restore(): void {\n    this.addValueView(this._lastValue, this._lastLabel, true);\n  }\n\n  // \n  // Private Methods\n  // \n  /** Add condition-item-value-view with selected suggestion data */\n  private _handleSuggestSelect = (\n    e: CustomEvent<{ id: number; label: string }>\n  ): void => {\n    this._value = String(e.detail.id);\n    this._label = e.detail.label;\n    this.addValueView(this._value, this._label, true, false);\n\n    // Change whether okbutton can be pressed\n    this.conditionValues.update(this.isValid);\n  };\n\n  // \n  // Validation\n  // \n  /** You can press the ok button if there is condition-item-value-view */\n  get isValid(): boolean {\n    return this.conditionItemValueViews.length > 0;\n  }\n}\n","import { storeManager } from '../../../store/StoreManager';\nimport { ConditionValueEditor } from './ConditionValueEditor';\nimport { createEl } from '../../../utils/dom/createEl';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport '../../../components/ConditionItemValueView';\n\n// ============================================================================\n// Constants\n// ============================================================================\n\nconst CHROMOSOME_OPTIONS = [\n  '',\n  ...[...Array(22)].map((_, index) => String(index + 1)),\n  'X',\n  'Y',\n  'MT',\n];\n\nconst INPUT_MODE = {\n  REGION: 'region',\n  SINGLE_POSITION: 'single_position',\n} as const;\n\nconst DEFAULT_START_POSITION = 1;\n\n// ============================================================================\n// Types\n// ============================================================================\n\ntype InputMode = (typeof INPUT_MODE)[keyof typeof INPUT_MODE];\n\ninterface KaryotypeData {\n  reference?: string;\n  chromosomes?: Record<string, ChromosomeInfo>;\n}\n\ninterface ChromosomeInfo {\n  region?: Record<string, [number, number]>;\n}\n\nexport class ConditionValueEditorLocation extends ConditionValueEditor {\n  private _singlePositionCheckbox!: HTMLInputElement;\n  private _chromosomeSelect!: HTMLSelectElement;\n  private _startPositionInput!: HTMLInputElement;\n  private _endPositionInput!: HTMLInputElement;\n  private _positionInputContainer!: HTMLSpanElement;\n\n  // State\n  /** Reference genome karyotype data for chromosome length validation */\n  private _karyotypeData: KaryotypeData | null = null;\n\n  /** Saved state for restoration on cancel */\n  private _savedState: {\n    chromosome: string;\n    startPosition: string;\n    endPosition: string;\n    isSinglePosition: boolean;\n  } | null = null;\n\n  constructor(\n    conditionValues: ConditionValues,\n    conditionItemView: ConditionItemView\n  ) {\n    super(conditionValues, conditionItemView);\n\n    this._buildUI();\n    this._loadKaryotypeData();\n    this._attachEventListeners();\n    this._initializeFromExistingValue();\n  }\n\n  // \n  // Public API\n  // \n\n  /** Preserve current state before editing */\n  keepLastValues(): void {\n    this._savedState = {\n      chromosome: this._chromosomeSelect.value,\n      startPosition: this._startPositionInput.value,\n      endPosition: this._endPositionInput.value,\n      isSinglePosition: this._singlePositionCheckbox.checked,\n    };\n  }\n\n  /** Restore UI state from saved state (on cancel) */\n  restore(): void {\n    if (!this._savedState) {\n      // No saved state, fallback to loading from value views\n      this._loadFromValueViews();\n      this._updateValueAndValidation();\n      return;\n    }\n\n    // Restore from saved state\n    this._chromosomeSelect.value = this._savedState.chromosome;\n    this._startPositionInput.value = this._savedState.startPosition;\n    this._endPositionInput.value = this._savedState.endPosition;\n    this._singlePositionCheckbox.checked = this._savedState.isSinglePosition;\n\n    // Update UI mode\n    this._positionInputContainer.dataset.type = this._savedState\n      .isSinglePosition\n      ? INPUT_MODE.SINGLE_POSITION\n      : INPUT_MODE.REGION;\n\n    // Update position constraints based on chromosome\n    const maxPosition = this._getChromosomeMaxPosition();\n    if (maxPosition) {\n      this._updatePositionConstraints(maxPosition);\n    }\n\n    this._updateValueAndValidation();\n  }\n\n  /** Check if current input represents a valid genomic location */\n  get isValid(): boolean {\n    if (this._chromosomeSelect.value === '') return false;\n\n    const mode = this._positionInputContainer.dataset.type as InputMode;\n\n    if (mode === INPUT_MODE.REGION) {\n      return this._isValidRegion();\n    }\n\n    if (mode === INPUT_MODE.SINGLE_POSITION) {\n      return this._isValidSinglePosition();\n    }\n\n    return false;\n  }\n\n  // \n  // UI Construction\n  // \n\n  /** Build the complete editor UI structure */\n  private _buildUI(): void {\n    const modeToggleRow = this._createModeToggleRow();\n    const positionInputRow = this._createPositionInputRow();\n\n    this.createSectionEl('location-editor-view', [\n      createEl('header', { text: `Set ${this.conditionType}` }),\n      createEl('div', {\n        class: 'body',\n        children: [modeToggleRow, positionInputRow],\n      }),\n    ]);\n  }\n\n  /** Create the row with single position checkbox toggle */\n  private _createModeToggleRow(): HTMLDivElement {\n    return createEl('div', {\n      class: 'row',\n      children: [\n        createEl('label', {\n          children: [\n            (this._singlePositionCheckbox = createEl('input', {\n              attrs: {\n                type: 'checkbox',\n                name: 'range-or-position',\n                value: INPUT_MODE.SINGLE_POSITION,\n              },\n            })),\n            ' Single position',\n          ],\n        }),\n      ],\n    });\n  }\n\n  /** Create the row with chromosome and position inputs */\n  private _createPositionInputRow(): HTMLDivElement {\n    return createEl('div', {\n      class: 'row',\n      children: [\n        createEl('label', {\n          class: 'chromosome',\n          children: [\n            createEl('span', { class: 'label', text: 'Chr.' }),\n            createEl('span', {\n              class: 'form',\n              children: [\n                (this._chromosomeSelect = createEl('select', {\n                  children: CHROMOSOME_OPTIONS.map((value) =>\n                    createEl('option', { attrs: { value }, text: value })\n                  ),\n                })),\n              ],\n            }),\n          ],\n        }),\n        createEl('span', { class: 'label', text: ':' }),\n        createEl('label', {\n          class: 'position',\n          children: [this._createPositionInputContainer()],\n        }),\n      ],\n    });\n  }\n\n  /** Create container with start/end position inputs */\n  private _createPositionInputContainer(): HTMLSpanElement {\n    this._positionInputContainer = createEl('span', {\n      class: ['form', 'range-inputs-view'],\n      dataset: { type: INPUT_MODE.REGION },\n      children: [\n        (this._startPositionInput = createEl('input', {\n          class: 'start',\n          attrs: { type: 'number', min: String(DEFAULT_START_POSITION) },\n        })),\n        createEl('span', { class: 'line' }),\n        (this._endPositionInput = createEl('input', {\n          class: 'end',\n          attrs: { type: 'number', min: String(DEFAULT_START_POSITION) },\n        })),\n      ],\n    });\n\n    return this._positionInputContainer;\n  }\n\n  // \n  // Event Handling\n  // \n\n  /** Attach all event listeners to UI elements */\n  private _attachEventListeners(): void {\n    // Handle toggle between region and single position modes\n    this._singlePositionCheckbox.addEventListener('change', () => {\n      const mode = this._singlePositionCheckbox.checked\n        ? INPUT_MODE.SINGLE_POSITION\n        : INPUT_MODE.REGION;\n\n      this._positionInputContainer.dataset.type = mode;\n      this._updateValueAndValidation();\n    });\n\n    // Handle chromosome selection change and update position constraints\n    this._chromosomeSelect.addEventListener('change', () => {\n      const maxPosition = this._getChromosomeMaxPosition();\n\n      if (maxPosition) {\n        this._updatePositionConstraints(maxPosition);\n        this._enforcePositionLimits(maxPosition);\n      }\n\n      this._updateValueAndValidation();\n    });\n\n    this._startPositionInput.addEventListener('change', () => {\n      this._updateValueAndValidation();\n    });\n\n    this._endPositionInput.addEventListener('change', () => {\n      this._updateValueAndValidation();\n    });\n  }\n\n  // \n  // Data Loading\n  // \n\n  /** Load karyotype reference data from store */\n  private _loadKaryotypeData(): void {\n    const data = storeManager.getData('karyotype');\n    this._karyotypeData = data as KaryotypeData | null;\n  }\n\n  /** Initialize UI from existing condition value if present */\n  private _initializeFromExistingValue(): void {\n    this._loadFromValueViews();\n    this._updateValueAndValidation();\n  }\n\n  /**\n   * Parse existing value view and populate UI controls.\n   * Expected format: \"chr:start-end\" or \"chr:start\"\n   * Examples: \"7:123-456\", \"X:999\"\n   */\n  private _loadFromValueViews(): void {\n    const valueView = this.conditionItemValueViews?.[0];\n    const rawValue = valueView?.value || valueView?.label;\n\n    if (!rawValue || typeof rawValue !== 'string') return;\n\n    const parsed = this._parseLocationString(rawValue.trim());\n    if (!parsed) return;\n\n    this._applyParsedLocation(parsed);\n  }\n\n  /**\n   * Parse location string into components.\n   * @param locationStr - String like \"7:123-456\" or \"X:999\"\n   * @returns Parsed components or null if invalid format\n   */\n  private _parseLocationString(locationStr: string): {\n    chromosome: string;\n    start: string;\n    end?: string;\n  } | null {\n    const match = /^([^:]+):(\\d+)(?:-(\\d+))?$/.exec(locationStr);\n    if (!match) return null;\n\n    const [, chromosome, start, end] = match;\n    return { chromosome, start, end };\n  }\n\n  /** Apply parsed location data to UI controls */\n  private _applyParsedLocation(parsed: {\n    chromosome: string;\n    start: string;\n    end?: string;\n  }): void {\n    if (CHROMOSOME_OPTIONS.includes(parsed.chromosome)) {\n      this._chromosomeSelect.value = parsed.chromosome;\n    }\n\n    this._startPositionInput.value = parsed.start;\n\n    if (parsed.end) {\n      this._positionInputContainer.dataset.type = INPUT_MODE.REGION;\n      this._endPositionInput.value = parsed.end;\n      this._singlePositionCheckbox.checked = false;\n    } else {\n      this._positionInputContainer.dataset.type = INPUT_MODE.SINGLE_POSITION;\n      this._endPositionInput.value = '';\n      this._singlePositionCheckbox.checked = true;\n    }\n  }\n\n  // \n  // Validation\n  // \n\n  /** Check if current region input is valid */\n  private _isValidRegion(): boolean {\n    const hasStartValue = this._startPositionInput.value !== '';\n    const hasEndValue = this._endPositionInput.value !== '';\n    const startLessThanEnd =\n      +this._startPositionInput.value < +this._endPositionInput.value;\n\n    return hasStartValue && hasEndValue && startLessThanEnd;\n  }\n\n  /** Check if current single position input is valid */\n  private _isValidSinglePosition(): boolean {\n    return this._startPositionInput.value !== '';\n  }\n\n  // \n  // Karyotype Utilities\n  // \n\n  /** Get maximum valid position for currently selected chromosome */\n  private _getChromosomeMaxPosition(): number | null {\n    if (!this._karyotypeData?.reference) return null;\n\n    const chromosome = this._chromosomeSelect.value;\n    const chromosomeInfo = this._karyotypeData.chromosomes?.[chromosome];\n\n    if (!chromosomeInfo?.region) return null;\n\n    const region = chromosomeInfo.region[this._karyotypeData.reference];\n    return region?.[1] ?? null;\n  }\n\n  /** Update position input constraints based on chromosome length */\n  private _updatePositionConstraints(maxPosition: number): void {\n    this._startPositionInput.max = String(maxPosition);\n    this._endPositionInput.max = String(maxPosition);\n  }\n\n  /** Enforce position values within valid chromosome boundaries */\n  private _enforcePositionLimits(maxPosition: number): void {\n    // Initialize start position if empty\n    if (this._startPositionInput.value === '') {\n      this._startPositionInput.value = String(DEFAULT_START_POSITION);\n    } else if (+this._startPositionInput.value > maxPosition) {\n      this._startPositionInput.value = String(maxPosition);\n    }\n\n    // Initialize or cap end position\n    if (this._endPositionInput.value === '') {\n      this._endPositionInput.value = String(maxPosition);\n    } else if (+this._endPositionInput.value > maxPosition) {\n      this._endPositionInput.value = String(maxPosition);\n    }\n  }\n\n  // \n  // Value Updates\n  // \n\n  /** Update value view based on current UI state and trigger validation */\n  private _updateValueAndValidation(): void {\n    const existingValueView = this.conditionItemValueViews[0];\n\n    if (this.isValid) {\n      const locationString = this._buildLocationString();\n      this._updateOrCreateValueView(existingValueView, locationString);\n    } else {\n      this.removeValueView('');\n    }\n\n    this.conditionValues.update(this.isValid);\n  }\n\n  /** Build location string from current UI state */\n  private _buildLocationString(): string {\n    const chromosome = this._chromosomeSelect.value;\n    const start = this._startPositionInput.value;\n    const isRegionMode =\n      this._positionInputContainer.dataset.type === INPUT_MODE.REGION;\n\n    if (isRegionMode) {\n      const end = this._endPositionInput.value;\n      return `${chromosome}:${start}-${end}`;\n    }\n\n    return `${chromosome}:${start}`;\n  }\n\n  /** Update existing value view or create new one */\n  private _updateOrCreateValueView(\n    existingView: ConditionItemValueView | undefined,\n    locationString: string\n  ): void {\n    if (existingView) {\n      existingView.label = locationString;\n      existingView.value = locationString;\n    } else {\n      this.addValueView(locationString, locationString, true);\n    }\n  }\n\n  /**\n   * Apply options from karyotype selection (or other sources).\n   * Expected format: { chr: string|number, start: number|string, end: number|string }\n   */\n  applyOptions(options: unknown): void {\n    if (!options || typeof options !== 'object') return;\n\n    const opts = options as Record<string, unknown>;\n    const chr = opts.chr;\n    const start = opts.start;\n    const end = opts.end;\n\n    // Convert chromosome to string\n    const chrStr = String(chr);\n    if (!chrStr) return;\n\n    // Convert start/end to numbers (handle both number and string)\n    const startNum =\n      typeof start === 'number'\n        ? start\n        : start\n        ? parseInt(String(start), 10)\n        : null;\n    const endNum =\n      typeof end === 'number' ? end : end ? parseInt(String(end), 10) : null;\n\n    // Set chromosome\n    this._chromosomeSelect.value = chrStr;\n\n    // Set start position\n    if (startNum !== null && !isNaN(startNum)) {\n      this._startPositionInput.value = String(startNum);\n    }\n\n    // Set end position (if provided and different from start)\n    if (endNum !== null && !isNaN(endNum) && endNum !== startNum) {\n      this._singlePositionCheckbox.checked = false;\n      this._positionInputContainer.dataset.type = INPUT_MODE.REGION;\n      this._endPositionInput.value = String(endNum);\n    } else if (startNum !== null && !isNaN(startNum)) {\n      // Single position mode\n      this._singlePositionCheckbox.checked = true;\n      this._positionInputContainer.dataset.type = INPUT_MODE.SINGLE_POSITION;\n    }\n\n    // Trigger validation and value update\n    this._updateValueAndValidation();\n  }\n}\n","import { ConditionValueEditor } from './ConditionValueEditor';\nimport '../../../components/ConditionPathogenicityPredictionSearch/TabView';\nimport '../../../components/ConditionPathogenicityPredictionSearch/PredictionRangeSliderView';\nimport type {\n  PredictionKey,\n  PredictionLabel,\n} from '../../../components/ConditionPathogenicityPredictionSearch/PredictionDatasets';\nimport { PREDICTIONS } from '../../../components/ConditionPathogenicityPredictionSearch/PredictionDatasets';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport type { PredictionValueView } from '../../../components/ConditionPathogenicityPredictionSearch/PredictionValueView';\nimport type { Inequality, PredictionChangeDetail } from '../../../types';\nimport type { TabView } from '../../../components/ConditionPathogenicityPredictionSearch/TabView';\n\n/**\n * Pathogenicity prediction editing screen\n * This class manages the UI and state for editing pathogenicity predictions.\n */\nexport class ConditionValueEditorPathogenicityPrediction extends ConditionValueEditor {\n  private _dataset: PredictionKey = 'alphamissense'; // selected dataset (e.g., alphamissense, sift, polyphen)\n  private _label: PredictionLabel = 'AlphaMissense'; // selected label (e.g., AlphaMissense, SIFT, PolyPhen)\n  private _values: [number, number] = [0, 1]; // max-min values (01)\n  private _inequalitySigns: [Inequality, Inequality] = ['gte', 'lte']; // max-min inequality signs (gte, gt, lte, lt)\n  private _includeUnassigned = false;\n  private _includeUnknown = false; // polyphen\n  private _tabsContainer!: HTMLDivElement; // container for tabs\n  private _lastState: {\n    dataset: PredictionKey;\n    label: PredictionLabel;\n    values: [number, number];\n    inequalitySigns: [Inequality, Inequality];\n    includeUnassigned: boolean;\n    includeUnknown: boolean;\n  } = {\n    dataset: 'alphamissense',\n    label: 'AlphaMissense',\n    values: [0, 1],\n    inequalitySigns: ['gte', 'lte'],\n    includeUnassigned: false,\n    includeUnknown: false,\n  };\n\n  constructor(valuesView: ConditionValues, conditionView: ConditionItemView) {\n    super(valuesView, conditionView);\n    this._initializeDefaultValues();\n    this._initializeUI();\n    this._initializeEvents();\n  }\n\n  // ========================================\n  // State Management\n  // ========================================\n\n  /**\n   * Retain values when switching to the edit screen.\n   * This method saves the current state of the values to allow restoration if needed.\n   */\n  keepLastValues() {\n    this.valuesContainerEl\n      .querySelectorAll(':scope > condition-item-value-view')\n      .forEach((view) => {\n        const pv = view.shadowRoot?.querySelector<PredictionValueView>(\n          'prediction-value-view'\n        );\n        const cv = pv?.conditionValues;\n        if (cv) {\n          const {\n            dataset,\n            label,\n            values,\n            inequalitySigns,\n            includeUnassigned,\n            includeUnknown,\n          } = cv;\n          this._lastState = {\n            dataset,\n            label,\n            values,\n            inequalitySigns,\n            includeUnassigned,\n            includeUnknown,\n          };\n        }\n      });\n  }\n\n  /**\n   * Restore the last selected values if editing is canceled.\n   * This method re-applies the previously saved state to the UI.\n   */\n  restore() {\n    const {\n      dataset,\n      label,\n      values,\n      inequalitySigns,\n      includeUnassigned,\n      includeUnknown,\n    } = this._lastState;\n    this._addPredictionValueView(\n      dataset,\n      label,\n      values,\n      inequalitySigns,\n      includeUnassigned,\n      includeUnknown\n    );\n  }\n\n  // ========================================\n  // Initialization\n  // ========================================\n\n  // Initialize default values\n  private _initializeDefaultValues() {\n    this._dataset = 'alphamissense';\n    this._label = 'AlphaMissense';\n    this._values = [0, 1];\n    this._inequalitySigns = ['gte', 'lte'];\n    this._includeUnassigned = false;\n    this._includeUnknown = false;\n    this._lastState = {\n      dataset: this._dataset,\n      label: this._label,\n      values: [...this._values],\n      inequalitySigns: [...this._inequalitySigns],\n      includeUnassigned: false,\n      includeUnknown: false,\n    };\n  }\n\n  // Initialize UI elements\n  private _initializeUI() {\n    this.createSectionEl(\n      'pathogenicity-editor-view',\n      `<header>Select prediction</header><div class=\"body\"></div>`\n    );\n    this._tabsContainer =\n      this.sectionEl.querySelector<HTMLDivElement>('.body')!;\n    this._createTabView();\n  }\n\n  // Initialize event listeners\n  private _initializeEvents() {\n    this._tabsContainer.addEventListener(\n      'set-prediction-values',\n      (e: Event) => {\n        const detail = (e as CustomEvent<PredictionChangeDetail>).detail;\n        this._updateValuesAndSigns(detail);\n      }\n    );\n    this._tabsContainer.addEventListener('switch-tab', (e: Event) => {\n      const detail = (e as CustomEvent<PredictionChangeDetail>).detail;\n      this._switchTab(detail);\n    });\n  }\n\n  // ========================================\n  // State Management\n  // ========================================\n\n  /** Update UI and values when a tab is switched */\n  private _switchTab(detail: PredictionChangeDetail) {\n    this._dataset = detail.dataset;\n    this._label = PREDICTIONS[this._dataset].label;\n    this._updateValuesAndSigns(detail);\n  }\n\n  /** Update internal values and render */\n  private _update() {\n    this._addPredictionValueView(\n      this._dataset,\n      this._label,\n      this._values,\n      this._inequalitySigns,\n      this._includeUnassigned,\n      this._includeUnknown\n    );\n    // ConditionValues  update \n    if (hasUpdate(this.conditionValues)) {\n      this.conditionValues.update(this._validate());\n    }\n  }\n\n  //  detail boolean \n  private _updateValuesAndSigns(detail: PredictionChangeDetail) {\n    this._values = [detail.values[0], detail.values[1]];\n    this._inequalitySigns = [\n      detail.inequalitySigns[0],\n      detail.inequalitySigns[1],\n    ];\n    const flags = normalizeIncludeFlags(detail);\n    this._includeUnassigned = flags.includeUnassigned;\n    this._includeUnknown = flags.includeUnknown;\n    this._update();\n  }\n\n  // ========================================\n  // UI Rendering\n  // ========================================\n\n  /** Add or update the value view */\n  private _addPredictionValueView(\n    dataset: PredictionKey,\n    label: PredictionLabel,\n    values: [number, number],\n    inequalitySigns: [Inequality, Inequality],\n    includeUnassigned = false,\n    includeUnknown = false\n  ) {\n    //  valueView  or \n    let valueView =\n      this.valuesContainerEl.querySelector<ConditionItemValueView>(\n        'condition-item-value-view'\n      );\n    if (!valueView) {\n      valueView = document.createElement(\n        'condition-item-value-view'\n      ) as ConditionItemValueView;\n      valueView.conditionType = this.conditionType;\n      this.valuesContainerEl.append(valueView);\n    }\n\n    valueView.value = dataset;\n    valueView.label = label;\n\n    //  prediction-value-view \n    this.valuesContainerEl\n      .querySelectorAll<ConditionItemValueView>(\n        ':scope > condition-item-value-view'\n      )\n      .forEach((view) => {\n        const pv = view.shadowRoot?.querySelector<PredictionValueView>(\n          'prediction-value-view'\n        );\n        if (pv) {\n          pv.setValues(\n            dataset,\n            values,\n            inequalitySigns,\n            includeUnassigned,\n            includeUnknown\n          );\n        }\n      });\n  }\n\n  /** Create tab view */\n  private _createTabView() {\n    const tabView = document.createElement('tab-view') as TabView;\n    tabView.datasets = PREDICTIONS;\n    this._tabsContainer.appendChild(tabView);\n  }\n\n  // ========================================\n  // Validation\n  // ========================================\n  /** Validate if the values are valid */\n  private _validate(): boolean {\n    return Number.isFinite(this._values[0]) && Number.isFinite(this._values[1]);\n  }\n\n  // Accessor\n  /** You can press the OK button if there are two valid values */\n  get isValid() {\n    return this._validate();\n  }\n}\n\nfunction hasUpdate(x: unknown): x is { update(valid: boolean): void } {\n  return typeof (x as Record<string, unknown>)?.update === 'function';\n}\n\nfunction normalizeIncludeFlags(d: PredictionChangeDetail) {\n  const arr = d.unassignedChecks ?? [];\n  return {\n    includeUnassigned: d.includeUnassigned ?? arr.includes('unassigned'),\n    includeUnknown: d.includeUnknown ?? arr.includes('unknown'),\n  };\n}\n","import { ConditionValueEditor } from './ConditionValueEditor';\nimport type ConditionValues from '../ConditionValues';\nimport type { ConditionItemView } from '../ConditionItemView';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport SearchField from '../../../components/SearchField/SearchField';\nimport { createEl } from '../../../utils/dom/createEl';\n\n/** Variant ID editing screen */\nexport class ConditionValueEditorVariantID extends ConditionValueEditor {\n  private _searchFieldView!: SearchField;\n  private _lastValueViews: ConditionItemValueView[] = [];\n\n  constructor(valuesView: ConditionValues, conditionView: ConditionItemView) {\n    super(valuesView, conditionView);\n\n    // HTML\n    this.createSectionEl('text-field-editor-view', () => [\n      createEl('header', { text: `Search for ${this.conditionType}` }),\n      createEl('div', { class: 'body' }),\n    ]);\n\n    // Initialize search field with proper type casting\n    this._searchFieldView = new SearchField(\n      this.bodyEl as HTMLDivElement,\n      'rs1489251879'\n    );\n\n    this._searchFieldView.addEventListener('keydown', (e: KeyboardEvent) => {\n      if (e.key === 'Enter') {\n        const id = this._searchFieldView.value;\n\n        if (this._searchFieldView.value.trim().length > 0) {\n          this.addValueView(id, id, false, true);\n          this._update();\n          this._searchFieldView.value = '';\n        }\n      }\n    });\n\n    this.valuesContainerEl?.addEventListener(\n      'delete-condition-item',\n      (e: Event) => {\n        const customEvent = e as CustomEvent<string>;\n        this._handleDeleteValue(customEvent);\n      }\n    );\n  }\n\n  // \n  // Public API\n  // \n\n  /** Retain value views when changing to edit screen */\n  keepLastValues(): void {\n    this._lastValueViews = this.conditionItemValueViews;\n  }\n\n  /** Restore the value views before editing if cancel button is pressed */\n  restore(): void {\n    this.conditionItemValueViews.forEach((view) => view.remove());\n    this.valuesContainerEl.append(...this._lastValueViews);\n  }\n\n  // \n  // Private Methods\n  // \n\n  /** Update validation state for the OK button */\n  private _update(): void {\n    this.conditionValues.update(this.isValid);\n  }\n\n  /** Delete value and _update when value's button.delete is pressed on edit screen */\n  private _handleDeleteValue(e: CustomEvent<string>): void {\n    e.stopPropagation();\n    this.removeValueView(e.detail);\n    this._update();\n  }\n\n  // \n  // Validation\n  // \n\n  /** Returns true if there are value nodes in div.values */\n  get isValid(): boolean {\n    return this.valuesContainerEl.hasChildNodes();\n  }\n}\n","import type { HierarchyNode } from 'd3-hierarchy';\nimport type { UiNode } from './types';\n\n/**\n * Manages checkbox selection states in a hierarchical dataset tree structure.\n *\n * This class handles the complex logic of maintaining consistent selection states\n * across parent-child relationships in a tree hierarchy. When a parent is selected,\n * all children become selected. When some (but not all) children are selected,\n * the parent shows an indeterminate state.\n *\n * Key responsibilities:\n * - Propagate selection changes from parent to all descendants\n * - Update parent states based on child selection patterns\n * - Synchronize DOM checkbox elements with data model states\n * - Handle three-state checkboxes: unchecked, checked, indeterminate\n */\nexport class DatasetCheckStateManager {\n  /**\n   * Propagates a selection state change from a parent node to all its descendants.\n   *\n   * When a user clicks a parent checkbox, this method ensures all child and\n   * grandchild nodes inherit the same selection state. It also clears any\n   * indeterminate states since all descendants now have a uniform state.\n   *\n   * @param parentNode - The node whose selection state should be propagated downward\n   * @param isSelected - Whether the parent (and all descendants) should be selected\n   */\n  updateChildrenCheckState(\n    parentNode: HierarchyNode<UiNode>,\n    isSelected: boolean\n  ): void {\n    if (!parentNode.children || parentNode.children.length === 0) return;\n\n    parentNode.descendants().forEach((descendant) => {\n      descendant.data.checked = isSelected;\n      descendant.data.indeterminate = false;\n    });\n  }\n\n  /**\n   * Updates parent node selection states by bubbling up changes from child nodes.\n   *\n   * This method recursively updates parent nodes based on their children's\n   * selection states. A parent becomes:\n   * - Checked: when all children are checked\n   * - Indeterminate: when some (but not all) children are checked\n   * - Unchecked: when no children are checked\n   *\n   * @param childNode - The node whose parent chain should be updated\n   * @param explicitSelectionState - If provided, sets this node's state explicitly\n   *                                 before calculating parent states\n   */\n  updateParentCheckState(\n    childNode: HierarchyNode<UiNode> | undefined,\n    explicitSelectionState?: boolean\n  ): void {\n    if (!childNode) return;\n\n    if (typeof explicitSelectionState === 'boolean') {\n      childNode.data.checked = explicitSelectionState;\n      childNode.data.indeterminate = false;\n    } else {\n      this._calculateParentStateFromChildren(childNode);\n    }\n\n    // Recursively update the parent chain\n    this.updateParentCheckState(childNode.parent || undefined);\n  }\n\n  /**\n   * Determines the appropriate selection state for a parent based on its children.\n   *\n   * Analyzes all immediate children to determine if the parent should be:\n   * - Fully selected (all children selected, none indeterminate)\n   * - Indeterminate (mixed selection states among children)\n   * - Unselected (no children selected)\n   *\n   * @param parentNode - The parent node whose state should be calculated\n   */\n  private _calculateParentStateFromChildren(\n    parentNode: HierarchyNode<UiNode>\n  ): void {\n    if (!parentNode.children) return;\n\n    const fullySelectedChildren = parentNode.children.filter(\n      (child) => child.data.checked\n    );\n    const partiallySelectedChildren = parentNode.children.filter(\n      (child) => child.data.indeterminate\n    );\n\n    const allChildrenSelected =\n      fullySelectedChildren.length === parentNode.children.length;\n    const someChildrenSelected = fullySelectedChildren.length > 0;\n    const hasPartiallySelectedChildren = partiallySelectedChildren.length > 0;\n\n    // Parent is fully selected only if all children are selected and none are indeterminate\n    parentNode.data.checked =\n      allChildrenSelected && !hasPartiallySelectedChildren;\n    // Parent is indeterminate if there's a mix of selected/unselected children or any child is indeterminate\n    parentNode.data.indeterminate =\n      (someChildrenSelected && !allChildrenSelected) ||\n      hasPartiallySelectedChildren;\n  }\n\n  /**\n   * Synchronizes all DOM checkbox elements with their corresponding data model states.\n   *\n   * Traverses the entire dataset tree and updates each checkbox element in the DOM\n   * to visually reflect the current selection state stored in the data model.\n   * This ensures the UI always displays the correct selection states after\n   * programmatic changes to the data.\n   *\n   * @param columnsContainer - The DOM element containing all the column elements\n   * @param datasetTree - The root of the hierarchical dataset tree\n   */\n  updateCheckboxStatesInDOM(\n    columnsContainer: HTMLElement,\n    datasetTree: HierarchyNode<UiNode>\n  ): void {\n    datasetTree.eachAfter((datasetNode) => {\n      const checkboxElement = columnsContainer.querySelector(\n        `li[data-id=\"${datasetNode.data.id}\"] > label > input`\n      ) as HTMLInputElement;\n\n      if (checkboxElement) {\n        // Set checkbox state: checked only if fully selected (not indeterminate)\n        checkboxElement.checked =\n          !datasetNode.data.indeterminate && datasetNode.data.checked;\n        // Show indeterminate state when some (but not all) children are selected\n        checkboxElement.indeterminate =\n          !datasetNode.data.checked &&\n          (datasetNode.data.indeterminate || false);\n      }\n    });\n  }\n}\n","import type { HierarchyNode } from 'd3-hierarchy';\nimport type { UiNode } from './types';\n\n/**\n * Manages user interaction events within the hierarchical dataset column interface.\n *\n * This class encapsulates all event handling logic for the column-based navigation:\n * - Checkbox selection events that trigger state changes in the data model\n * - Arrow click events that enable drilling down into dataset categories\n * - Navigation state management including selection highlighting and column cleanup\n *\n * By centralizing event handling, this class maintains clean separation between\n * UI interactions and business logic, making the codebase more maintainable.\n */\nexport class DatasetColumnEventHandler {\n  /**\n   * Sets up checkbox change event listeners for dataset selection within a column.\n   *\n   * When a user clicks a checkbox, this method:\n   * 1. Identifies which dataset node was clicked\n   * 2. Propagates the selection state to children (if any)\n   * 3. Updates parent selection states to reflect the change\n   * 4. Triggers a UI refresh to show the updated states\n   *\n   * @param columnElement - The DOM element containing the checkboxes to monitor\n   * @param datasetTree - The complete hierarchical data structure for node lookups\n   * @param propagateToChildren - Callback to update all child nodes when parent is selected\n   * @param updateParentStates - Callback to recalculate parent states when child changes\n   * @param refreshUserInterface - Callback to update the visual interface after state changes\n   */\n  attachCheckboxEventListeners(\n    columnElement: HTMLElement,\n    datasetTree: HierarchyNode<UiNode>,\n    propagateToChildren: (\n      node: HierarchyNode<UiNode>,\n      isSelected: boolean\n    ) => void,\n    updateParentStates: (\n      node: HierarchyNode<UiNode>,\n      isSelected: boolean\n    ) => void,\n    refreshUserInterface: () => void\n  ): void {\n    columnElement.addEventListener('change', (event) => {\n      const clickedCheckbox = event.target as HTMLInputElement;\n      const isNowSelected = clickedCheckbox.checked;\n      const listItemElement = clickedCheckbox.closest('li');\n      if (!listItemElement || !listItemElement.dataset.id) return;\n\n      const datasetId = listItemElement.dataset.id;\n      const clickedDatasetNode = datasetTree.find(\n        (datum) => datum.data.id === datasetId\n      );\n      if (!clickedDatasetNode) return;\n\n      // If this node has children, propagate the selection state downward\n      if (clickedDatasetNode.children) {\n        propagateToChildren(clickedDatasetNode, isNowSelected);\n      }\n\n      // If this node has a parent, update parent states based on sibling selections\n      if (clickedDatasetNode.parent) {\n        updateParentStates(clickedDatasetNode, isNowSelected);\n      }\n\n      refreshUserInterface();\n    });\n  }\n\n  /**\n   * Sets up navigation arrow click events for drilling down into dataset categories.\n   *\n   * When a user clicks a navigation arrow, this method:\n   * 1. Identifies which dataset category was clicked\n   * 2. Delegates to the provided callback to handle the navigation logic\n   * 3. Passes along the user's login status to handle restricted datasets\n   *\n   * @param columnElement - The DOM element containing the navigation arrows\n   * @param userIsLoggedIn - Whether the current user is authenticated (affects restricted dataset access)\n   * @param handleNavigationClick - Callback function to process the arrow click and create new columns\n   */\n  attachArrowClickEventListeners(\n    columnElement: HTMLElement,\n    userIsLoggedIn: boolean,\n    handleNavigationClick: (\n      clickedListItem: Element,\n      clickedArrow: HTMLElement,\n      userIsLoggedIn: boolean\n    ) => void\n  ): void {\n    for (const navigationArrow of columnElement.querySelectorAll(\n      ':scope > ul > li > .arrow'\n    )) {\n      navigationArrow.addEventListener('click', (event) => {\n        const clickedArrowElement = event.target as HTMLElement;\n        const parentListItem = clickedArrowElement.closest('li');\n        if (!parentListItem) return;\n\n        handleNavigationClick(\n          parentListItem,\n          clickedArrowElement,\n          userIsLoggedIn\n        );\n      });\n    }\n  }\n\n  /**\n   * Cleans up the interface when navigating to a new category.\n   *\n   * This method performs two important cleanup tasks:\n   * 1. Removes the visual selection highlight from the previously selected item\n   * 2. Removes all columns that are deeper than the current navigation level\n   *\n   * This ensures the interface shows a clean navigation path without\n   * outdated selections or stale sub-columns from previous navigation.\n   *\n   * @param clickedListItem - The list item that was just clicked for navigation\n   */\n  clearSelectionAndSubColumns(clickedListItem: Element): void {\n    const currentColumnElement = clickedListItem.closest(\n      '.column'\n    ) as HTMLElement;\n    const allColumnsContainer = clickedListItem.closest('.columns');\n    if (\n      !currentColumnElement ||\n      !allColumnsContainer ||\n      !currentColumnElement.dataset.depth\n    )\n      return;\n\n    // Remove selection highlight from previously selected item in this column\n    const parentListContainer = clickedListItem.parentNode as Element;\n    if (parentListContainer) {\n      parentListContainer\n        .querySelector(':scope > .-selected')\n        ?.classList.remove('-selected');\n    }\n\n    // Remove all columns that are deeper than the current navigation level\n    const currentNavigationDepth = parseInt(currentColumnElement.dataset.depth);\n    for (const columnInContainer of allColumnsContainer.querySelectorAll(\n      ':scope > .column'\n    )) {\n      const columnElement = columnInContainer as HTMLElement;\n      if (\n        columnElement.dataset.depth &&\n        parseInt(columnElement.dataset.depth) > currentNavigationDepth\n      ) {\n        const parentContainer = columnElement.parentNode;\n        if (parentContainer) {\n          parentContainer.removeChild(columnElement);\n        }\n      }\n    }\n  }\n}\n","import type { HierarchyNode } from 'd3-hierarchy';\nimport { createEl } from '../../../../utils/dom/createEl';\nimport { CONDITION_TYPE } from '../../../../definition';\nimport { storeManager } from '../../../../store/StoreManager';\nimport type { UiNode } from './types';\n\n/**\n * Responsible for creating and rendering DOM elements within the dataset column interface.\n *\n * This class transforms hierarchical dataset data into interactive HTML elements:\n * - Converts dataset nodes into list items with checkboxes, labels, and navigation arrows\n * - Handles different visual states (checkboxes vs lock icons for restricted datasets)\n * - Creates column containers that organize the hierarchical navigation\n * - Generates special UI elements like login prompts for restricted content\n *\n * The rendered elements are designed to work seamlessly with the event handling\n * and state management systems to provide a complete interactive experience.\n */\nexport class DatasetColumnRenderer {\n  private readonly _instancePrefix: string;\n\n  /**\n   * Creates a new DatasetColumnRenderer instance.\n   * @param instancePrefix - Unique prefix for this instance to ensure globally unique element IDs\n   */\n  constructor(instancePrefix: string = `${Date.now()}-${Math.random().toString(36).substring(2, 9)}`) {\n    this._instancePrefix = instancePrefix;\n  }\n\n  /**\n   * Creates a complete HTML list of selectable dataset items for display in a column.\n   *\n   * This method transforms an array of hierarchical dataset nodes into a structured\n   * HTML unordered list where each item includes:\n   * - A checkbox (or lock icon for restricted datasets)\n   * - Dataset icon (for certain condition types)\n   * - Readable label text\n   * - Navigation arrow (if the item has children)\n   *\n   * @param datasetNodes - Array of hierarchical dataset nodes to render as list items\n   * @param userIsLoggedIn - Whether the current user is authenticated (affects restricted dataset display)\n   * @param conditionType - The type of condition being edited (affects icon display)\n   * @returns Complete HTML unordered list element ready for insertion into a column\n   */\n  generateColumnList(\n    datasetNodes: HierarchyNode<UiNode>[],\n    userIsLoggedIn: boolean,\n    conditionType: string\n  ): HTMLUListElement {\n    return createEl('ul', {\n      children: datasetNodes.map((datasetNode) =>\n        this._createListItemElement(datasetNode, userIsLoggedIn, conditionType)\n      ),\n    });\n  }\n\n  /**\n   * Creates a single interactive list item representing a dataset or category.\n   *\n   * Each list item is a complex element containing:\n   * - A unique identifier for event handling and state management\n   * - A checkbox for selection (or lock icon if restricted and user not logged in)\n   * - Optional dataset icon for visual categorization\n   * - Human-readable label text\n   * - Optional navigation arrow for items with children\n   *\n   * @param datasetNode - The hierarchical dataset node to render\n   * @param userIsLoggedIn - Whether the current user is authenticated\n   * @param conditionType - The type of condition being edited\n   * @returns Complete HTML list item element with all interactive components\n   */\n  private _createListItemElement(\n    datasetNode: HierarchyNode<UiNode>,\n    userIsLoggedIn: boolean,\n    conditionType: string\n  ): HTMLLIElement {\n    const uniqueCheckboxId = `checkbox-${this._instancePrefix}-${datasetNode.data.id}`;\n\n    // Show either a clickable checkbox or a lock icon for restricted datasets\n    const selectionElement = this.shouldShowLockIcon(\n      datasetNode,\n      userIsLoggedIn\n    )\n      ? createEl('span', { class: 'lock' })\n      : createEl('input', {\n          attrs: { type: 'checkbox', id: uniqueCheckboxId },\n          domProps: { value: datasetNode.data.id },\n        });\n\n    // Add dataset icon for visual categorization (only for specific condition types and depths)\n    const categoryIcon = this.shouldShowDatasetIcon(datasetNode, conditionType)\n      ? createEl('span', {\n          class: 'dataset-icon',\n          dataset: datasetNode.data.value\n            ? { dataset: datasetNode.data.value }\n            : undefined,\n        })\n      : null;\n\n    // Create the readable text label\n    const labelText = createEl('span', { text: datasetNode.data.label });\n\n    // Combine all elements into a clickable label\n    const labelElement = createEl('label', {\n      attrs: { for: uniqueCheckboxId },\n      children: [\n        selectionElement,\n        ...(categoryIcon ? [categoryIcon] : []),\n        labelText,\n      ],\n    });\n\n    // Add navigation arrow only for items that have children to drill into\n    const navigationArrow =\n      datasetNode.children !== undefined\n        ? createEl('div', {\n            class: 'arrow',\n            dataset: {\n              id: datasetNode.data.id,\n              ...(datasetNode.data.value\n                ? { value: datasetNode.data.value }\n                : {}),\n            },\n          })\n        : null;\n\n    // Create the final list item with all data attributes for event handling\n    return createEl('li', {\n      dataset: {\n        id: datasetNode.data.id,\n        parent: datasetNode.parent?.data.id ?? '',\n        ...(datasetNode.data.value ? { value: datasetNode.data.value } : {}),\n      },\n      children: [labelElement, ...(navigationArrow ? [navigationArrow] : [])],\n    });\n  }\n\n  /**\n   * Creates a new column container element for the hierarchical navigation interface.\n   *\n   * Each column represents one level of the hierarchy and is assigned a depth\n   * value based on how many columns already exist. This depth is used for\n   * navigation cleanup when users go back to previous levels.\n   *\n   * @param columnsContainer - The parent container that holds all column elements\n   * @returns A new column div element ready to be populated with dataset items\n   */\n  createColumnElement(columnsContainer: HTMLElement): HTMLDivElement {\n    const newColumnElement = document.createElement('div');\n    newColumnElement.classList.add('column');\n    // Set depth based on number of existing columns for navigation management\n    newColumnElement.dataset.depth = columnsContainer\n      .querySelectorAll(':scope > .column')\n      .length.toString();\n    return newColumnElement;\n  }\n\n  /**\n   * Creates and displays a special column that prompts users to log in for restricted datasets.\n   *\n   * This column appears when users try to access JGA-WGS (restricted) datasets\n   * without being authenticated. It provides a clear login link and explanation\n   * instead of showing the restricted dataset items.\n   *\n   * @param columnsContainer - The parent container where the login prompt column should be added\n   */\n  async addLoginPromptColumn(columnsContainer: HTMLElement): Promise<void> {\n    // Ensure we have the latest login status before showing the prompt\n    await storeManager.fetchLoginStatus();\n\n    const loginPromptColumn = createEl('div', {\n      class: 'column',\n      dataset: { depth: '2' }, // Fixed depth for login prompt columns\n      children: [\n        createEl('div', {\n          class: 'messages-view',\n          children: [\n            createEl('div', {\n              class: ['note', 'message', '-warning'],\n              children: [\n                createEl('a', {\n                  class: 'link',\n                  attrs: { href: '/auth/login' },\n                  text: 'Login',\n                }),\n                ' to select JGAD datasets',\n              ],\n            }),\n          ],\n        }),\n      ],\n    });\n\n    columnsContainer.append(loginPromptColumn);\n  }\n\n  /**\n   * Determines whether a lock icon should be displayed instead of a checkbox.\n   *\n   * Lock icons are shown for restricted datasets (JGA-WGS) when the user\n   * is not authenticated. This provides a visual indication that the dataset\n   * requires login to access, preventing user confusion about why they can't\n   * select certain items.\n   *\n   * @param datasetNode - The hierarchical dataset node to check for restrictions\n   * @param userIsLoggedIn - Whether the current user is authenticated\n   * @returns True if a lock icon should be shown instead of a checkbox\n   */\n  private shouldShowLockIcon(\n    datasetNode: HierarchyNode<UiNode>,\n    userIsLoggedIn: boolean\n  ): boolean {\n    return (\n      userIsLoggedIn === false &&\n      (datasetNode.data.value?.includes('jga_wgs.') ?? false)\n    );\n  }\n\n  /**\n   * Determines whether a dataset icon should be displayed for visual categorization.\n   *\n   * Dataset icons are shown only for specific condition types (dataset, genotype)\n   * and only at the first level of depth (immediate children of root categories).\n   * This helps users visually distinguish between different types of datasets.\n   *\n   * @param datasetNode - The hierarchical dataset node to check\n   * @param conditionType - The type of condition being edited\n   * @returns True if a dataset icon should be displayed\n   */\n  private shouldShowDatasetIcon(\n    datasetNode: HierarchyNode<UiNode>,\n    conditionType: string\n  ): boolean {\n    return (\n      (conditionType === CONDITION_TYPE.dataset ||\n        conditionType === CONDITION_TYPE.genotype) &&\n      datasetNode.depth === 1\n    );\n  }\n}\n","import type { HierarchyNode } from 'd3-hierarchy';\nimport { hierarchy } from 'd3-hierarchy';\nimport { CONDITION_TYPE } from '../../../../definition';\nimport { ADVANCED_CONDITIONS } from '../../../../global';\nimport type { TreeNode } from '../../../../types';\nimport type { UiNode } from './types';\nimport { ROOT_NODE_ID } from './types';\n\n/**\n * Transforms raw dataset configuration data into hierarchical structures for the column interface.\n *\n * This class is responsible for the complex data preparation required by the dataset\n * selection interface:\n * - Converts flat configuration objects into d3-hierarchy tree structures\n * - Assigns unique identifiers to each node for DOM manipulation and event handling\n * - Initializes selection state properties (checked, indeterminate) on all nodes\n * - Provides utilities for resetting and restoring selection states during user interactions\n *\n * The processed data structure enables efficient parent-child relationship management\n * and supports the column-based navigation paradigm.\n */\nexport class DatasetTreeDataProcessor {\n  private _uniqueIdCounter = 0;\n\n  /**\n   * Recursively transforms raw tree nodes into UI-ready nodes with unique identifiers.\n   *\n   * This method performs several critical transformations:\n   * - Assigns a unique ID to each node for DOM element association\n   * - Initializes selection state properties (checked: false, indeterminate: false)\n   * - Preserves the original hierarchical structure while adding UI metadata\n   * - Recursively processes all child nodes to maintain tree integrity\n   *\n   * @param rawDataNodes - Array of raw tree nodes from configuration files\n   * @returns Array of UI-ready nodes with unique IDs and initialized selection states\n   */\n  private _addNodeIds(rawDataNodes: readonly TreeNode[]): UiNode[] {\n    return rawDataNodes.map((rawNode) => {\n      // Ensure ID counter is valid (reset if corrupted)\n      if (!Number.isInteger(this._uniqueIdCounter)) {\n        this._uniqueIdCounter = 0;\n      }\n\n      const uiReadyNode: UiNode = {\n        label: rawNode.label,\n        value: 'value' in rawNode ? rawNode.value : undefined,\n        id: `node-${this._uniqueIdCounter++}`, // More descriptive ID format\n        checked: false, // Initially no items are selected\n        indeterminate: false, // Initially no items are in mixed state\n      };\n\n      // Recursively process children if they exist\n      if (rawNode.children && rawNode.children.length > 0) {\n        uiReadyNode.children = this._addNodeIds(rawNode.children);\n      }\n\n      return uiReadyNode;\n    });\n  }\n\n  /**\n   * Creates a complete hierarchical data structure ready for use by the column interface.\n   *\n   * This is the main entry point for data preparation. It:\n   * 1. Loads the appropriate raw dataset configuration based on condition type\n   * 2. Transforms all nodes to include unique IDs and selection state properties\n   * 3. Wraps the data in a d3-hierarchy structure for efficient tree operations\n   * 4. Creates a synthetic root node to unify the tree structure\n   *\n   * @param conditionType - The type of condition (dataset, genotype, etc.)\n   * @returns Complete d3-hierarchy tree ready for use by the column interface\n   */\n  prepareHierarchicalData(conditionType: string): HierarchyNode<UiNode> {\n    switch (conditionType) {\n      case CONDITION_TYPE.dataset:\n      case CONDITION_TYPE.genotype: {\n        const conditionDefinition = ADVANCED_CONDITIONS[conditionType];\n        if (!conditionDefinition || !('values' in conditionDefinition)) {\n          throw new Error(\n            `Invalid condition definition for type '${conditionType}' or missing values property`\n          );\n        }\n\n        const rawDatasetConfiguration = (\n          conditionDefinition as unknown as { values: readonly TreeNode[] }\n        ).values;\n        const uiReadyDataNodes = this._addNodeIds(rawDatasetConfiguration);\n\n        // Create a d3-hierarchy with synthetic root node for unified tree operations\n        return hierarchy<UiNode>({\n          id: ROOT_NODE_ID,\n          label: 'root',\n          value: '',\n          children: uiReadyDataNodes,\n          checked: false,\n          indeterminate: false,\n        });\n      }\n      default:\n        throw new Error(\n          'ConditionValueEditorDatasetColumns - Invalid condition type'\n        );\n    }\n  }\n\n  /**\n   * Clears all selection states throughout the entire dataset hierarchy.\n   *\n   * This method traverses every node in the tree and resets both the 'checked'\n   * and 'indeterminate' properties to false. It's typically used when the user\n   * cancels their changes or when initializing the interface to a clean state.\n   *\n   * @param datasetTree - The root of the hierarchical dataset tree to reset\n   */\n  resetAllCheckStates(datasetTree: HierarchyNode<UiNode>): void {\n    datasetTree.each((datasetNode) => {\n      datasetNode.data.checked = false; // Clear all selections\n      datasetNode.data.indeterminate = false; // Clear all mixed states\n    });\n  }\n\n  /**\n   * Restores the selection state from a previously saved snapshot.\n   *\n   * This method is used when the user clicks 'Cancel' to abandon their changes\n   * and return to the last saved state. It:\n   * 1. Finds each previously selected dataset in the current tree\n   * 2. Marks it as selected\n   * 3. Propagates the selection to children (ensures consistency)\n   * 4. Updates parent states based on the restored selections\n   *\n   * @param datasetTree - The root of the hierarchical dataset tree\n   * @param savedSelections - Array of previously selected dataset values\n   * @param propagateToChildren - Callback to update child nodes when parent is restored\n   * @param updateParentStates - Callback to recalculate parent states after restoration\n   */\n  restoreCheckedStates(\n    datasetTree: HierarchyNode<UiNode>,\n    savedSelections: Array<{ dataset: { value?: string } }>,\n    propagateToChildren: (\n      node: HierarchyNode<UiNode>,\n      isSelected: boolean\n    ) => void,\n    updateParentStates: (\n      node: HierarchyNode<UiNode>,\n      isSelected: boolean\n    ) => void\n  ): void {\n    for (const savedSelection of savedSelections) {\n      // Find the node that matches this saved selection\n      const nodeToRestore = datasetTree.find(\n        (datasetNode) =>\n          datasetNode.data.value === savedSelection.dataset['value']\n      );\n      if (!nodeToRestore) continue; // Skip if dataset no longer exists in current tree\n\n      // Restore the selection state\n      nodeToRestore.data.checked = true;\n      // Ensure all children inherit the restored selection\n      propagateToChildren(nodeToRestore, true);\n      // Update parent chain to reflect the restored selection\n      updateParentStates(nodeToRestore, true);\n    }\n  }\n}\n","import type { HierarchyNode } from 'd3-hierarchy';\nimport type { UiNode } from './types';\n\n/**\n * Manages the display optimization and labeling of selected datasets in the value summary.\n *\n * This class implements intelligent selection summarization logic:\n * - When all children of a category are selected, shows only the parent category\n * - When only some children are selected, shows the individual selected items\n * - Generates hierarchical path labels (e.g., \"Genomic Studies > WGS > Dataset A\")\n *\n * This optimization prevents the value summary from becoming cluttered with\n * redundant selections while maintaining clarity about what is actually selected.\n */\nexport class DatasetValueViewManager {\n  /**\n   * Determines the most concise way to represent selections in the value summary.\n   *\n   * This method implements smart selection summarization:\n   * - If all children of a category are selected, returns only the parent category\n   * - If only some children are selected, returns the individual selected children\n   * - Recursively processes the entire tree to find the optimal representation\n   *\n   * This prevents redundant display like showing both \"Genomic Studies\" and all\n   * its individual datasets when the entire category is selected.\n   *\n   * @param currentNode - The node to analyze for optimal display representation\n   * @returns Array of nodes that should be shown in the value summary\n   */\n  getOptimalNodesToShow(\n    currentNode: HierarchyNode<UiNode>\n  ): HierarchyNode<UiNode>[] {\n    // Base case: leaf nodes (no children)\n    if (!currentNode.children) {\n      return currentNode.data.checked ? [currentNode] : [];\n    }\n\n    // Check if all children are fully selected\n    const allChildrenAreSelected = currentNode.children.every(\n      (childNode) => childNode.data.checked\n    );\n\n    // If all children are selected and this node has a value, show just this parent\n    if (allChildrenAreSelected && currentNode.data.value) {\n      return [currentNode];\n    } else {\n      // Otherwise, recursively collect optimal nodes from children\n      return currentNode.children\n        .flatMap((childNode) => this.getOptimalNodesToShow(childNode))\n        .filter(Boolean); // Remove any null/undefined values\n    }\n  }\n\n  /**\n   * Generates a hierarchical breadcrumb label showing the full path to a dataset.\n   *\n   * Creates a human-readable path from the root to the selected item:\n   * - \"Genomic Studies > WGS > Japanese Population\"\n   * - \"Clinical Data > Phenotype > Disease Association\"\n   *\n   * This helps users understand the context of their selections, especially\n   * when datasets from different categories have similar names.\n   *\n   * @param selectedNode - The node to create a path label for\n   * @param datasetTreeRoot - The root of the entire dataset hierarchy\n   * @returns Human-readable hierarchical path string separated by ' > '\n   */\n  getLabelWithPath(\n    selectedNode: HierarchyNode<UiNode>,\n    datasetTreeRoot: HierarchyNode<UiNode>\n  ): string {\n    // Get the full path from root to selected node, then reverse to go root-to-leaf\n    const fullPathNodes = selectedNode.path(datasetTreeRoot).reverse();\n    // Remove the synthetic root node (first element) and keep only meaningful path nodes\n    const [, ...meaningfulPathNodes] = fullPathNodes;\n    // Extract labels and join with breadcrumb separator\n    return meaningfulPathNodes\n      .map((pathNode) => pathNode.data.label)\n      .join(' > ');\n  }\n}\n","/**\n * Type definitions for the hierarchical dataset column interface.\n *\n * These types define the data structures used throughout the dataset selection\n * system, from raw configuration data to fully interactive UI elements.\n */\n\n/**\n * Represents a dataset or category node in the hierarchical selection interface.\n *\n * This type extends the basic tree node structure with UI-specific properties\n * needed for the interactive column interface:\n * - Selection state management (checked, indeterminate)\n * - Unique identification for DOM element association\n * - Optional dataset values for actual selection data\n *\n * @interface UiNode\n */\nexport type UiNode = {\n  /** Unique identifier for DOM element association and event handling */\n  id: string;\n\n  /** Human-readable name displayed to users in the interface */\n  label: string;\n\n  /** Optional dataset value used for actual data selection (undefined for categories) */\n  value?: string;\n\n  /** Child nodes for hierarchical navigation (undefined for leaf nodes) */\n  children?: UiNode[];\n\n  /** Whether this node is currently selected by the user */\n  checked: boolean;\n\n  /** Whether this node is in an indeterminate state (some but not all children selected) */\n  indeterminate?: boolean;\n};\n\n/**\n * Identifier for the synthetic root node that unifies the entire dataset tree.\n *\n * This root node is not displayed to users but provides a consistent starting\n * point for tree traversal algorithms and ensures all visible categories have\n * a common parent for hierarchical operations.\n */\nexport const ROOT_NODE_ID = 'synthetic-root';\n","import { CONDITION_TYPE, type ConditionTypeValue } from '../../definition';\nimport { supportsRelation } from '../../conditions';\nimport { createEl } from '../../utils/dom/createEl';\nimport { ConditionValueEditorCheckboxes } from './ConditionValueEditor/ConditionValueEditorCheckboxes';\nimport { ConditionValueEditorClinicalSignificance } from './ConditionValueEditor/ConditionValueEditorClinicalSignificance';\nimport ConditionValueEditorColumns from './ConditionValueEditor/ConditionValueEditorColumns';\nimport { ConditionValueEditorDatasetColumns } from './ConditionValueEditor/ConditionValueEditorDatasetColumns';\nimport { ConditionValueEditorDisease } from './ConditionValueEditor/ConditionValueEditorDisease';\nimport { ConditionValueEditorFrequencyCount } from './ConditionValueEditor/ConditionValueEditorFrequencyCount';\nimport { ConditionValueEditorGene } from './ConditionValueEditor/ConditionValueEditorGene';\nimport { ConditionValueEditorLocation } from './ConditionValueEditor/ConditionValueEditorLocation';\nimport { ConditionValueEditorPathogenicityPrediction } from './ConditionValueEditor/ConditionValueEditorPathogenicityPrediction';\nimport { ConditionValueEditorVariantID } from './ConditionValueEditor/ConditionValueEditorVariantID';\nimport type { ConditionItemView } from './ConditionItemView';\nimport type { ConditionValueEditor, EditorCtor } from '../../types';\n\n/** Registry: which editors are used for each condition type. */\nconst EDITOR_REGISTRY: Readonly<\n  Partial<Record<ConditionTypeValue, EditorCtor[]>>\n> = {\n  [CONDITION_TYPE.type]: [ConditionValueEditorCheckboxes],\n  [CONDITION_TYPE.significance]: [ConditionValueEditorClinicalSignificance],\n  [CONDITION_TYPE.consequence]: [ConditionValueEditorColumns],\n  [CONDITION_TYPE.dataset]: [\n    ConditionValueEditorDatasetColumns,\n    ConditionValueEditorFrequencyCount,\n  ],\n  [CONDITION_TYPE.genotype]: [\n    ConditionValueEditorDatasetColumns,\n    ConditionValueEditorFrequencyCount,\n  ],\n  [CONDITION_TYPE.disease]: [ConditionValueEditorDisease],\n  [CONDITION_TYPE.gene_symbol]: [ConditionValueEditorGene],\n  [CONDITION_TYPE.pathogenicity_prediction]: [\n    ConditionValueEditorPathogenicityPrediction,\n  ],\n  [CONDITION_TYPE.variant_id]: [ConditionValueEditorVariantID],\n  [CONDITION_TYPE.location]: [ConditionValueEditorLocation],\n};\n\n/**\n * Orchestrates editors for one conditions edit panel:\n * - builds OK/Cancel UI\n * - instantiates the correct editors\n * - aggregates validity and toggles the OK button\n * - applies or reverts on OK/Cancel\n */\nexport default class ConditionValues {\n  private readonly _conditionView: ConditionItemView;\n  private readonly _events = new AbortController();\n\n  private _editors: ConditionValueEditor[] = [];\n  private _sectionsEl!: HTMLDivElement;\n  private _okButtonEl!: HTMLButtonElement;\n  private _cancelButtonEl!: HTMLButtonElement;\n  private _options?: unknown;\n\n  constructor(conditionView: ConditionItemView, options?: unknown) {\n    this._conditionView = conditionView;\n    this._options = options;\n    this._buildDOM();\n    this._wireEvents();\n    this._instantiateEditorsFor(conditionView.conditionType);\n  }\n\n  // \n  // Public API used by editors / owner\n  // \n\n  /** Called by ConditionItemView right after entering edit mode. */\n  startToEditCondition(): void {\n    for (const ed of this._editors) ed.keepLastValues();\n    this._recomputeValidity();\n  }\n\n  /** Editors call this when their internal validity changed. */\n  update(isValidHint?: boolean): void {\n    // For dataset/genotype we require ALL editors valid; otherwise accept hint or aggregate.\n    const t = this._conditionView.conditionType;\n    const allEditorsValid = this._editors.every((e) => e.isValid);\n    const requireAll =\n      t === CONDITION_TYPE.dataset || t === CONDITION_TYPE.genotype;\n\n    const finalValid = requireAll\n      ? allEditorsValid\n      : isValidHint ?? allEditorsValid;\n    this._setOkEnabled(finalValid);\n  }\n\n  // \n  // DOM build & events\n  // \n\n  private _buildDOM(): void {\n    const sections = (this._sectionsEl = createEl('div', {\n      class: 'sections',\n    }));\n\n    const buttons = createEl('div', {\n      class: 'buttons',\n      children: [\n        (this._okButtonEl = createEl('button', {\n          class: ['button-view'],\n          text: 'OK',\n          attrs: { type: 'button', disabled: '' },\n        })),\n        (this._cancelButtonEl = createEl('button', {\n          class: ['button-view', '-negative'],\n          text: 'Cancel',\n          attrs: { type: 'button' },\n        })),\n      ],\n    });\n\n    // Mount once\n    this._conditionView.editorElement.replaceChildren(sections, buttons);\n  }\n\n  private _wireEvents(): void {\n    const { signal } = this._events;\n\n    this._okButtonEl.addEventListener(\n      'click',\n      (e) => {\n        e.stopImmediatePropagation();\n        // Apply and close\n        this._conditionView.doneEditing();\n      },\n      { signal }\n    );\n\n    this._cancelButtonEl.addEventListener(\n      'click',\n      (e) => {\n        e.stopImmediatePropagation();\n        if (this._conditionView.isFirstTime) {\n          // First-time cancel removes the item\n          this._conditionView.remove();\n          return;\n        }\n        // Revert all editors\n        for (const ed of this._editors) ed.restore();\n\n        // Restore relation only for types that support it\n        if (supportsRelation(this._conditionView.conditionType)) {\n          this._conditionView.rootEl.dataset.relation =\n            this._conditionView.keepLastRelation;\n        } else {\n          delete this._conditionView.rootEl.dataset.relation;\n        }\n\n        this._conditionView.doneEditing();\n      },\n      { signal }\n    );\n  }\n\n  private _instantiateEditorsFor(type: ConditionTypeValue): void {\n    const ctors = EDITOR_REGISTRY[type] ?? [];\n    this._editors = ctors.map((Ctor) => new Ctor(this, this._conditionView));\n\n    // If options provided (e.g., from karyotype), apply them to editors\n    if (this._options) {\n      for (const editor of this._editors) {\n        if (typeof editor.applyOptions === 'function') {\n          editor.applyOptions(this._options);\n        }\n      }\n    }\n\n    // \n    this._recomputeValidity();\n  }\n\n  private _recomputeValidity(): void {\n    this.update(); // aggregate from editors\n  }\n\n  private _setOkEnabled(enabled: boolean): void {\n    if (enabled) {\n      this._okButtonEl.removeAttribute('disabled');\n    } else {\n      this._okButtonEl.setAttribute('disabled', '');\n    }\n  }\n\n  // \n  // Accessors (used by editors)\n  // \n\n  get conditionView(): ConditionItemView {\n    return this._conditionView;\n  }\n\n  get sections(): HTMLDivElement {\n    return this._sectionsEl;\n  }\n\n  get editors(): readonly ConditionValueEditor[] {\n    return this._editors;\n  }\n\n  /** Call to free event listeners when editor view is discarded. */\n  destroy(): void {\n    this._events.abort();\n  }\n}\n","import type { AdvancedSearchBuilderView } from '../AdvancedSearchBuilderView';\nimport type { ConditionTypeValue } from '../../definition';\nimport { CONDITION_NODE_KIND } from '../../definition';\n\n/** Public contract for both condition items and groups */\nexport interface ConditionView {\n  select(): void; // Select this view in the UI (CSS-driven)\n  deselect(): void; // Clear the selected state\n  remove(): void; // Remove from parent group and the DOM (detach listeners/resources as needed)\n  readonly conditionNodeKind:\n    | typeof CONDITION_NODE_KIND.group\n    | typeof CONDITION_NODE_KIND.condition;\n  readonly rootEl: HTMLElement;\n  readonly parentGroup: GroupView | null;\n  readonly childEls: HTMLElement[];\n  readonly queryFragment: object;\n  readonly canUngroup?: boolean;\n  readonly canCopy?: boolean;\n}\n\n/** Group-specific */\nexport interface GroupView extends ConditionView {\n  removeConditionView(_view: ConditionView): void;\n  addNewConditionGroup(\n    _selected: ConditionView[],\n    _ref?: HTMLElement | null\n  ): GroupView;\n  addConditionViews(_conditionViews: Node[], _referenceElm: Node | null): void;\n  addNewConditionItem(\n    _conditionType: ConditionTypeValue,\n    _referenceElm?: Node | null,\n    _options?: unknown\n  ): ConditionView;\n  ungroup(): void;\n  readonly conditionNodeKind: typeof CONDITION_NODE_KIND.group;\n  readonly container: HTMLElement;\n  readonly childViews: ConditionView[];\n}\n\n/** Maps a view's host DOM element to its owning ConditionView instance. */\nexport const viewByEl = new WeakMap<HTMLElement, ConditionView>();\n\n/**\n * Type guard that narrows a `ConditionView | null | undefined` to `GroupView`\n * @param view - Value to test (a `ConditionView` or `null`/`undefined`).\n * @returns `true` if `view` is a `GroupView`; otherwise `false`.\n */\nexport function isGroupView(\n  view: ConditionView | null | undefined\n): view is GroupView {\n  return !!view && view.conditionNodeKind === CONDITION_NODE_KIND.group;\n}\n\n/** Abstract base class for group and item condition views */\nexport abstract class BaseConditionView implements ConditionView {\n  // Structural discriminant (group | condition)\n  readonly conditionNodeKind!: ConditionView['conditionNodeKind'];\n  protected readonly _builder: AdvancedSearchBuilderView;\n  protected readonly _rootEl: HTMLDivElement;\n\n  constructor(\n    builder: AdvancedSearchBuilderView,\n    parentContainer: HTMLElement,\n    ref: Node | null\n  ) {\n    this._builder = builder;\n\n    // Create the host element and attach it\n    this._rootEl = document.createElement('div');\n    this._rootEl.classList.add('advanced-search-condition-view');\n\n    if (ref && parentContainer.contains(ref))\n      parentContainer.insertBefore(this._rootEl, ref);\n    else parentContainer.appendChild(this._rootEl);\n\n    // Register: host element -> view instance\n    viewByEl.set(this._rootEl, this);\n  }\n\n  /** Exposes the host/root DOM element of this view. */\n  get rootEl(): HTMLElement {\n    return this._rootEl;\n  }\n\n  /** Direct element children of the parent container  */\n  get childEls(): HTMLElement[] {\n    return Array.from(\n      this._rootEl.parentElement?.children ?? []\n    ) as HTMLElement[];\n  }\n\n  /** Parent group view; `null` when this view is the root or detached. */\n  get parentGroup(): GroupView | null {\n    const parent = this._rootEl.parentElement;\n    const groupEl = parent?.closest(\n      '.advanced-search-condition-group-view'\n    ) as HTMLElement | null;\n    const view = groupEl ? viewByEl.get(groupEl) : undefined;\n    return isGroupView(view) ? view : null;\n  }\n\n  /** Marks this view as selected (CSS-driven) */\n  select(): void {\n    this._rootEl.setAttribute('aria-selected', 'true');\n  }\n  /** Clears the selected state */\n  deselect(): void {\n    this._rootEl.removeAttribute('aria-selected');\n  }\n\n  /** Removes this view from its parent group and the DOM. */\n  remove(): void {\n    const parent = this.parentGroup;\n    if (parent) parent.removeConditionView(this);\n    viewByEl.delete(this._rootEl);\n    this._rootEl.remove();\n  }\n\n  /**\n   * Serializable fragment of the global query produced by this view.\n   *\n   * Examples:\n   * - Group: `{ and: [child1, child2, ...] }` or `{}` when empty.\n   * - Item:  `{ gene: { relation: 'eq', terms: [...] } }`, etc.\n   */\n  abstract get queryFragment(): object;\n\n  /**\n   * Shared handler for selection toggling.\n   * - Ignores toggles while in editing mode.\n   * - Delegates to the builder's selection manager.\n   *\n   * @param e - The triggering event (click, etc.)\n   */\n  protected _toggleSelection(e: Event): void {\n    e.stopPropagation();\n    if (this._rootEl.classList.contains('-editing')) return;\n\n    const isSelected = this._rootEl.getAttribute('aria-selected') === 'true';\n    if (isSelected) {\n      this._builder.selection.deselectConditionView(this);\n    } else {\n      this._builder.selection.selectConditionView(this, false);\n    }\n  }\n}\n","import type { FrequencyQuery, BuildContext } from '../../../types';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport type { FrequencyCountValueView } from '../../../components/FrequencyCountValueView';\n\n/** Narrowing helper to access a shadow root safely. */\nfunction getFrequencyCount(\n  el: ConditionItemValueView\n): FrequencyCountValueView | null {\n  if (!el.shadowRoot) {\n    throw new Error('dataset/genotype: missing shadow root');\n  }\n  return el.shadowRoot.querySelector('frequency-count-value-view');\n}\n/**\n * Build query for dataset/genotype.\n */\nexport function buildDatasetQuery(\n  ctx: BuildContext<'dataset' | 'genotype'>\n): FrequencyQuery {\n  const queries = ctx.values\n    .map(getFrequencyCount)\n    .filter(Boolean)\n    .map((fc) => (fc as FrequencyCountValueView).queryValue);\n\n  if (queries.length === 0) return {} as FrequencyQuery;\n  if (queries.length === 1) return queries[0];\n  return { or: queries };\n}\n","import type {\n  BuildContext,\n  DefaultLeaf,\n  DefaultQueryKey,\n} from '../../../types';\n\n/** Fallback builder for Consequence, Disease, Variant type condition types. */\nexport function buildDefaultQuery(\n  ctx: BuildContext<DefaultQueryKey>\n): DefaultLeaf {\n  const key = ctx.type;\n  const terms = ctx.values\n    .map((v) => v.value?.trim())\n    .filter((s): s is string => !!s && s.length > 0);\n\n  return {\n    [key]: { relation: ctx.relation, terms },\n  } as DefaultLeaf;\n}\n","import type { GeneLeaf, BuildContext } from '../../../types';\n\n/** Build query for gene IDs (numeric). */\nexport function buildGeneQuery(ctx: BuildContext<'gene'>): GeneLeaf {\n  const geneIds = ctx.values.map((v) => Number(v.value));\n  const uniqueIds = Array.from(new Set(geneIds));\n\n  return { gene: { relation: ctx.relation!, terms: uniqueIds } };\n}\n","import { CONDITION_TYPE, type ConditionTypeValue } from '../../../definition';\nimport { buildDatasetQuery } from './dataset';\nimport { buildSignificanceQuery } from './significance';\nimport { buildGeneQuery } from './gene';\nimport { buildLocationQuery } from './location';\nimport { buildPathogenicityQuery } from './pathogenicity';\nimport { buildVariantIdQuery } from './variantId';\nimport { buildDefaultQuery } from './default';\nimport type {\n  ConditionQuery,\n  BuilderMap,\n  BuildContext,\n  DefaultQueryKey,\n} from '../../../types';\n\nconst BUILDERS: BuilderMap = {\n  [CONDITION_TYPE.dataset]: buildDatasetQuery,\n  [CONDITION_TYPE.significance]: buildSignificanceQuery,\n  [CONDITION_TYPE.gene_symbol]: buildGeneQuery,\n  [CONDITION_TYPE.genotype]: buildDatasetQuery,\n  [CONDITION_TYPE.location]: buildLocationQuery,\n  [CONDITION_TYPE.pathogenicity_prediction]: buildPathogenicityQuery,\n  [CONDITION_TYPE.variant_id]: buildVariantIdQuery,\n};\n\n/** Dispatch to the appropriate builder based on condition type */\nexport function buildQueryFragment<T extends ConditionTypeValue>(\n  ctx: BuildContext<T>\n): ConditionQuery {\n  const b = BUILDERS[ctx.type] as\n    | ((c: BuildContext<T>) => ConditionQuery)\n    | undefined;\n\n  return b ? b(ctx) : buildDefaultQuery(ctx as BuildContext<DefaultQueryKey>);\n}\n","import type { LocationLeaf, BuildContext } from '../../../types';\n\n/** Build query for genomic location like \"chr:pos\" or \"chr:start-end\". */\nexport function buildLocationQuery(\n  ctx: BuildContext<'location'>\n): LocationLeaf {\n  const v0 = ctx.values[0];\n  if (!v0 || typeof v0.value !== 'string' || v0.value.trim() === '') {\n    throw new Error('location: missing or empty value');\n  }\n  const raw = v0.value.trim();\n\n  // chr: expects 1-22, X, Y, MT, etc. The number part is one or more half-width digits.\n  const m = /^([^:]+):(\\d+)(?:-(\\d+))?$/.exec(raw);\n  if (!m) {\n    throw new Error(\n      `location: invalid format \"${raw}\". Expected \"chr:pos\" or \"chr:start-end\".`\n    );\n  }\n\n  const [, chromosomeRaw, startStr, endStr] = m;\n\n  const chromosome = chromosomeRaw.trim();\n  const start = Number(startStr);\n  const end = endStr ? Number(endStr) : undefined;\n\n  if (!Number.isFinite(start) || (endStr && !Number.isFinite(end!))) {\n    throw new Error(`location: non-numeric position in \"${raw}\".`);\n  }\n\n  const position =\n    end === undefined\n      ? start\n      : { gte: Math.min(start, end), lte: Math.max(start, end) };\n\n  return { location: { chromosome, position } };\n}\n","import type { BuildContext, PredictionQueryLocal } from '../../../types';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\nimport type { PredictionValueView } from '../../../components/ConditionPathogenicityPredictionSearch/PredictionValueView';\n\nfunction getPrediction(el: ConditionItemValueView): PredictionValueView | null {\n  if (!el.shadowRoot) {\n    throw new Error('pathogenicity_prediction: missing shadow root');\n  }\n  return el.shadowRoot.querySelector('prediction-value-view');\n}\n\n/** Build query for pathogenicity_prediction. */\nexport function buildPathogenicityQuery(\n  ctx: BuildContext<'pathogenicity_prediction'>\n): PredictionQueryLocal {\n  const predictionValueEl = getPrediction(ctx.values[0]);\n  if (!predictionValueEl) {\n    throw new Error('pathogenicity_prediction: missing or invalid value');\n  }\n  return predictionValueEl.queryValue;\n}\n","import type {\n  SignificanceSource,\n  SignificanceLeaf,\n  SignificanceQuery,\n  BuildContext,\n  Relation,\n} from '../../../types';\n\nimport {\n  SIGNIFICANCE_TERM_SET,\n  type SignificanceTerm,\n} from '../../../definition';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\n\n/** Query selectors scoped within the values container. */\nconst SEL = {\n  mgend:\n    ':scope > .mgend-wrapper > .mgend-condition-wrapper > condition-item-value-view',\n  clinvar:\n    ':scope > .clinvar-wrapper > .clinvar-condition-wrapper > condition-item-value-view',\n} as const;\n\nfunction pickScoped(\n  container: HTMLElement | null | undefined,\n  selector: string\n): ConditionItemValueView[] {\n  if (!container) {\n    throw new Error('pickScoped: missing container');\n  }\n  return Array.from(\n    container.querySelectorAll(selector)\n  ) as ConditionItemValueView[];\n}\n\nfunction isSignificanceTerm(v: unknown): v is SignificanceTerm {\n  return (\n    typeof v === 'string' && SIGNIFICANCE_TERM_SET.has(v as SignificanceTerm)\n  );\n}\n\nfunction collectTerms(elements: ConditionItemValueView[]): SignificanceTerm[] {\n  return elements.map((e) => e.value).filter(isSignificanceTerm);\n}\n\n// Per-source builder returns `null` when that source is simply \"not selected\" (no DOM items).\nfunction buildSourceCondition(\n  relation: Relation,\n  source: SignificanceSource,\n  elements: ConditionItemValueView[]\n): SignificanceLeaf | null {\n  if (elements.length === 0) return null;\n  const terms = collectTerms(elements);\n  if (terms.length === 0) return null;\n\n  return { significance: { relation, source: [source], terms } };\n}\n\nexport function buildSignificanceQuery(\n  ctx: BuildContext<'significance'>\n): SignificanceQuery {\n  const container = ctx.valuesContainer;\n  const mgendEls = pickScoped(container, SEL.mgend);\n  const clinvarEls = pickScoped(container, SEL.clinvar);\n\n  // Build clauses per source (MGEND/ClinVar)\n  const mgend = buildSourceCondition(ctx.relation, 'mgend', mgendEls);\n  const clinvar = buildSourceCondition(ctx.relation, 'clinvar', clinvarEls);\n\n  // Keep only present clauses (drop `null`) and narrow the array to `SignificanceLeaf[]`\n  const conditions = [mgend, clinvar].filter(\n    (clause): clause is SignificanceLeaf => clause !== null\n  );\n\n  // 0 sources => user selected nothing in both sections: fail fast\n  if (conditions.length === 0) {\n    throw new Error('significance: no terms selected');\n  }\n\n  // 1 source => pass the single clause through as-is\n  if (conditions.length === 1) {\n    return conditions[0];\n  }\n\n  // 2 sources => combine by relation: 'ne' (exclude) uses AND, otherwise OR\n  return ctx.relation === 'ne' ? { and: conditions } : { or: conditions };\n}\n","import type { IdLeaf, BuildContext } from '../../../types';\nimport type { ConditionItemValueView } from '../../../components/ConditionItemValueView';\n\n/** Build query for variant id(s). */\nexport function buildVariantIdQuery(context: BuildContext<'id'>): IdLeaf {\n  const ids = context.values\n    .map((v: ConditionItemValueView) => v.value?.trim())\n    .filter((s): s is string => !!s && s.length > 0);\n\n  return { id: ids };\n}\n","/**\n * Results Column Templates\n *\n * This module provides HTML templates and utilities for generating\n * table column content in the search results display. It includes:\n * - Column HTML templates for consistent table structure\n * - Dynamic frequency column generation based on dataset configuration\n * - Constants for display formatting and limits\n */\n\nimport { getSimpleSearchConditionMaster } from '../../store/searchManager';\nimport type { DatasetMasterItem } from '../../types';\n\n/** Maximum length of array to display in Ref/Alt column */\nexport const REF_ALT_SHOW_LENGTH = 4;\n\n// ============================================\n// Column Template Definitions\n// ============================================\n\n/**\n * HTML templates for each column defined as constants\n * Provides HTML structure corresponding to each table column\n */\nexport const COLUMN_TEMPLATES = {\n  togovar_id:\n    '<td class=\"togovar_id\"><a href=\"\" class=\"hyper-text -internal\" target=\"_blank\"></a></td>',\n  refsnp_id:\n    '<td class=\"refsnp_id\" data-remains=\"\"><a href=\"\" target=\"_blank\" class=\"hyper-text -external\"></a></td>',\n  position:\n    '<td class=\"position\"><div class=\"chromosome-position\"><div class=\"chromosome\"></div><div class=\"coordinate\"></div></div></td>',\n  ref_alt:\n    '<td class=\"ref_alt\"><div class=\"ref-alt\"><span class=\"ref\" data-sum=\"\"></span><span class=\"arrow\"></span><span class=\"alt\" data-sum=\"\"><span class=\"sum\"></span></span></div></td>',\n  type: '<td class=\"type\"><div class=\"variant-type\"></div></td>',\n  gene: '<td class=\"gene\" data-remains=\"\"><a href=\"\" class=\"hyper-text -internal\" target=\"_blank\"></a></td>',\n  consequence:\n    '<td class=\"consequence\" data-remains=\"\"><div class=\"consequence-item\"></div></td>',\n  clinical_significance:\n    '<td class=\"clinical_significance\"><div class=\"clinical-significance\" data-value=\"\"></div><a class=\"hyper-text -internal\" href=\"\" target=\"_blank\"></a><span class=\"icon\" data-remains=\"\" data-mgend=\"\"></span></td>',\n  alphamissense:\n    '<td class=\"alphamissense\"><div class=\"variant-function\" data-function=\"\"></div></td>',\n  sift: '<td class=\"sift\"><div class=\"variant-function\" data-function=\"\"></div></td>',\n  polyphen:\n    '<td class=\"polyphen\"><div class=\"variant-function\" data-function=\"\"></div></td>',\n} as const;\n\n// ============================================\n// Dynamic Template Generation\n// ============================================\n\n/**\n * Dynamically generates HTML for Alt frequency column\n *\n * Retrieves datasets with frequency data from the dataset master,\n * and generates logarithmized-block-graph-frequency-view elements\n * corresponding to each dataset\n *\n * @returns Generated HTML table cell string\n */\nexport function createFrequencyColumnHTML(): string {\n  const master: DatasetMasterItem[] =\n    getSimpleSearchConditionMaster('dataset').items;\n  const frequencyElements = master\n    .filter((dataset) => dataset.has_freq)\n    .map(\n      (dataset) =>\n        `<logarithmized-block-graph-frequency-view\n        data-dataset=\"${dataset.id}\"\n        data-direction=\"vertical\"\n      ></logarithmized-block-graph-frequency-view>`\n    )\n    .join('');\n\n  return `<td class=\"alt_frequency\">${frequencyElements}</td>`;\n}\n","import { getSimpleSearchConditionMaster } from '../../store/searchManager';\nimport type {\n  DatasetMasterItem,\n  TypeMasterItem,\n  ConsequenceMasterItem,\n  GeneSymbol,\n  Frequency,\n  TdFrequencies,\n  Transcript,\n  Significance,\n} from '../../types';\nimport { REF_ALT_SHOW_LENGTH } from './ResultsColumnTemplates';\n\n/**\n * Utility class responsible for updating data in each column of result rows\n *\n * Each method is implemented as a static method and is responsible for updating\n * DOM elements of specific column types with corresponding data\n */\nexport class ResultsColumnUpdater {\n  /**\n   * Update TogoVar ID column\n   *\n   * @param element - Target anchor element to update\n   * @param value - TogoVar ID value\n   * @param url - Link destination URL\n   */\n  static updateTogovarId(\n    element: HTMLAnchorElement | null,\n    value: string,\n    url: string\n  ) {\n    if (!element || !value) {\n      if (element) {\n        element.href = '';\n        element.textContent = '';\n      }\n      return;\n    }\n\n    element.href = url;\n    element.textContent = value;\n  }\n\n  /**\n   * Update RefSNP ID column\n   *\n   * @param tdRS - RefSNP table cell element\n   * @param tdRSAnchor - RefSNP anchor element\n   * @param values - RefSNP ID array\n   */\n  static updateRefSNP(\n    tdRS: HTMLTableCellElement | null,\n    tdRSAnchor: HTMLAnchorElement | null,\n    values: string[]\n  ) {\n    if (!tdRS || !tdRSAnchor) return;\n\n    if (!values || values.length === 0) {\n      tdRS.dataset.remains = '0';\n      tdRSAnchor.href = '';\n      tdRSAnchor.textContent = '';\n      return;\n    }\n\n    tdRS.dataset.remains = (values.length - 1).toString();\n    tdRSAnchor.href = `http://identifiers.org/dbsnp/${values[0]}`;\n    tdRSAnchor.textContent = values[0];\n  }\n\n  /**\n   * Update Position column\n   *\n   * @param tdPositionChromosome - Div element for chromosome display\n   * @param tdPositionCoordinate - Div element for coordinate display\n   * @param chromosome - Chromosome name\n   * @param position - Coordinate position\n   */\n  static updatePosition(\n    tdPositionChromosome: HTMLDivElement | null,\n    tdPositionCoordinate: HTMLDivElement | null,\n    chromosome: string,\n    position: number\n  ) {\n    if (tdPositionChromosome) {\n      tdPositionChromosome.textContent = chromosome;\n    }\n    if (tdPositionCoordinate) {\n      tdPositionCoordinate.textContent = position.toString();\n    }\n  }\n\n  /**\n   * Update Ref/Alt column\n   *\n   * @param tdRefAltRef - Span element for Reference display\n   * @param tdRefAltAlt - Span element for Alternate display\n   * @param reference - Reference allele array\n   * @param alternate - Alternate allele array\n   */\n  static updateRefAlt(\n    tdRefAltRef: HTMLSpanElement | null,\n    tdRefAltAlt: HTMLSpanElement | null,\n    reference: string,\n    alternate: string\n  ) {\n    const refData = this.formatRefAltData(reference || '');\n    const altData = this.formatRefAltData(alternate || '');\n\n    if (tdRefAltRef) {\n      tdRefAltRef.textContent = refData.display;\n      tdRefAltRef.dataset.sum = refData.length.toString();\n    }\n\n    if (tdRefAltAlt) {\n      tdRefAltAlt.textContent = altData.display;\n      tdRefAltAlt.dataset.sum = altData.length.toString();\n    }\n  }\n\n  /**\n   * Generate formatting information for Ref/Alt data\n   *\n   * @param sequence - Sequence string to format\n   * @returns Object containing display string and original length\n   */\n  static formatRefAltData(sequence: string) {\n    return {\n      display: this.formatRefAlt(sequence),\n      length: sequence.length,\n    };\n  }\n\n  /**\n   * Format Ref/Alt sequence for display\n   * Adds ellipsis if sequence exceeds specified length\n   *\n   * @param sequence - Sequence string to format\n   * @returns Formatted string\n   */\n  static formatRefAlt(sequence: string) {\n    return (\n      sequence.substring(0, REF_ALT_SHOW_LENGTH) +\n      (sequence.length > REF_ALT_SHOW_LENGTH ? '...' : '')\n    );\n  }\n\n  /**\n   * Update Variant Type column\n   *\n   * @param element - Target Div element to update\n   * @param value - Variant type ID\n   */\n  static updateVariantType(element: HTMLDivElement | null, value: string) {\n    if (!element) return;\n\n    const master: TypeMasterItem[] =\n      getSimpleSearchConditionMaster('type').items;\n    element.textContent = master.find((item) => item.id === value)?.label || '';\n  }\n\n  /**\n   * Update Gene column\n   *\n   * @param tdGene - Gene table cell element\n   * @param tdGeneAnchor - Gene anchor element\n   * @param symbols - Gene symbol array\n   */\n  static updateGene(\n    tdGene: HTMLTableCellElement | null,\n    tdGeneAnchor: HTMLAnchorElement | null,\n    symbols: GeneSymbol[]\n  ) {\n    if (!tdGene || !tdGeneAnchor) return;\n\n    if (!symbols || symbols.length === 0) {\n      tdGene.dataset.remains = '0';\n      tdGeneAnchor.href = '';\n      tdGeneAnchor.textContent = '';\n      return;\n    }\n\n    tdGene.dataset.remains = (symbols.length - 1).toString();\n    tdGeneAnchor.href = `/gene/${symbols[0].id}`;\n    tdGeneAnchor.textContent = symbols[0].name;\n  }\n\n  /**\n   * Update Alt frequency column\n   *\n   * @param tdFrequencies - Map of frequency display elements\n   * @param frequencies - Frequency data array\n   */\n  static updateAltFrequency(\n    tdFrequencies: TdFrequencies,\n    frequencies: Frequency[]\n  ) {\n    const master: DatasetMasterItem[] =\n      getSimpleSearchConditionMaster('dataset').items;\n\n    master\n      .filter((dataset) => dataset.has_freq)\n      .forEach((dataset) => {\n        const frequency = frequencies?.find(\n          (freq) => freq.source === dataset.id\n        );\n        const element = tdFrequencies[dataset.id];\n        if (element) {\n          element.frequency = frequency;\n        }\n      });\n  }\n\n  /**\n   * Update Consequence column\n   *\n   * @param tdConsequence - Consequence table cell element\n   * @param tdConsequenceItem - Consequence display Div element\n   * @param mostConsequence - Most significant consequence\n   * @param transcripts - Transcript data array\n   */\n  static updateConsequence(\n    tdConsequence: HTMLTableCellElement | null,\n    tdConsequenceItem: HTMLDivElement | null,\n    mostConsequence: string,\n    transcripts: Transcript[]\n  ) {\n    if (!tdConsequence || !tdConsequenceItem) return;\n\n    if (!mostConsequence) {\n      tdConsequence.dataset.remains = '0';\n      tdConsequenceItem.textContent = '';\n      return;\n    }\n\n    const master: ConsequenceMasterItem[] =\n      getSimpleSearchConditionMaster('consequence').items;\n    const uniqueConsequences = Array.from(\n      new Set(transcripts.flatMap((transcript) => transcript.consequence))\n    );\n\n    tdConsequence.dataset.remains = (uniqueConsequences.length - 1).toString();\n    tdConsequenceItem.textContent =\n      master.find((consequence) => consequence.id === mostConsequence)?.label ||\n      '';\n  }\n\n  /**\n   * Update Clinical significance column\n   *\n   * @param tdClinicalSign - Clinical significance display Div element\n   * @param tdClinicalAnchor - Clinical significance anchor element\n   * @param tdClinicalIcon - Clinical significance icon Span element\n   * @param significances - Clinical significance data array\n   */\n  static updateClinicalSignificance(\n    tdClinicalSign: HTMLDivElement | null,\n    tdClinicalAnchor: HTMLAnchorElement | null,\n    tdClinicalIcon: HTMLSpanElement | null,\n    significances: Significance[]\n  ) {\n    if (!tdClinicalSign || !tdClinicalAnchor || !tdClinicalIcon) return;\n\n    if (!significances || significances.length === 0) {\n      this.resetClinicalSignificance(\n        tdClinicalSign,\n        tdClinicalAnchor,\n        tdClinicalIcon\n      );\n      return;\n    }\n\n    const firstSignificance = significances[0];\n    const firstCondition = firstSignificance.conditions?.[0];\n\n    // Set interpretations value\n    tdClinicalSign.dataset.value = firstSignificance.interpretations[0];\n\n    this.updateClinicalCondition(\n      tdClinicalSign,\n      tdClinicalAnchor,\n      firstCondition\n    );\n    this.updateClinicalMetadata(tdClinicalIcon, significances);\n  }\n\n  /**\n   * Reset Clinical significance processing\n   *\n   * @param tdClinicalSign - Clinical significance display Div element\n   * @param tdClinicalAnchor - Clinical significance anchor element\n   * @param tdClinicalIcon - Clinical significance icon Span element\n   */\n  static resetClinicalSignificance(\n    tdClinicalSign: HTMLDivElement,\n    tdClinicalAnchor: HTMLAnchorElement,\n    tdClinicalIcon: HTMLSpanElement\n  ) {\n    tdClinicalSign.dataset.value = '';\n    tdClinicalAnchor.textContent = '';\n    tdClinicalAnchor.setAttribute('href', '');\n    tdClinicalIcon.dataset.remains = '0';\n    tdClinicalIcon.dataset.mgend = 'false';\n  }\n\n  /**\n   * Update Clinical significance condition information\n   *\n   * @param tdClinicalSign - Clinical significance display Div element\n   * @param tdClinicalAnchor - Clinical significance anchor element\n   * @param firstCondition - First condition data\n   */\n  static updateClinicalCondition(\n    tdClinicalSign: HTMLDivElement,\n    tdClinicalAnchor: HTMLAnchorElement,\n    firstCondition: { name: string; medgen?: string } | undefined\n  ) {\n    if (firstCondition) {\n      tdClinicalSign.textContent = '';\n      tdClinicalAnchor.textContent = firstCondition.name || '';\n\n      if (firstCondition.medgen) {\n        tdClinicalAnchor.setAttribute(\n          'href',\n          `/disease/${firstCondition.medgen}`\n        );\n      } else {\n        // Display in div instead of anchor when no medgen\n        tdClinicalSign.textContent = firstCondition.name;\n        tdClinicalAnchor.textContent = '';\n        tdClinicalAnchor.className = '';\n      }\n    } else {\n      // No conditions exist\n      tdClinicalSign.textContent = 'others';\n      tdClinicalAnchor.textContent = '';\n    }\n  }\n\n  /**\n   * Update Clinical significance metadata\n   *\n   * @param tdClinicalIcon - Clinical significance icon Span element\n   * @param significances - Clinical significance data array\n   */\n  static updateClinicalMetadata(\n    tdClinicalIcon: HTMLSpanElement,\n    significances: Significance[]\n  ) {\n    // Set remaining significance count\n    tdClinicalIcon.dataset.remains = (significances.length - 1).toString();\n\n    // Check if mgend source exists in significances\n    const hasMedgen = significances.some(\n      (significance) => significance.source === 'mgend'\n    );\n    tdClinicalIcon.dataset.mgend = hasMedgen.toString();\n  }\n\n  /**\n   * Common update logic for function prediction\n   *\n   * @param element - Target Div element to update\n   * @param score - Function prediction score value\n   * @param classifyScore - Function to determine function class from score value\n   */\n  static updateFunctionPrediction(\n    element: HTMLDivElement | null,\n    score: number | null,\n    classifyScore: (_score: number) => string\n  ) {\n    if (!element) return;\n\n    if (score === null) {\n      element.textContent = '';\n      element.dataset.function = '';\n      return;\n    }\n\n    element.textContent = score.toString();\n    element.dataset.function = classifyScore(score);\n  }\n\n  /**\n   * Update AlphaMissense score\n   *\n   * @param element - Target Div element to update\n   * @param score - AlphaMissense score\n   */\n  static updateAlphaMissense(element: HTMLDivElement | null, score: number) {\n    this.updateFunctionPrediction(element, score, (_score) => {\n      if (_score < 0.34) return 'LB';\n      if (_score > 0.564) return 'LP';\n      return 'A';\n    });\n  }\n\n  /**\n   * Update SIFT score\n   *\n   * @param element - Target Div element to update\n   * @param score - SIFT score\n   */\n  static updateSift(element: HTMLDivElement | null, score: number) {\n    this.updateFunctionPrediction(element, score, (_score) =>\n      _score >= 0.05 ? 'T' : 'D'\n    );\n  }\n\n  /**\n   * Update PolyPhen score\n   *\n   * @param element - Target Div element to update\n   * @param score - PolyPhen score\n   */\n  static updatePolyphen(element: HTMLDivElement | null, score: number) {\n    this.updateFunctionPrediction(element, score, (_score) => {\n      if (_score > 0.908) return 'PROBD';\n      if (_score > 0.446) return 'POSSD';\n      if (_score >= 0) return 'B';\n      return 'U';\n    });\n  }\n}\n","import { COLUMNS } from '../../global';\nimport { storeManager } from '../../store/StoreManager';\nimport '../../components/LogarithmizedBlockGraphFrequencyView';\nimport type {\n  ResultData,\n  Column,\n  TdFrequencies,\n  FrequencyElement,\n} from '../../types';\nimport {\n  COLUMN_TEMPLATES,\n  createFrequencyColumnHTML,\n} from './ResultsColumnTemplates';\nimport { ResultsColumnUpdater } from './ResultsColumnUpdater';\n\n/**\n * Class for managing a single row in the search results table\n *\n * Responsible for creating DOM elements, data binding, and state management for each row\n * Receives data change notifications from storeManager and updates corresponding DOM elements\n */\nexport class ResultsRowView {\n  index: number; // Row index number\n  selected: boolean; // Row selection state\n  tr: HTMLTableRowElement; // Table row element\n  private _isDestroyed = false; // Track if instance has been destroyed\n\n  // Cache for DOM elements\n  // TogoVar ID\n  togovarIdAnchor: HTMLAnchorElement | null = null;\n  // RefSNP ID\n  refsnpCell: HTMLTableCellElement | null = null;\n  refsnpAnchor: HTMLAnchorElement | null = null;\n  // Position\n  positionChromosome: HTMLDivElement | null = null;\n  positionCoordinate: HTMLDivElement | null = null;\n  // Ref/Alt\n  refElement: HTMLSpanElement | null = null;\n  altElement: HTMLSpanElement | null = null;\n  // Type\n  typeElement: HTMLDivElement | null = null;\n  // Gene\n  geneCell: HTMLTableCellElement | null = null;\n  geneAnchor: HTMLAnchorElement | null = null;\n  // Alt frequency\n  frequencyElements: TdFrequencies = {};\n  // Consequence\n  consequenceCell: HTMLTableCellElement | null = null;\n  consequenceItem: HTMLDivElement | null = null;\n  // Clinical significance\n  clinicalSignificance: HTMLDivElement | null = null;\n  clinicalAnchor: HTMLAnchorElement | null = null;\n  clinicalIcon: HTMLSpanElement | null = null;\n  // AlphaMissense\n  alphaMissenseFunction: HTMLDivElement | null = null;\n  // SIFT\n  siftFunction: HTMLDivElement | null = null;\n  // PolyPhen\n  polyphenFunction: HTMLDivElement | null = null;\n\n  /**\n   * Constructor for ResultsRowView\n   *\n   * @param index - Row index number in the table\n   */\n  constructor(index: number) {\n    this.index = index;\n    this.selected = false;\n    this.tr = this._createTableRow();\n\n    // Watch for changes to `selectedRow` and `offset`\n    storeManager.bind('selectedRow', this);\n    storeManager.bind('offset', this);\n  }\n\n  // ========================================\n  // Lifecycle Management\n  // ========================================\n\n  /**\n   * Clean up all resources and event listeners\n   * Call this method when the row is no longer needed\n   */\n  destroy(): void {\n    if (this._isDestroyed) return;\n\n    // Unbind from store events\n    storeManager.unbind('selectedRow', this);\n    storeManager.unbind('offset', this);\n\n    // Remove DOM element\n    if (this.tr && this.tr.parentNode) {\n      this.tr.parentNode.removeChild(this.tr);\n    }\n\n    // Clear cached DOM element references\n    this.togovarIdAnchor = null;\n    this.refsnpCell = null;\n    this.refsnpAnchor = null;\n    this.positionChromosome = null;\n    this.positionCoordinate = null;\n    this.refElement = null;\n    this.altElement = null;\n    this.typeElement = null;\n    this.geneCell = null;\n    this.geneAnchor = null;\n    this.frequencyElements = {};\n    this.consequenceCell = null;\n    this.consequenceItem = null;\n    this.clinicalSignificance = null;\n    this.clinicalAnchor = null;\n    this.clinicalIcon = null;\n    this.alphaMissenseFunction = null;\n    this.siftFunction = null;\n    this.polyphenFunction = null;\n\n    // Mark as destroyed to prevent further operations\n    this._isDestroyed = true;\n\n    // Note: this.tr reference kept to avoid TypeScript null assertion issues\n    // The _isDestroyed flag ensures the instance won't be used after cleanup\n  }\n\n  // ========================================\n  // Table Row Update Method\n  // ========================================\n\n  /**\n   * Update table row data\n   *\n   * Receives notifications from storeManager and updates the row display content\n   * Sets appropriate display state based on data fetching status\n   */\n  updateTableRow() {\n    if (this._isDestroyed) return;\n\n    if (\n      storeManager.getData('isFetching') ||\n      storeManager.getData('isStoreUpdating')\n    ) {\n      return this._setLoadingState();\n    }\n\n    // Rows beyond range are hidden using style (-out-of-range)\n    const rowCount = storeManager.getData('rowCount');\n    if (rowCount <= this.index) {\n      return this._setOutOfRangeState();\n    }\n\n    const result = storeManager.getRecordByIndex(this.index);\n    if (!result || result === 'loading' || result === 'out of range') {\n      return this._setLoadingState();\n    }\n\n    this._prepareTableData();\n\n    // Update data for each column\n    COLUMNS.forEach((column) => this._updateColumnContent(column, result));\n\n    this.tr.classList.remove('-loading', '-out-of-range');\n  }\n\n  // ========================================\n  // Store Event Handlers\n  // ========================================\n\n  /**\n   * Handle selected row changes\n   * Store event handler method (called by bind/unbind system)\n   *\n   * @param selectedIndex - Index of the selected row\n   */\n  selectedRow(selectedIndex: number) {\n    if (this._isDestroyed) return;\n    this.selected = selectedIndex === this.index;\n    this.tr.classList.toggle('-selected', this.selected);\n  }\n\n  /**\n   * Handle offset changes\n   * Store event handler method (called by bind/unbind system)\n   */\n  offset() {\n    if (this._isDestroyed) return;\n    this.updateTableRow();\n  }\n\n  // ========================================\n  // DOM Creation and State Management\n  // ========================================\n\n  /**\n   * Create table row element\n   *\n   * @returns Created table row element\n   */\n  private _createTableRow(): HTMLTableRowElement {\n    const tr = document.createElement('tr');\n    tr.classList.add('-loading');\n    tr.innerHTML = `<td colspan=\"${COLUMNS.length}\"></td>`;\n    tr.addEventListener('click', this._handleRowClick.bind(this));\n    return tr;\n  }\n\n  /**\n   * Set row to loading state\n   */\n  private _setLoadingState() {\n    this.tr.classList.add('-loading');\n    this.tr.innerHTML = `<td colspan=\"${COLUMNS.length}\"></td>`;\n  }\n\n  /**\n   * Set row to out-of-range state\n   */\n  private _setOutOfRangeState() {\n    this.tr.classList.add('-out-of-range');\n    this.tr.innerHTML = `<td colspan=\"${COLUMNS.length}\"></td>`;\n  }\n\n  // ========================================\n  //  Data Preparation and HTML Generation\n  // ========================================\n\n  /**\n   * Prepare table data\n   *\n   * Generate HTML and cache DOM elements\n   */\n  private _prepareTableData() {\n    this.tr.innerHTML = this._createTableCellHTML();\n    this._cacheTableCells();\n  }\n\n  /**\n   * Dynamically generate table cell HTML\n   *\n   * @returns Generated HTML string\n   */\n  private _createTableCellHTML(): string {\n    return COLUMNS.map((column) => {\n      if (column.id === 'alt_frequency') {\n        return createFrequencyColumnHTML();\n      }\n      return (COLUMN_TEMPLATES as Record<string, string>)[column.id] || '';\n    }).join('');\n  }\n\n  // ========================================\n  //  DOM Element Caching\n  // ========================================\n\n  /**\n   * Cache table cell elements\n   *\n   * Pre-cache frequently accessed DOM elements for performance improvement\n   */\n  private _cacheTableCells() {\n    this._cacheBasicElements();\n    this._cacheFrequencyElements();\n    this._cacheFunctionElements();\n  }\n\n  /**\n   * Cache basic table cell elements\n   */\n  private _cacheBasicElements() {\n    // TogoVar ID\n    this.togovarIdAnchor = this.tr.querySelector('td.togovar_id > a');\n\n    // RefSNP ID\n    this.refsnpCell = this.tr.querySelector('td.refsnp_id');\n    this.refsnpAnchor = this.refsnpCell?.querySelector('a') || null;\n\n    // Position\n    const tdPosition = this.tr.querySelector(\n      'td.position > .chromosome-position'\n    );\n    this.positionChromosome = tdPosition?.querySelector('.chromosome') || null;\n    this.positionCoordinate = tdPosition?.querySelector('.coordinate') || null;\n\n    // Ref/Alt\n    const tdRefAlt = this.tr.querySelector('td.ref_alt > .ref-alt');\n    this.refElement = tdRefAlt?.querySelector('span.ref') || null;\n    this.altElement = tdRefAlt?.querySelector('span.alt') || null;\n\n    // Type\n    this.typeElement = this.tr.querySelector('td.type > .variant-type');\n\n    // Gene\n    this.geneCell = this.tr.querySelector('td.gene');\n    this.geneAnchor = this.geneCell?.querySelector('a') || null;\n\n    // Consequence\n    this.consequenceCell = this.tr.querySelector('td.consequence');\n    this.consequenceItem =\n      this.consequenceCell?.querySelector('.consequence-item') || null;\n\n    // Clinical significance\n    const tdClinical = this.tr.querySelector('td.clinical_significance');\n    this.clinicalSignificance =\n      tdClinical?.querySelector('.clinical-significance') || null;\n    this.clinicalAnchor = tdClinical?.querySelector('a') || null;\n    this.clinicalIcon = tdClinical?.querySelector('span.icon') || null;\n  }\n\n  /**\n   * Cache frequency-related table cell elements\n   */\n  private _cacheFrequencyElements() {\n    this.frequencyElements = {};\n    this.tr\n      .querySelectorAll(\n        'td.alt_frequency > logarithmized-block-graph-frequency-view'\n      )\n      .forEach((elm) => {\n        const element = elm as FrequencyElement;\n        const datasetId = element.dataset.dataset;\n        if (datasetId) {\n          this.frequencyElements[datasetId] = element;\n        }\n      });\n  }\n\n  /**\n   * Cache function prediction-related table cell elements\n   */\n  private _cacheFunctionElements() {\n    // AlphaMissense\n    const tdAlphaMissense = this.tr.querySelector('td.alphamissense');\n    this.alphaMissenseFunction =\n      tdAlphaMissense?.querySelector('.variant-function') || null;\n\n    // SIFT\n    const tdSift = this.tr.querySelector('td.sift');\n    this.siftFunction = tdSift?.querySelector('.variant-function') || null;\n\n    // PolyPhen\n    const tdPolyphen = this.tr.querySelector('td.polyphen');\n    this.polyphenFunction =\n      tdPolyphen?.querySelector('.variant-function') || null;\n  }\n\n  // ========================================\n  //  Column Content Updates\n  // ========================================\n\n  /**\n   * Update content for the specified column\n   *\n   * @param column - Column definition to update\n   * @param result - Display data\n   */\n  private _updateColumnContent(column: Column, result: ResultData) {\n    const columnHandlers: Record<string, () => void> = {\n      togovar_id: () =>\n        ResultsColumnUpdater.updateTogovarId(\n          this.togovarIdAnchor,\n          result.id,\n          `/variant/${result.id}`\n        ),\n      refsnp_id: () =>\n        ResultsColumnUpdater.updateRefSNP(\n          this.refsnpCell,\n          this.refsnpAnchor,\n          result.existing_variations\n        ),\n      position: () =>\n        ResultsColumnUpdater.updatePosition(\n          this.positionChromosome,\n          this.positionCoordinate,\n          result.chromosome,\n          result.position\n        ),\n      ref_alt: () =>\n        ResultsColumnUpdater.updateRefAlt(\n          this.refElement,\n          this.altElement,\n          result.reference,\n          result.alternate\n        ),\n      type: () =>\n        ResultsColumnUpdater.updateVariantType(this.typeElement, result.type),\n      gene: () =>\n        ResultsColumnUpdater.updateGene(\n          this.geneCell,\n          this.geneAnchor,\n          result.symbols\n        ),\n      alt_frequency: () =>\n        ResultsColumnUpdater.updateAltFrequency(\n          this.frequencyElements,\n          result.frequencies\n        ),\n      consequence: () =>\n        ResultsColumnUpdater.updateConsequence(\n          this.consequenceCell,\n          this.consequenceItem,\n          result.most_severe_consequence,\n          result.transcripts\n        ),\n      clinical_significance: () =>\n        ResultsColumnUpdater.updateClinicalSignificance(\n          this.clinicalSignificance,\n          this.clinicalAnchor,\n          this.clinicalIcon,\n          result.significance\n        ),\n      alphamissense: () =>\n        ResultsColumnUpdater.updateAlphaMissense(\n          this.alphaMissenseFunction,\n          result.alphamissense\n        ),\n      sift: () =>\n        ResultsColumnUpdater.updateSift(this.siftFunction, result.sift),\n      polyphen: () =>\n        ResultsColumnUpdater.updatePolyphen(\n          this.polyphenFunction,\n          result.polyphen\n        ),\n    };\n    columnHandlers[column.id]?.();\n  }\n\n  // ========================================\n  // Event Handler\n  // ========================================\n\n  /**\n   * Handler for when a row is clicked\n   * Toggles selection state and fires a custom event\n   */\n  private _handleRowClick(): void {\n    storeManager.setData('selectedRow', this.selected ? undefined : this.index);\n\n    // Dispatch custom event to notify tap completion\n    const tapCompletedEvent = new CustomEvent('tapCompleted', {\n      bubbles: true,\n      detail: { rowIndex: this.index },\n    });\n    this.tr.dispatchEvent(tapCompletedEvent);\n  }\n}\n","import { storeManager } from '../../store/StoreManager';\nimport { TR_HEIGHT } from '../../global';\nimport type { DragEventUI, StoreState } from '../../types';\nimport {\n  calculateNewScrollPosition,\n  constrainRowOffsetToValidRange,\n  calculateTouchBasedRowOffset,\n  convertScrollPositionToRowOffset,\n  calculateScrollbarDimensions,\n  ScrollBarRenderer,\n  DragManager,\n} from './scroll';\n\n/**\n * Specialized scrollbar component for Results display (Refactored Version)\n *\n * ## Features\n * - Scroll processing specialized for Results display\n * - Mouse and touch drag support\n * - Automatic position calculation and feedback\n * - Performance optimized\n * - Modular design with separation of concerns\n *\n * ## Usage\n * ```typescript\n * const scrollbar = new ResultsScrollBar(containerElement);\n * ```\n */\nexport class ResultsScrollBar {\n  // Core dom elements\n  private readonly _container: HTMLElement;\n  private readonly _scrollBarElement: HTMLElement;\n  private readonly _positionLabel: HTMLElement;\n  private readonly _totalLabel: HTMLElement;\n\n  // State management\n  private _lastScrollPosition: number = 0;\n\n  // Component dependencies\n  private readonly _renderer: ScrollBarRenderer;\n  private readonly _dragManager: DragManager;\n\n  /**\n   * Creates a new ResultsScrollBar instance\n   * @param containerElement - The container element where the scrollbar will be inserted\n   */\n  constructor(containerElement: HTMLElement) {\n    this._container = containerElement;\n\n    // Create HTML structure\n    ScrollBarRenderer.createScrollBarHTML(this._container);\n\n    // Get DOM elements\n    const { scrollBar, position, total } = ScrollBarRenderer.initializeElements(\n      this._container\n    );\n    this._scrollBarElement = scrollBar;\n    this._positionLabel = position;\n    this._totalLabel = total;\n\n    // Initialize components\n    this._renderer = new ScrollBarRenderer(\n      this._container,\n      this._scrollBarElement,\n      this._positionLabel,\n      this._totalLabel\n    );\n    this._dragManager = new DragManager({\n      scrollBarElement: this._scrollBarElement,\n      container: this._container,\n      onDragCallback: this._handleDrag.bind(this),\n      onVisualStateChange: this._handleVisualStateChange.bind(this),\n    });\n\n    this._bindStoreEvents();\n    this._renderer.resetCursorStyle();\n    this._dragManager.initializeDragManager();\n  }\n\n  /**\n   * Binds this component to store events\n   */\n  private _bindStoreEvents(): void {\n    storeManager.bind('offset', this);\n    storeManager.bind('numberOfRecords', this);\n    storeManager.bind('rowCount', this);\n  }\n\n  // ================================================================\n  // Store Event Handlers\n  // ================================================================\n\n  /**\n   * Store event handler: Called when offset value changes\n   * Updates the displayed position and synchronizes scrollbar appearance\n   * @param offset - The new offset value (0-based index)\n   */\n  offset(offset: number): void {\n    this._renderer.updatePositionLabel(offset);\n    this._synchronizeScrollBarWithStore();\n\n    // Maintain active state on touch devices\n    if (\n      window.matchMedia('(hover: none) and (pointer: coarse)').matches &&\n      this._container.classList.contains('-active')\n    ) {\n      return;\n    }\n  }\n\n  /**\n   * Store event handler: Called when the total record count changes\n   *\n   * This method is automatically invoked by StoreManager when the 'numberOfRecords'\n   * state value changes. It updates the total count display and synchronizes the\n   * scrollbar appearance to reflect the new dataset size.\n   *\n   * @param numberOfRecords - The new total count of records in the dataset\n   */\n  numberOfRecords(numberOfRecords: number): void {\n    this._renderer.updateTotalLabel(numberOfRecords);\n    this._synchronizeScrollBarWithStore();\n  }\n\n  /**\n   * Store event handler: Called when the visible row count changes\n   *\n   * This method is automatically invoked by StoreManager when the 'rowCount'\n   * state value changes. It triggers a UI update to recalculate scrollbar\n   * dimensions based on the new viewport size.\n   */\n  rowCount(): void {\n    this._synchronizeScrollBarWithStore();\n  }\n\n  // ================================================================\n  // Visual State Management\n  // ================================================================\n\n  /**\n   * Deactivates the scrollbar visual state\n   */\n  setInactive(): void {\n    this._renderer.setInactive();\n  }\n\n  /**\n   * Activates the scrollbar visual state\n   */\n  setActive(): void {\n    this._renderer.setActive();\n  }\n\n  // ================================================================\n  // Lifecycle Management\n  // ================================================================\n\n  /**\n   * Clean up all resources and prevent memory leaks\n   * Call this method when the scrollbar component is no longer needed\n   */\n  destroy(): void {\n    // DragManager cleanup\n    this._dragManager.destroyDragManager();\n\n    // Unbind StoreManager event bindings\n    storeManager.unbind('offset', this);\n    storeManager.unbind('numberOfRecords', this);\n    storeManager.unbind('rowCount', this);\n\n    // Renderer timer cleanup\n    this._renderer.clearAllTimeouts();\n\n    // Remove the inner scrollbar element\n    const scrollBarElement = this._container.querySelector('.bar');\n    if (scrollBarElement) {\n      scrollBarElement.remove();\n    }\n  }\n\n  // ================================================================\n  // Scroll Handling\n  // ================================================================\n\n  /**\n   * Handle scroll with scrollbar feedback (for touch events)\n   * @param deltaY - Y delta value\n   * @param touchStartOffset - Starting offset when touch began\n   */\n  handleScrollWithFeedback(deltaY: number, touchStartOffset: number): void {\n    const visibleRowCount = this._getStoreData('rowCount', 0);\n    const totalRecordCount = this._getStoreData('numberOfRecords', 0);\n\n    // Early return if data is invalid\n    if (visibleRowCount <= 0 || totalRecordCount <= 0) {\n      return;\n    }\n\n    const newOffset = calculateTouchBasedRowOffset(\n      deltaY,\n      touchStartOffset,\n      visibleRowCount,\n      totalRecordCount\n    );\n    const boundedOffset = constrainRowOffsetToValidRange(\n      newOffset,\n      visibleRowCount,\n      totalRecordCount\n    );\n\n    this._lastScrollPosition = boundedOffset * TR_HEIGHT;\n    storeManager.setData('offset', boundedOffset);\n    this.updateDirectly(boundedOffset);\n  }\n\n  /**\n   * Handle simple scroll (for wheel events)\n   * @param deltaY - Y delta value\n   */\n  handleScroll(deltaY: number): void {\n    const totalRecordCount = this._getStoreData('numberOfRecords', 0);\n    const visibleRowCount = this._getStoreData('rowCount', 0);\n\n    // Early return if data is invalid\n    if (visibleRowCount <= 0 || totalRecordCount <= 0) {\n      return;\n    }\n\n    const calculation = calculateNewScrollPosition(\n      deltaY,\n      this._lastScrollPosition,\n      totalRecordCount,\n      visibleRowCount\n    );\n\n    if (calculation.newScrollPosition === this._lastScrollPosition) {\n      return;\n    }\n\n    this._lastScrollPosition = calculation.newScrollPosition;\n    const offset = convertScrollPositionToRowOffset(this._lastScrollPosition);\n    storeManager.setData('offset', offset);\n  }\n\n  /**\n   * Update scrollbar directly with specific offset\n   * @param offset - Offset value\n   */\n  updateDirectly(offset: number): void {\n    const visibleRowCount = this._getStoreData('rowCount', 0);\n    const totalRecordCount = this._getStoreData('numberOfRecords', 0);\n\n    // Early return if data is invalid\n    if (visibleRowCount <= 0 || totalRecordCount <= 0) {\n      return;\n    }\n\n    const calculation = calculateScrollbarDimensions(\n      offset,\n      visibleRowCount,\n      totalRecordCount\n    );\n    this._renderer.applyScrollBarStyles(calculation, offset);\n  }\n\n  /**\n   * Reset the scroll position to the initial state\n   */\n  resetScrollPosition(): void {\n    this._lastScrollPosition = 0;\n    this.updateDirectly(0);\n  }\n\n  // ================================================================\n  // Data Access & Validation\n  // ================================================================\n\n  /**\n   * Safely retrieves store data with validation\n   * @param key - Store key to retrieve\n   * @param defaultValue - Default value if data is invalid\n   * @returns The store value or default value\n   */\n  private _getStoreData<T>(key: keyof StoreState, defaultValue: T): T {\n    const value = storeManager.getData<T>(key);\n    return typeof value === 'number' && value >= 0 ? value : defaultValue;\n  }\n\n  /**\n   * Gets all essential scroll data from store with validation\n   * @returns Object containing rowCount, numberOfRecords, and offset\n   */\n  private _getScrollData(): {\n    visibleRowCount: number;\n    totalRecordCount: number;\n    offset: number;\n  } {\n    return {\n      visibleRowCount: this._getStoreData('rowCount', 0),\n      totalRecordCount: this._getStoreData('numberOfRecords', 0),\n      offset: this._getStoreData('offset', 0),\n    };\n  }\n\n  // ================================================================\n  // Visual Updates\n  // ================================================================\n\n  /**\n   * Synchronizes scrollbar appearance with current store data\n   */\n  private _synchronizeScrollBarWithStore(): void {\n    const { offset, visibleRowCount, totalRecordCount } = this._getScrollData();\n\n    const calculation = calculateScrollbarDimensions(\n      offset,\n      visibleRowCount,\n      totalRecordCount\n    );\n\n    this._renderer.updateScrollBarVisualState(\n      calculation,\n      visibleRowCount,\n      totalRecordCount\n    );\n  }\n\n  // ================================================================\n  // Drag Event Handlers\n  // ================================================================\n\n  /**\n   * Handles drag events and updates scroll position\n   * @param top - Drag position\n   */\n  private _handleDrag(top: number): void {\n    // Update scrollbar position via renderer\n    this._renderer.updateScrollBarPosition(top);\n\n    const mockEvent: DragEventUI = { position: { top } };\n    this._processDragPosition(null, mockEvent);\n  }\n\n  /**\n   * Processes drag position and updates scroll state\n   * @param e - The original event (can be null for programmatic calls)\n   * @param ui - Object containing the drag position information\n   */\n  private _processDragPosition(e: Event | null, ui: DragEventUI): void {\n    const visibleRowCount = this._getStoreData('rowCount', 0);\n    const totalRecordCount = this._getStoreData('numberOfRecords', 0);\n\n    // Early return if data is invalid\n    if (visibleRowCount <= 0 || totalRecordCount <= 0) {\n      return;\n    }\n    // Calculate available height for scrollbar movement\n    const availableHeight = visibleRowCount * TR_HEIGHT;\n    const offsetRate = ui.position.top / availableHeight;\n\n    let offset = Math.ceil(offsetRate * totalRecordCount);\n    offset = constrainRowOffsetToValidRange(\n      offset,\n      visibleRowCount,\n      totalRecordCount\n    );\n\n    // Update _lastScrollPosition to maintain consistency with trackpad scrolling\n    this._lastScrollPosition = offset * TR_HEIGHT;\n\n    storeManager.setData('offset', offset);\n    this._renderer.activateDragStateWithAutoRelease();\n  }\n\n  /**\n   * Handles visual state changes during drag operations\n   * @param isDragging - Whether currently dragging\n   */\n  private _handleVisualStateChange(isDragging: boolean): void {\n    this._renderer.updateCursorStyle(isDragging);\n    this._renderer.updateDraggingState(isDragging);\n  }\n}\n","import { storeManager } from '../../store/StoreManager';\nimport { COLUMNS } from '../../global';\nimport { ResultsScrollBar } from './ResultsScrollBar';\nimport { keyDownEvent } from '../../utils/keyDownEvent.js';\nimport { ResultsViewTouchHandler } from './ResultsViewTouchHandler';\nimport { ResultsViewDataManager } from './ResultsViewDataManager';\nimport type { SearchMessages, SearchStatus, ColumnConfig } from '../../types';\nimport { isTouchDevice } from '../../utils/deviceDetection';\n\n// Define DOM selector constants outside the class\nconst SELECTORS = {\n  STATUS: 'header.header > .left > .status',\n  MESSAGES: '#Messages',\n  TABLE_CONTAINER: '.tablecontainer',\n  TABLE_THEAD: '.tablecontainer > table.results-view > thead',\n  TABLE_TBODY: '.tablecontainer > table.results-view > tbody',\n  SCROLL_BAR: '.scroll-bar',\n} as const;\n\n// Define store manager binding keys outside the class\nconst STORE_BINDINGS = [\n  'searchStatus',\n  'searchResults',\n  'columns',\n  'offset',\n  'karyotype',\n  'searchMessages',\n] as const;\n\n/**\n * \n * \n */\nexport class ResultsView {\n  /**  */\n  private elm: HTMLElement;\n  /**  */\n  private touchHandler!: ResultsViewTouchHandler;\n  /**  */\n  private scrollBar!: ResultsScrollBar;\n  /**  */\n  private dataManager!: ResultsViewDataManager;\n  /**  */\n  private tbody!: HTMLElement;\n  /**  */\n  private tablecontainer!: HTMLElement;\n  /**  */\n  private _boundKeydownHandler!: (_e: KeyboardEvent) => void;\n\n  /**\n   * ResultsView\n   * @param elm - \n   */\n  constructor(elm: HTMLElement) {\n    this.elm = elm;\n\n    // DOM\n    const { status, messages, thead, tbody, tablecontainer } =\n      this._getDOMElements();\n    this.tbody = tbody;\n    this.tablecontainer = tablecontainer;\n\n    // \n    this._connectToStoreManager();\n\n    // UI\n    this._configureScrollBar();\n    this._initializeTableHeader(thead);\n    const stylesheet = this._createStylesheet();\n\n    // \n    this._initializeComponentHandlers(status, messages, stylesheet);\n\n    // \n    this._configureInitialState();\n\n    // Initialize search mode listener\n    this._initializeSearchModeListener();\n  }\n\n  // ========================================\n  // Public Methods\n  // ========================================\n\n  /**\n   * Clean up all resources and prevent memory leaks\n   * Call this method when the ResultsView component is no longer needed\n   */\n  destroy(): void {\n    // Clean up ScrollBar component\n    if (this.scrollBar) {\n      this.scrollBar.destroy();\n    }\n\n    // Clean up TouchHandler component\n    if (this.touchHandler) {\n      this.touchHandler.destroy();\n    }\n\n    // Clean up DataManager component\n    if (this.dataManager) {\n      this.dataManager.destroy();\n    }\n\n    // Unbind all StoreManager event bindings\n    STORE_BINDINGS.forEach((key) => {\n      storeManager.unbind(key, this);\n    });\n\n    // Remove keydown event listener\n    document.removeEventListener('keydown', this._boundKeydownHandler);\n  }\n\n  /**\n   * \n   * @param offset - \n   */\n  offset(offset: number): void {\n    this.dataManager.handleOffsetChange(offset);\n  }\n\n  /**\n   * \n   * @param messages - \n   */\n  searchMessages(messages: SearchMessages): void {\n    this.dataManager.handleSearchMessages(messages);\n  }\n\n  /**\n   * \n   * @param status - \n   */\n  searchStatus(status: SearchStatus): void {\n    this.dataManager.handleSearchStatus(status);\n  }\n\n  /**\n   * \n   * @param _results - \n   */\n  searchResults(_results: unknown): void {\n    this.dataManager.handleSearchResults(\n      _results,\n      isTouchDevice(),\n      this.touchHandler.setElementsInteractable.bind(this.touchHandler)\n    );\n  }\n\n  /**\n   * \n   * @param columns - \n   */\n  columns(columns: ColumnConfig[]): void {\n    this.dataManager.handleColumnsChange(columns);\n  }\n\n  /**\n   * \n   */\n  updateDisplaySize(): void {\n    this.dataManager.updateDisplaySize(\n      isTouchDevice(),\n      this.touchHandler.setElementsInteractable.bind(this.touchHandler)\n    );\n  }\n\n  /**\n   * \n   * @param _karyotype - \n   */\n  karyotype(_karyotype: unknown): void {\n    this.updateDisplaySize();\n  }\n\n  // ========================================\n  // Private Methods\n  // ========================================\n\n  /**\n   * DOM\n   */\n  private _getDOMElements() {\n    const status = this.elm.querySelector(SELECTORS.STATUS) as HTMLElement;\n    const messages = this.elm.querySelector(SELECTORS.MESSAGES) as HTMLElement;\n    const thead = this.elm.querySelector(SELECTORS.TABLE_THEAD) as HTMLElement;\n    const tbody = this.elm.querySelector(SELECTORS.TABLE_TBODY) as HTMLElement;\n    const tablecontainer = this.elm.querySelector(\n      SELECTORS.TABLE_CONTAINER\n    ) as HTMLElement;\n\n    return { status, messages, thead, tbody, tablecontainer };\n  }\n\n  /**\n   * \n   * \n   */\n  private _connectToStoreManager(): void {\n    STORE_BINDINGS.forEach((key) => {\n      storeManager.bind(key, this);\n    });\n    this._boundKeydownHandler = this._keydown.bind(this);\n    document.addEventListener('keydown', this._boundKeydownHandler);\n  }\n\n  /**\n   * \n   * \n   */\n  private _configureScrollBar(): void {\n    this.elm\n      .querySelector(SELECTORS.TABLE_CONTAINER)!\n      .insertAdjacentHTML('afterend', '<div class=\"scroll-bar\"></div>');\n    this.scrollBar = new ResultsScrollBar(\n      this.elm.querySelector(SELECTORS.SCROLL_BAR) as HTMLElement\n    );\n  }\n\n  /**\n   * \n   */\n  private _initializeTableHeader(thead: HTMLElement): void {\n    thead.innerHTML = `<tr>${COLUMNS.map(\n      (column) =>\n        `<th class=\"${column.id}\"><p data-tooltip-id=\"table-header-${column.id}\">${column.label}</p></th>`\n    ).join('')}</tr>`;\n  }\n\n  /**\n   * \n   */\n  private _createStylesheet(): HTMLStyleElement {\n    const stylesheet = document.createElement('style');\n    document.getElementsByTagName('head')[0].appendChild(stylesheet);\n    return stylesheet;\n  }\n\n  /**\n   * \n   * \n   */\n  private _initializeComponentHandlers(\n    status: HTMLElement,\n    messages: HTMLElement,\n    stylesheet: HTMLStyleElement\n  ): void {\n    this.touchHandler = new ResultsViewTouchHandler(\n      this.elm,\n      this.tbody,\n      this.tablecontainer\n    );\n    this.dataManager = new ResultsViewDataManager(\n      this.elm,\n      status,\n      messages,\n      this.tbody,\n      stylesheet\n    );\n\n    // \n    this._configureEventHandlers();\n  }\n\n  /**\n   * \n   * \n   */\n  private _configureInitialState(): void {\n    // \n    this.dataManager.handleColumnsChange(storeManager.getData('columns'));\n\n    // pointer-events\n    this.touchHandler.setElementsInteractable(!isTouchDevice());\n  }\n\n  /**\n   * \n   */\n  private getWheelEventName(): string {\n    return 'onwheel' in document\n      ? 'wheel'\n      : 'onmousewheel' in document\n      ? 'mousewheel'\n      : 'DOMMouseScroll';\n  }\n\n  /**\n   * \n   */\n  private _configureEventHandlers(): void {\n    // PC\n    this.tbody.addEventListener(\n      this.getWheelEventName(),\n      this._scroll.bind(this) as EventListener\n    );\n\n    // \n    this.touchHandler.setScrollCallbacks({\n      onScrollStart: () => {\n        this.scrollBar.setActive();\n      },\n      onScroll: (deltaY) => {\n        const currentOffset = storeManager.getData('offset') || 0;\n        this.scrollBar.handleScrollWithFeedback(deltaY, currentOffset);\n      },\n      onScrollEnd: () => {\n        this.scrollBar.setInactive();\n      },\n    });\n  }\n\n  /**\n   * \n   * @param e - \n   */\n  private _scroll(e: WheelEvent): void {\n    e.stopPropagation();\n    // \n    if (e.deltaY === 0) return;\n\n    this.scrollBar.handleScroll(e.deltaY);\n  }\n\n  /**\n   * \n   * @param e - \n   */\n  private _keydown(e: KeyboardEvent): void {\n    if (storeManager.getData('selectedRow') === undefined) return;\n\n    if (keyDownEvent('selectedRow')) {\n      switch (e.key) {\n        case 'ArrowUp': // \n          this.dataManager.shiftSelectedRow(-1);\n          break;\n        case 'ArrowDown': // \n          this.dataManager.shiftSelectedRow(1);\n          break;\n        case 'Escape': // \n          storeManager.setData('selectedRow', undefined);\n          break;\n      }\n    }\n  }\n\n  /**\n   * Initialize search mode listener\n   * Monitors changes to the search mode and reinitializes components as needed.\n   */\n  private _initializeSearchModeListener(): void {\n    storeManager.subscribe('searchMode', (_newMode) => {\n      // Reset scroll position when search mode changes\n      this.scrollBar.resetScrollPosition();\n    });\n  }\n}\n","import { storeManager } from '../../store/StoreManager';\nimport type { ResultsRowView } from './ResultsRowView';\nimport { ResultsViewDisplayManager } from './ResultsViewDisplayManager';\nimport type {\n  DisplayingRegions,\n  SearchMessages,\n  SearchStatus,\n  ColumnConfig,\n  ResultsRecord,\n} from '../../types';\n\ninterface SelectionState {\n  currentIndex: number;\n  rowCount: number;\n  offset: number;\n  numberOfRecords: number;\n}\n\n/**\n * Manages data for the results view.\n * Handles displaying search results, interacting with the store, and managing rows.\n */\nexport class ResultsViewDataManager {\n  private _container: HTMLElement; // Root element\n  private _rows: ResultsRowView[] = []; // Array of result row view instances\n  private _status: HTMLElement; // Status display element\n  private _messages: HTMLElement; // Message display element\n  private _isDestroyed = false; // Track if instance has been destroyed\n\n  _tbody: HTMLElement; // Table body element\n  _stylesheet: HTMLStyleElement; // Stylesheet for column display control\n\n  private _displayManager: ResultsViewDisplayManager;\n\n  /**\n   * Constructor for ResultsViewDataManager.\n   * @param _container - The root element for the results view.\n   * @param _status - The element for displaying status messages.\n   * @param _messages - The element for displaying search messages.\n   * @param _tbody - The table body element where rows are appended.\n   * @param _stylesheet - The stylesheet element for dynamic column styling.\n   */\n  constructor(\n    _container: HTMLElement,\n    _status: HTMLElement,\n    _messages: HTMLElement,\n    _tbody: HTMLElement,\n    _stylesheet: HTMLStyleElement\n  ) {\n    this._container = _container;\n    this._status = _status;\n    this._messages = _messages;\n    this._tbody = _tbody;\n    this._stylesheet = _stylesheet;\n    this._displayManager = new ResultsViewDisplayManager(_tbody, _stylesheet);\n  }\n\n  // ========================================\n  // Display Management\n  // ========================================\n\n  /**\n   * Updates the display size of the results view.\n   * Ensures rows are adjusted based on the available space and updates animations.\n   * @param isTouchDevice - Whether the device supports touch input.\n   * @param setTouchElementsPointerEvents - Function to control pointer-events for touch elements.\n   */\n  updateDisplaySize(\n    isTouchDevice: boolean,\n    setTouchElementsPointerEvents: (_enabled: boolean) => void\n  ): void {\n    if (this._isDestroyed) return;\n    this._displayManager.updateDisplaySize(\n      isTouchDevice,\n      setTouchElementsPointerEvents\n    );\n  }\n\n  /**\n   * Handles the display of search results.\n   * Delegates to ResultsViewDisplayManager and ensures retry logic is respected.\n   * @param _results - The search results (currently unused).\n   * @param isTouchDevice - Whether the device supports touch input.\n   * @param setTouchElementsPointerEvents - Function to control pointer-events for touch elements.\n   */\n  handleSearchResults(\n    _results: unknown,\n    isTouchDevice: boolean,\n    setTouchElementsPointerEvents: (_enabled: boolean) => void\n  ): void {\n    this._displayManager.handleSearchResults(\n      isTouchDevice,\n      setTouchElementsPointerEvents\n    );\n  }\n\n  /**\n   * Controls the visibility of columns in the results table.\n   * Applies styles to show or hide columns based on the provided configuration.\n   * @param columns - Array of column configuration objects.\n   */\n  handleColumnsChange(columns: ColumnConfig[]): void {\n    this._displayManager.handleColumnsChange(columns);\n  }\n\n  // ========================================\n  // Status and Messages Handling\n  // ========================================\n\n  /**\n   * Displays search messages in the UI.\n   * Clears existing messages and appends new ones based on their type (notice, warning, error).\n   * @param messages - The object containing search messages.\n   */\n  handleSearchMessages(messages: SearchMessages): void {\n    this._messages.innerHTML = '';\n\n    this._appendMessageIfExists(messages.notice, 'notice');\n    this._appendMessageIfExists(messages.warning, 'warning');\n    this._appendMessageIfExists(messages.error, 'error');\n  }\n\n  /**\n   * Updates the search status in the UI.\n   * Displays the number of available and filtered variations.\n   * @param status - The object containing search status information.\n   */\n  handleSearchStatus(status: SearchStatus): void {\n    const { available, filtered } = status;\n\n    this._status.innerHTML =\n      `The number of available variations is ${available.toLocaleString()} ` +\n      `out of <span class=\"bigger\">${filtered.toLocaleString()}</span>.`;\n\n    this._updateNotFoundState(filtered === 0);\n  }\n\n  // ========================================\n  // Offset and Selection Handling\n  // ========================================\n\n  /**\n   * Handles changes to the offset value.\n   * Updates the visible regions on the chromosome based on the new offset.\n   * @param offset - The new offset value.\n   */\n  handleOffsetChange(_offset: number): void {\n    if (this._shouldSkipOffsetUpdate()) {\n      return;\n    }\n\n    const displayingRegions = this._calculateDisplayingRegions();\n    if (Object.keys(displayingRegions).length > 0) {\n      storeManager.setData('displayingRegionsOnChromosome', displayingRegions);\n    }\n  }\n\n  /**\n   * Moves the selected row in the specified direction.\n   * Updates the offset and selected row index accordingly.\n   * @param direction - The direction to move the selection (+1 for down, -1 for up).\n   */\n  shiftSelectedRow(direction: number): void {\n    const state = this._getSelectionState();\n    const newIndex = this._calculateNewIndex(state, direction);\n    const adjustedOffset = this._adjustOffsetForSelection(\n      state,\n      newIndex,\n      direction\n    );\n\n    if (adjustedOffset !== state.offset) {\n      storeManager.setData('offset', adjustedOffset);\n    }\n\n    storeManager.setData('selectedRow', newIndex);\n  }\n\n  // ================================================================\n  // Lifecycle Management\n  // ================================================================\n\n  /**\n   * Clean up all resources and row instances\n   * Call this method when the DataManager is no longer needed\n   */\n  destroy(): void {\n    if (this._isDestroyed) return;\n\n    // Clean up all row instances\n    this._rows.forEach((row) => {\n      if (row && typeof row.destroy === 'function') {\n        row.destroy();\n      }\n    });\n    this._rows = [];\n\n    // Clean up display manager (if it has destroy method in the future)\n    // Note: ResultsViewDisplayManager doesn't currently have a destroy method\n\n    // Mark as destroyed to prevent further operations\n    this._isDestroyed = true;\n\n    // Note: DOM references are kept to avoid TypeScript null assertion issues\n    // The _isDestroyed flag ensures the instance won't be used after cleanup\n  }\n\n  // ========================================\n  // Private Methods\n  // ========================================\n\n  /**\n   * Checks if the offset update should be skipped.\n   * @returns True if the offset update should be skipped, false otherwise.\n   */\n  private _shouldSkipOffsetUpdate(): boolean {\n    return (\n      storeManager.getData('isStoreUpdating') ||\n      storeManager.getData('isFetching')\n    );\n  }\n\n  /**\n   * Calculates the regions of the chromosome that are currently displayed.\n   * @returns An object mapping chromosome identifiers to their displaying regions.\n   */\n  private _calculateDisplayingRegions(): DisplayingRegions {\n    const rowCount = storeManager.getData('rowCount');\n    const chromosomePositions: { [key: string]: number[] } = {};\n\n    // Collect chromosome positions from each row's record\n    for (let i = 0; i < rowCount; i++) {\n      const record = storeManager.getRecordByIndex(i) as ResultsRecord;\n\n      if (this._isValidRecord(record)) {\n        (chromosomePositions[record.chromosome] ??= []).push(record.start);\n      }\n    }\n\n    return this._convertToRegions(chromosomePositions);\n  }\n\n  /**\n   * Checks if a record is valid and conforms to the expected structure.\n   * @param record - The record object to validate.\n   * @returns True if the record is valid, false otherwise.\n   */\n  private _isValidRecord(record: unknown): record is ResultsRecord {\n    if (record === null || typeof record !== 'object') {\n      return false;\n    }\n\n    const obj = record as Record<string, unknown>;\n    return typeof obj.chromosome === 'string' && typeof obj.start === 'number';\n  }\n\n  /**\n   * Converts an array of chromosome positions to a regions object.\n   * @param chromosomePositions - The object containing arrays of chromosome positions.\n   * @returns An object mapping chromosome identifiers to their corresponding regions.\n   */\n  private _convertToRegions(chromosomePositions: {\n    [key: string]: number[];\n  }): DisplayingRegions {\n    const regions: DisplayingRegions = {};\n\n    for (const chromosome in chromosomePositions) {\n      const positions = chromosomePositions[chromosome];\n      regions[chromosome] = {\n        start: Math.min(...positions),\n        end: Math.max(...positions),\n      };\n    }\n\n    return regions;\n  }\n\n  /**\n   * Appends a message to the messages element if it exists.\n   * @param message - The message string to append.\n   * @param type - The type of the message (e.g., notice, warning, error).\n   */\n  private _appendMessageIfExists(\n    message: string | undefined,\n    type: string\n  ): void {\n    if (message) {\n      this._messages.innerHTML += `<div class=\"message -${type}\">${message}</div>`;\n    }\n  }\n\n  /**\n   * Updates the UI to reflect the state when no search results are found.\n   * @param isNotFound - True if the not found state is active, false otherwise.\n   */\n  private _updateNotFoundState(isNotFound: boolean): void {\n    if (isNotFound) {\n      this._container.classList.add('-not-found');\n    } else {\n      this._container.classList.remove('-not-found');\n    }\n  }\n\n  /**\n   * Retrieves the current selection state from the store.\n   * @returns An object representing the current selection state.\n   */\n  private _getSelectionState(): SelectionState {\n    return {\n      currentIndex: storeManager.getData('selectedRow'),\n      rowCount: storeManager.getData('rowCount'),\n      offset: storeManager.getData('offset'),\n      numberOfRecords: storeManager.getData('numberOfRecords'),\n    };\n  }\n\n  /**\n   * Calculates a new index for the selected row based on the current state and direction.\n   * @param state - The current selection state.\n   * @param direction - The direction to move the selection (+1 or -1).\n   * @returns The calculated new index for the selected row.\n   */\n  private _calculateNewIndex(state: SelectionState, direction: number): number {\n    const newIndex = state.currentIndex + direction;\n    return Math.max(0, Math.min(newIndex, state.rowCount - 1));\n  }\n\n  /**\n   * Adjusts the offset value based on the selection movement.\n   * Ensures the selected row is visible and adjusts the offset if necessary.\n   * @param state - The current selection state.\n   * @param newIndex - The newly calculated index for the selected row.\n   * @param direction - The direction of the selection movement (+1 or -1).\n   * @returns The adjusted offset value.\n   */\n  private _adjustOffsetForSelection(\n    state: SelectionState,\n    newIndex: number,\n    direction: number\n  ): number {\n    let { offset } = state;\n\n    if (direction < 0 && newIndex === 0 && offset > 0) {\n      // Scroll up\n      offset--;\n    } else if (direction > 0 && newIndex === state.rowCount - 1) {\n      // Scroll down (only if within range)\n      if (offset + newIndex < state.numberOfRecords - 1) {\n        offset++;\n      }\n    }\n\n    return offset;\n  }\n}\n","import { storeManager } from '../../store/StoreManager';\nimport { ResultsRowView } from './ResultsRowView';\nimport { TR_HEIGHT, COMMON_FOOTER_HEIGHT } from '../../global';\nimport type { ColumnConfig, DisplaySizeCalculation } from '../../types';\n\nconst DISPLAY_CALCULATION_MARGIN = 2;\n\nexport class ResultsViewDisplayManager {\n  private _rows: ResultsRowView[] = []; // Array of result row view instances\n  private _tbody: HTMLElement; // Table body element\n  private _stylesheet: HTMLStyleElement; // Stylesheet for column display control\n\n  constructor(tbody: HTMLElement, stylesheet: HTMLStyleElement) {\n    this._tbody = tbody;\n    this._stylesheet = stylesheet;\n  }\n\n  // ========================================\n  // Display Management\n  // ========================================\n\n  /**\n   * Updates the display size of the results view.\n   * Ensures rows are adjusted based on the available space and updates animations.\n   * @param isTouchDevice - Whether the device supports touch input.\n   * @param setTouchElementsPointerEvents - Function to control pointer-events for touch elements.\n   */\n  updateDisplaySize(\n    isTouchDevice: boolean,\n    setTouchElementsPointerEvents: (_enabled: boolean) => void\n  ): void {\n    if (this._shouldSkipUpdate()) {\n      return;\n    }\n\n    const calculation = this._calculateDisplaySize();\n    this._ensureRowsExist(calculation.rowCount);\n    this._adjustOffset(calculation);\n    this._updateRowsWithAnimation(isTouchDevice, setTouchElementsPointerEvents);\n  }\n\n  /**\n   * Handles the display of search results.\n   * Validates data, updates the display size, and manages animations.\n   * Retries if data is being updated or fetched.\n   * @param isTouchDevice - Whether the device supports touch input.\n   * @param setTouchElementsPointerEvents - Function to control pointer-events for touch elements.\n   */\n  handleSearchResults(\n    isTouchDevice: boolean,\n    setTouchElementsPointerEvents: (_enabled: boolean) => void\n  ): void {\n    // Check update flags only once\n    const isUpdating = storeManager.getData('isStoreUpdating');\n    const isFetching = storeManager.getData('isFetching');\n\n    if (isUpdating || isFetching) {\n      requestAnimationFrame(() =>\n        this.handleSearchResults(isTouchDevice, setTouchElementsPointerEvents)\n      );\n      return;\n    }\n\n    if (!this._validateData()) {\n      console.warn('Data validation failed');\n      return;\n    }\n\n    this.updateDisplaySize(isTouchDevice, setTouchElementsPointerEvents);\n  }\n\n  /**\n   * Controls the visibility of columns in the results table.\n   * Applies styles to show or hide columns based on the provided configuration.\n   * @param columns - Array of column configuration objects.\n   */\n  handleColumnsChange(columns: ColumnConfig[]): void {\n    this._clearExistingStyles();\n    this._applyColumnStyles(columns);\n  }\n\n  // ========================================\n  // Private Methods\n  // ========================================\n\n  /**\n   * Checks if the update should be skipped.\n   * @returns True if the update should be skipped, false otherwise.\n   */\n  private _shouldSkipUpdate(): boolean {\n    return storeManager.getData('isFetching');\n  }\n\n  /**\n   * Calculates the display size based on the available height and number of records.\n   * @returns An object containing the calculated display size parameters.\n   */\n  private _calculateDisplaySize(): DisplaySizeCalculation {\n    const availableHeight = this._calculateAvailableHeight();\n    const maxRowCount = Math.floor(availableHeight / TR_HEIGHT);\n    const numberOfRecords = storeManager.getData('numberOfRecords');\n    const offset = storeManager.getData('offset');\n    const rowCount = Math.min(maxRowCount, numberOfRecords);\n\n    storeManager.setData('rowCount', rowCount);\n\n    return {\n      maxRowCount,\n      rowCount,\n      numberOfRecords,\n      offset,\n    };\n  }\n\n  /**\n   * Calculates the available height for the results view.\n   * Considers the karyotype height, footer height, and a margin.\n   * @returns The calculated available height in pixels.\n   */\n  private _calculateAvailableHeight(): number {\n    const karyotypeHeight = storeManager.getData('karyotype')?.height || 0;\n    return (\n      window.innerHeight -\n      this._tbody.getBoundingClientRect().top -\n      karyotypeHeight -\n      COMMON_FOOTER_HEIGHT -\n      DISPLAY_CALCULATION_MARGIN\n    );\n  }\n\n  /**\n   * Ensures that the required number of rows exist in the view.\n   * Adds new row instances if necessary.\n   * @param requiredRowCount - The number of rows that should be present.\n   */\n  private _ensureRowsExist(requiredRowCount: number): void {\n    while (this._rows.length < requiredRowCount) {\n      const rowIndex = this._rows.length;\n      const rowView = new ResultsRowView(rowIndex);\n      this._rows.push(rowView);\n      this._tbody.appendChild(rowView.tr);\n    }\n  }\n\n  /**\n   * Adjusts the offset value based on the display size calculation.\n   * Ensures that enough records are visible and adjusts the offset if there is empty space.\n   * @param calculation - The display size calculation result.\n   */\n  private _adjustOffset(calculation: DisplaySizeCalculation): void {\n    const { maxRowCount, numberOfRecords, offset } = calculation;\n    const visibleRecords = numberOfRecords - offset;\n    const emptySpace = maxRowCount - visibleRecords;\n\n    if (emptySpace > 0) {\n      const newOffset = this._calculateAdjustedOffset(offset, emptySpace);\n      storeManager.setData('offset', newOffset);\n    }\n  }\n\n  /**\n   * Calculates the adjusted offset value to avoid empty space in the results view.\n   * @param currentOffset - The current offset value.\n   * @param emptySpace - The amount of empty space detected.\n   * @returns The adjusted offset value.\n   */\n  private _calculateAdjustedOffset(\n    currentOffset: number,\n    emptySpace: number\n  ): number {\n    if (currentOffset >= emptySpace) {\n      // If the upper gap is larger, set the difference to offset\n      return currentOffset - emptySpace;\n    } else {\n      // If the lower gap is larger, set offset to zero\n      return 0;\n    }\n  }\n\n  /**\n   * Executes row updates within an animation frame.\n   * Calls the updateTableRow method on each row instance.\n   * @param isTouchDevice - Whether the device supports touch input.\n   * @param setTouchElementsPointerEvents - Function to control pointer-events for touch elements.\n   */\n  private _updateRowsWithAnimation(\n    isTouchDevice: boolean,\n    setTouchElementsPointerEvents: (_enabled: boolean) => void\n  ): void {\n    requestAnimationFrame(() => {\n      this._rows.forEach((row) => row.updateTableRow());\n\n      if (isTouchDevice) {\n        setTouchElementsPointerEvents(false);\n      }\n    });\n  }\n\n  /**\n   * Validates the integrity and structure of the data.\n   * @returns True if the data is valid, false otherwise.\n   */\n  private _validateData(): boolean {\n    const results = storeManager.getData('searchResults');\n    const numberOfRecords = storeManager.getData('numberOfRecords');\n\n    return (\n      Array.isArray(results) &&\n      typeof numberOfRecords === 'number' &&\n      numberOfRecords >= 0\n    );\n  }\n\n  /**\n   * Clears existing styles from the stylesheet.\n   * Removes all CSS rules to prepare for new column styles.\n   */\n  private _clearExistingStyles(): void {\n    const sheet = this._stylesheet.sheet;\n    if (!sheet) return;\n\n    while (sheet.cssRules.length > 0) {\n      sheet.deleteRule(0);\n    }\n  }\n\n  /**\n   * Applies column styles based on the provided configuration.\n   * Inserts CSS rules for each column to show or hide them as needed.\n   * @param columns - The array of column configuration objects.\n   */\n  private _applyColumnStyles(columns: ColumnConfig[]): void {\n    const sheet = this._stylesheet.sheet;\n    if (!sheet) return;\n\n    columns.forEach((column, index) => {\n      const displayValue = column.isUsed ? 'table-cell' : 'none';\n      const rule =\n        `.tablecontainer > table.results-view th.${column.id}, ` +\n        `.tablecontainer > table.results-view td.${column.id} { ` +\n        `display: ${displayValue} }`;\n\n      sheet.insertRule(rule, index);\n    });\n  }\n}\n","import type { ScrollCallbacks, TouchState, TouchGesture } from '../../types';\nimport { isTouchDevice } from '../../utils/deviceDetection';\n\n// Selector constant for touch target elements (excluding links for accessibility)\nconst TOUCH_ELEMENTS_SELECTOR =\n  '.tablecontainer > table > tbody > tr, .tablecontainer > table > tbody > td, .tablecontainer > table > tbody > td *:not(a)';\n\n// Touch configuration constants\nconst TOUCH_CONFIG = {\n  SCROLL_SENSITIVITY: 0.1, // Scroll sensitivity adjustment\n  SCROLL_THRESHOLD: 10, // Scroll detection threshold (pixels)\n  TAP_THRESHOLD: 300, // Tap detection threshold (milliseconds)\n} as const;\n\n/**\n * Touch event handler for table-based result interfaces\n *\n * This class provides comprehensive touch interaction management for tabular data displays.\n * It handles device detection, gesture recognition, and pointer event coordination to\n * deliver optimal user experience across different input methods.\n *\n * ## Key Features\n * - **Device Detection**: Automatically detects touch vs mouse/trackpad devices\n * - **Gesture Recognition**: Distinguishes between taps and scroll gestures\n * - **Pointer Event Management**: Controls element interactivity during touch operations\n * - **Scroll Integration**: Provides callbacks for scroll-based data virtualization\n *\n * ## Usage Pattern\n * 1. Create handler with table DOM elements\n * 2. Configure scroll callbacks for data updates\n * 3. Handler automatically manages touch vs mouse interactions\n */\nexport class ResultsViewTouchHandler {\n  private _container: HTMLElement;\n  private _tbody: HTMLElement;\n  private _tablecontainer: HTMLElement;\n  private _isDestroyed = false;\n  private _touchState: TouchState = {\n    startY: 0,\n    startX: 0,\n    startTime: 0,\n    lastY: 0,\n    lastX: 0,\n    distance: 0,\n    duration: 0,\n    isScrolling: false,\n  };\n  private _scrollCallbacks: ScrollCallbacks = {};\n\n  // Bound event handlers for proper cleanup\n  private readonly _boundHandlers = {\n    touchStart: this._handleTouchStart.bind(this),\n    touchMove: this._handleTouchMove.bind(this),\n    touchEnd: this._handleTouchEnd.bind(this),\n    tapCompleted: this._handleTapCompleted.bind(this),\n  };\n\n  /**\n   * Create a new touch handler for table interactions\n   *\n   * @param _container - Root container element containing the table\n   * @param _tbody - Table body element where row interactions occur\n   * @param _tablecontainer - Table container element for scroll area\n   */\n  constructor(\n    _container: HTMLElement,\n    _tbody: HTMLElement,\n    _tablecontainer: HTMLElement\n  ) {\n    this._container = _container;\n    this._tbody = _tbody;\n    this._tablecontainer = _tablecontainer;\n\n    this._setupTouchEvents();\n  }\n\n  // ========================================\n  // Configuration & Callbacks\n  // ========================================\n\n  /**\n   * Configure scroll event callbacks\n   *\n   * Sets up callback functions that will be invoked during touch scroll operations.\n   * These callbacks allow external components to respond to scroll events.\n   *\n   * @param callbacks - Object containing optional callback functions:\n   *   - `onScrollStart`: Called when scroll gesture begins\n   *   - `onScroll`: Called during scroll with deltaY movement\n   *   - `onScrollEnd`: Called when scroll gesture ends\n   *\n   * @example\n   * ```typescript\n   * touchHandler.setScrollCallbacks({\n   *   onScrollStart: () => console.log('Scroll started'),\n   *   onScroll: (deltaY) => updateScrollPosition(deltaY),\n   *   onScrollEnd: () => console.log('Scroll ended')\n   * });\n   * ```\n   */\n  setScrollCallbacks(callbacks: ScrollCallbacks): void {\n    if (this._isDestroyed) return;\n    this._scrollCallbacks = { ...callbacks };\n  }\n\n  // ========================================\n  // Pointer Events Control\n  // ========================================\n\n  /**\n   * Control whether table elements can be touched/interacted with\n   *\n   * ## Use Cases\n   * - **Scroll Mode**: Make elements untouchable to prevent accidental taps during scrolling\n   * - **Normal Mode**: Make elements touchable after scroll gesture completes\n   * - **Gesture Recognition**: Temporarily make elements untouchable during gesture analysis\n   *\n   * @param enabled - Whether elements should be interactable\n   *   - `true`: Elements can be touched/clicked (normal interaction mode)\n   *   - `false`: Elements cannot be touched (scrolling mode)\n   */\n  setElementsInteractable(enabled: boolean): void {\n    // Update pointer-events for all touch-sensitive table elements (excluding links)\n    const touchElements = this._container.querySelectorAll(\n      TOUCH_ELEMENTS_SELECTOR\n    );\n\n    touchElements.forEach((element) => {\n      (element as HTMLElement).style.pointerEvents = enabled ? 'auto' : 'none';\n    });\n  }\n\n  // ================================================================\n  // Lifecycle Management\n  // ================================================================\n\n  /**\n   * Clean up all resources and event listeners\n   * Call this method when the TouchHandler is no longer needed\n   */\n  destroy(): void {\n    if (this._isDestroyed) return;\n\n    const touchElements = [this._tablecontainer, this._tbody];\n\n    // Remove touch event listeners\n    touchElements.forEach((element) => {\n      element.removeEventListener('touchstart', this._boundHandlers.touchStart);\n      element.removeEventListener('touchmove', this._boundHandlers.touchMove);\n      element.removeEventListener('touchend', this._boundHandlers.touchEnd);\n    });\n\n    // Remove tap completed listener\n    this._tbody.removeEventListener(\n      'tapCompleted',\n      this._boundHandlers.tapCompleted\n    );\n\n    // Clear callbacks\n    this._scrollCallbacks = {};\n\n    // Mark as destroyed to prevent further operations\n    this._isDestroyed = true;\n\n    // Note: DOM references are kept to avoid TypeScript null assertion issues\n    // The _isDestroyed flag ensures the instance won't be used after cleanup\n  }\n\n  // ========================================\n  // Initialization & Setup\n  // ========================================\n\n  /**\n   * Set up touch events\n   *\n   * ## Event Configuration\n   * - **passive: true**: Optimizes performance since we don't call preventDefault()\n   *   This allows the browser to perform scroll optimizations without waiting\n   *   to see if preventDefault() will be called.\n   */\n  private _setupTouchEvents(): void {\n    const touchElements = [this._tablecontainer, this._tbody];\n\n    touchElements.forEach((element) => {\n      element.addEventListener('touchstart', this._boundHandlers.touchStart, {\n        passive: true,\n      });\n      element.addEventListener('touchmove', this._boundHandlers.touchMove, {\n        passive: true,\n      });\n      element.addEventListener('touchend', this._boundHandlers.touchEnd, {\n        passive: true,\n      });\n    });\n\n    this._tbody.addEventListener(\n      'tapCompleted',\n      this._boundHandlers.tapCompleted\n    );\n  }\n\n  // ========================================\n  // Touch Event Handlers\n  // ========================================\n\n  /**\n   * Handle touch start event - Initialize touch tracking\n   *\n   * This method is called when a user first touches the screen within the table area.\n   * It initializes the touch state tracking system and enables pointer events for\n   * normal interaction mode.\n   *\n   * @param e - TouchEvent containing touch point information\n   */\n  private _handleTouchStart(e: TouchEvent): void {\n    // Verify the touch is on a valid target with single finger\n    if (!this._isValidTouchTarget(e) || e.touches.length !== 1) {\n      return;\n    }\n\n    // Clear any previous touch state data\n    this._resetTouchState();\n\n    // Record initial touch positions and timestamp\n    const touch = e.touches[0];\n    this._touchState.startY = touch.clientY;\n    this._touchState.startX = touch.clientX;\n    this._touchState.lastY = touch.clientY;\n    this._touchState.lastX = touch.clientX;\n    this._touchState.startTime = Date.now();\n\n    // Enable pointer events for touch elements\n    this.setElementsInteractable(true);\n  }\n\n  /**\n   * Handle touch move event - Process ongoing touch movement\n   *\n   * This method continuously tracks finger movement and determines user intent\n   * (scrolling vs accidental movement). It implements gesture recognition logic\n   * to distinguish between intentional scrolling and minor finger adjustments.\n   *\n   * @param e - TouchEvent containing current touch position\n   */\n  private _handleTouchMove(e: TouchEvent): void {\n    if (!this._isValidTouchTarget(e) || e.touches.length !== 1) {\n      return;\n    }\n\n    const touch = e.touches[0];\n    const gesture = this._analyzeTouchGesture(touch.clientY, touch.clientX);\n\n    // Update distance tracking\n    this._touchState.distance = gesture.distance;\n\n    if (gesture.isScroll) {\n      // Handle scroll gesture initiation\n      if (!this._touchState.isScrolling) {\n        this._touchState.isScrolling = true;\n        this.setElementsInteractable(false);\n        this._scrollCallbacks.onScrollStart?.();\n      }\n\n      // Continue scroll gesture\n      this._touchState.lastY = touch.clientY;\n      this._scrollCallbacks.onScroll?.(\n        -gesture.deltaY * TOUCH_CONFIG.SCROLL_SENSITIVITY\n      );\n    }\n  }\n\n  /**\n   * Handle touch end event - Finalize gesture and restore interaction state\n   *\n   * This method determines the final classification of the completed touch gesture\n   * and restores appropriate interaction state. It handles three scenarios:\n   * successful taps, completed scrolls, and cancelled gestures.\n   *\n   * @param _e - TouchEvent (unused but required for event handler signature)\n   */\n  private _handleTouchEnd(_e: TouchEvent): void {\n    // Calculate total gesture duration\n    this._touchState.duration = Date.now() - this._touchState.startTime;\n\n    // Classify completed gesture\n    const isTap =\n      this._touchState.distance < TOUCH_CONFIG.SCROLL_THRESHOLD &&\n      this._touchState.duration < TOUCH_CONFIG.TAP_THRESHOLD;\n\n    // Handle gesture completion based on classification\n    if (isTap) {\n      // Successful tap - enable interactions for click processing\n      this.setElementsInteractable(true);\n    } else if (this._touchState.isScrolling) {\n      // Completed scroll - keep interactions disabled, notify completion\n      this._touchState.isScrolling = false;\n      this.setElementsInteractable(false);\n      this._scrollCallbacks.onScrollEnd?.();\n    } else {\n      // Cancelled or unrecognized gesture - enable interactions (safe fallback)\n      this.setElementsInteractable(true);\n    }\n\n    // Clean up for next gesture\n    this._resetTouchState();\n  }\n\n  /**\n   * Handle tap completion event - Restore scroll-optimized interaction state\n   *\n   * This method is triggered after a successful tap gesture has been processed\n   * by the UI system. For touch devices, it restores the scroll-optimized state\n   * by disabling pointer events, preventing accidental interactions during\n   * subsequent scroll gestures.\n   *\n   * ## Touch Device Behavior\n   * - **Touch Devices**: Disable interactions to prepare for scrolling\n   * - **Non-Touch Devices**: No action (precise pointer control available)\n   *\n   * @param _e - Custom Event (unused but required for event handler signature)\n   */\n  private _handleTapCompleted(_e: Event): void {\n    if (!isTouchDevice()) return;\n    this.setElementsInteractable(false);\n  }\n\n  // ========================================\n  // Gesture Analysis\n  // ========================================\n\n  /**\n   * Analyze touch gesture to determine user intention (tap vs scroll)\n   *\n   * This method calculates the distance and direction of touch movement\n   * to distinguish between different types of gestures:\n   * - **Tap**: Short duration, minimal movement\n   * - **Scroll**: Vertical movement exceeding threshold\n   *\n   * @param currentY - Current Y coordinate of touch point\n   * @param currentX - Current X coordinate of touch point\n   * @returns Gesture analysis result containing:\n   *   - `isTap`: Whether gesture qualifies as a tap\n   *   - `isScroll`: Whether gesture qualifies as a scroll\n   *   - `deltaY`, `deltaX`: Movement deltas from start position\n   *   - `distance`: Euclidean distance (calculated once for efficiency)\n   */\n  private _analyzeTouchGesture(\n    currentY: number,\n    currentX: number\n  ): TouchGesture {\n    const deltaY = currentY - this._touchState.startY;\n    const deltaX = currentX - this._touchState.startX;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n    const isVerticalScroll = Math.abs(deltaY) > Math.abs(deltaX);\n    const exceedsThreshold = distance > TOUCH_CONFIG.SCROLL_THRESHOLD;\n    const isScroll = isVerticalScroll && exceedsThreshold;\n\n    const duration = Date.now() - this._touchState.startTime;\n    const isTap =\n      distance < TOUCH_CONFIG.SCROLL_THRESHOLD &&\n      duration < TOUCH_CONFIG.TAP_THRESHOLD;\n\n    return {\n      isTap,\n      isScroll,\n      deltaY,\n      deltaX,\n      distance,\n    };\n  }\n\n  // ========================================\n  // Touch Validation & State Management\n  // ========================================\n\n  /**\n   * Check if touch is within valid range\n   */\n  private _isValidTouchTarget(e: TouchEvent): boolean {\n    return (\n      (this._container.contains(e.target as Node) ||\n        this._container.contains(e.currentTarget as Node)) &&\n      (e.currentTarget === this._tablecontainer ||\n        e.currentTarget === this._tbody)\n    );\n  }\n\n  /**\n   * Reset touch state\n   */\n  private _resetTouchState(): void {\n    this._touchState.isScrolling = false;\n    this._touchState.distance = 0;\n    this._touchState.startY = 0;\n    this._touchState.startX = 0;\n    this._touchState.lastY = 0;\n    this._touchState.lastX = 0;\n    this._touchState.startTime = 0;\n    this._touchState.duration = 0;\n  }\n}\n","import type {\n  DragState,\n  DragManagerConfig,\n  TouchEventOptions,\n} from '../../../types';\nimport { supportsMouseInteraction } from '../../../utils/deviceDetection';\n\n/**\n * Class that manages drag functionality with support for both mouse and touch interactions\n */\nexport class DragManager {\n  // Constants\n  private static readonly TOUCH_EVENT_OPTIONS: TouchEventOptions = {\n    passive: false,\n  };\n\n  // State management\n  private _mouseDragState: DragState | undefined;\n  private _isTouchDragging: boolean = false;\n  private _touchStartY: number = 0;\n  private _touchStartTop: number = 0;\n\n  // DOM elements and callbacks\n  private readonly _scrollBarElement: HTMLElement;\n  private readonly _container: HTMLElement;\n  private readonly _onDragCallback: (_top: number) => void;\n  private readonly _onVisualStateChange: (_isDragging: boolean) => void;\n\n  // Event handlers (bound methods for proper cleanup)\n  private readonly _boundMouseDown: (_e: MouseEvent) => void;\n  private readonly _boundMouseMove: (_e: MouseEvent) => void;\n  private readonly _boundMouseUp: () => void;\n  private readonly _boundTouchStart: (_e: TouchEvent) => void;\n  private readonly _boundTouchMove: (_e: TouchEvent) => void;\n  private readonly _boundTouchEnd: (_e: TouchEvent) => void;\n\n  constructor(config: DragManagerConfig) {\n    this._scrollBarElement = config.scrollBarElement;\n    this._container = config.container;\n    this._onDragCallback = config.onDragCallback;\n    this._onVisualStateChange = config.onVisualStateChange;\n\n    // Bind event handlers once for better performance and cleanup\n    this._boundMouseDown = this._onMouseDown.bind(this);\n    this._boundMouseMove = this._onMouseMove.bind(this);\n    this._boundMouseUp = this._onMouseUp.bind(this);\n    this._boundTouchStart = this._onTouchStart.bind(this);\n    this._boundTouchMove = this._onTouchMove.bind(this);\n    this._boundTouchEnd = this._onTouchEnd.bind(this);\n  }\n\n  // ========================================\n  // Lifecycle Management\n  // ========================================\n\n  /**\n   * Initialize drag functionality by setting up event listeners\n   * Automatically detects device capabilities and configures appropriate interaction methods\n   */\n  initializeDragManager(): void {\n    if (this._supportsMouseInteraction()) {\n      this._initializeMouseDrag();\n    }\n    this._initializeTouchDrag();\n  }\n\n  /**\n   * Clean up all event listeners and reset internal state\n   * Call this method when the component is no longer needed to prevent memory leaks\n   */\n  destroyDragManager(): void {\n    this._removeMouseEventListeners();\n    this._removeTouchEventListeners();\n    this._resetState();\n  }\n\n  // ========================================\n  // Device Detection Methods\n  // ========================================\n\n  /**\n   * Check if device supports mouse interaction using shared utility\n   *\n   * @returns true for desktop/laptop with mouse/trackpad, false for touch-only devices\n   * @example\n   * Desktop with mouse: true\n   * Laptop with trackpad: true\n   * Tablet: false\n   * Smartphone: false\n   */\n  private _supportsMouseInteraction(): boolean {\n    return supportsMouseInteraction();\n  }\n\n  // ========================================\n  // Mouse Drag Implementation\n  // ========================================\n\n  /**\n   * Initialize mouse drag functionality\n   */\n  private _initializeMouseDrag(): void {\n    this._mouseDragState = {\n      isDragging: false,\n      startY: 0,\n      startTop: 0,\n    };\n\n    this._attachMouseEventListeners();\n  }\n\n  /**\n   * Attach mouse event listeners\n   */\n  private _attachMouseEventListeners(): void {\n    this._scrollBarElement.addEventListener('mousedown', this._boundMouseDown);\n    document.addEventListener('mousemove', this._boundMouseMove);\n    document.addEventListener('mouseup', this._boundMouseUp);\n  }\n\n  /**\n   * Remove mouse event listeners safely\n   * This method is safe to call multiple times\n   */\n  private _removeMouseEventListeners(): void {\n    // Remove event listener from scrollbar element\n    this._scrollBarElement.removeEventListener(\n      'mousedown',\n      this._boundMouseDown\n    );\n\n    // Remove document-level event listeners (important)\n    document.removeEventListener('mousemove', this._boundMouseMove);\n    document.removeEventListener('mouseup', this._boundMouseUp);\n  }\n\n  // ========================================\n  // Mouse Event Handlers\n  // ========================================\n\n  /**\n   * Mouse down event handler\n   */\n  private _onMouseDown(e: MouseEvent): void {\n    if (!this._mouseDragState) return;\n\n    e.preventDefault();\n    this._mouseDragState.isDragging = true;\n    this._mouseDragState.startY = e.clientY;\n    this._mouseDragState.startTop = this._getCurrentScrollBarTop();\n\n    this._onVisualStateChange(true);\n  }\n\n  /**\n   * Mouse move event handler\n   */\n  private _onMouseMove(e: MouseEvent): void {\n    if (!this._mouseDragState?.isDragging) return;\n\n    e.preventDefault();\n\n    const deltaY = e.clientY - this._mouseDragState.startY;\n    const newTop = this._mouseDragState.startTop + deltaY;\n    const constrainedTop = this._constrainPositionWithinBounds(newTop);\n\n    this._onDragCallback(constrainedTop);\n  }\n\n  /**\n   * Mouse up event handler\n   */\n  private _onMouseUp(): void {\n    if (!this._mouseDragState?.isDragging) return;\n\n    this._mouseDragState.isDragging = false;\n    this._onVisualStateChange(false);\n  }\n\n  // ========================================\n  // Touch Drag Implementation\n  // ========================================\n\n  /**\n   * Initialize touch drag functionality\n   */\n  private _initializeTouchDrag(): void {\n    this._attachTouchEventListeners();\n  }\n\n  /**\n   * Attach touch event listeners\n   */\n  private _attachTouchEventListeners(): void {\n    this._scrollBarElement.addEventListener(\n      'touchstart',\n      this._boundTouchStart,\n      DragManager.TOUCH_EVENT_OPTIONS\n    );\n    this._scrollBarElement.addEventListener(\n      'touchmove',\n      this._boundTouchMove,\n      DragManager.TOUCH_EVENT_OPTIONS\n    );\n    this._scrollBarElement.addEventListener(\n      'touchend',\n      this._boundTouchEnd,\n      DragManager.TOUCH_EVENT_OPTIONS\n    );\n  }\n\n  /**\n   * Remove touch event listeners\n   */\n  private _removeTouchEventListeners(): void {\n    this._scrollBarElement.removeEventListener(\n      'touchstart',\n      this._boundTouchStart\n    );\n    this._scrollBarElement.removeEventListener(\n      'touchmove',\n      this._boundTouchMove\n    );\n    this._scrollBarElement.removeEventListener('touchend', this._boundTouchEnd);\n  }\n\n  // ========================================\n  // Touch Event Handlers\n  // ========================================\n\n  /**\n   * Touch start event handler\n   */\n  private _onTouchStart(e: TouchEvent): void {\n    e.preventDefault();\n    this._isTouchDragging = true;\n    this._touchStartY = e.touches[0].clientY;\n    this._touchStartTop = this._getCurrentScrollBarTop();\n\n    this._onVisualStateChange(true);\n  }\n\n  /**\n   * Touch move event handler\n   */\n  private _onTouchMove(e: TouchEvent): void {\n    if (!this._isTouchDragging) return;\n    e.preventDefault();\n\n    const currentY = e.touches[0].clientY;\n    const deltaY = currentY - this._touchStartY;\n    const newTop = this._touchStartTop + deltaY;\n    const constrainedTop = this._constrainPositionWithinBounds(newTop);\n\n    this._onDragCallback(constrainedTop);\n  }\n\n  /**\n   * Touch end event handler\n   */\n  private _onTouchEnd(e: TouchEvent): void {\n    if (!this._isTouchDragging) return;\n    e.preventDefault();\n\n    this._isTouchDragging = false;\n    this._onVisualStateChange(false);\n  }\n\n  // ========================================\n  // Position Management\n  // ========================================\n\n  /**\n   * Get current scrollbar top position\n   */\n  private _getCurrentScrollBarTop(): number {\n    return parseInt(this._scrollBarElement.style.top) || 0;\n  }\n\n  /**\n   * Constrain position within bounds\n   */\n  private _constrainPositionWithinBounds(newTop: number): number {\n    const maxTop =\n      this._container.offsetHeight - this._scrollBarElement.offsetHeight;\n    return Math.max(0, Math.min(newTop, maxTop));\n  }\n\n  // ========================================\n  // State Management\n  // ========================================\n\n  /**\n   * Reset internal state without affecting DOM elements\n   * This method only clears internal tracking variables\n   */\n  private _resetState(): void {\n    if (this._mouseDragState) {\n      this._mouseDragState.isDragging = false;\n      this._mouseDragState = undefined;\n    }\n    this._isTouchDragging = false;\n    this._touchStartY = 0;\n    this._touchStartTop = 0;\n  }\n}\n","import type { ScrollBarCalculation } from '../../../types';\n\nconst RELEASE_DURATION = 2000;\n\n/**\n * Class responsible for DOM manipulation and rendering of scrollbars\n */\nexport class ScrollBarRenderer {\n  // Constants\n  private static readonly CLASS_CURSOR_GRAB = 'grab';\n  private static readonly CLASS_CURSOR_GRABBING = 'grabbing';\n\n  private static readonly CLASS_ACTIVE = '-active';\n  private static readonly CLASS_DRAGGING = '-dragging';\n  private static readonly CLASS_DISABLED = '-disabled';\n\n  private static readonly CLASS_BAR = 'bar';\n  private static readonly CLASS_POSITION = 'position';\n  private static readonly CLASS_TOTAL = 'total';\n\n  // Instance Properties\n  private _releaseTimeoutId: number | undefined;\n\n  // DOM elements\n  private readonly _container: HTMLElement;\n  private readonly _scrollBarElement: HTMLElement;\n  private readonly _positionLabel: HTMLElement;\n  private readonly _totalLabel: HTMLElement;\n\n  constructor(\n    container: HTMLElement,\n    scrollBarElement: HTMLElement,\n    positionLabel: HTMLElement,\n    totalLabel: HTMLElement\n  ) {\n    this._container = container;\n    this._scrollBarElement = scrollBarElement;\n    this._positionLabel = positionLabel;\n    this._totalLabel = totalLabel;\n  }\n\n  // ========================================\n  // DOM Initialization\n  // ========================================\n\n  /**\n   * Create and inject HTML structure for scrollbar into container\n   * @param container - Container element where scrollbar HTML will be inserted\n   */\n  static createScrollBarHTML(container: HTMLElement): void {\n    container.insertAdjacentHTML(\n      'beforeend',\n      `\n      <div class=\"${ScrollBarRenderer.CLASS_BAR}\">\n        <div class=\"indicator\">\n          <span class=\"${ScrollBarRenderer.CLASS_POSITION}\">1</span>\n          <span class=\"${ScrollBarRenderer.CLASS_TOTAL}\"></span>\n        </div>\n      </div>\n      `\n    );\n  }\n\n  /**\n   * Initialize and validate required DOM elements from container\n   * @param container - Container element containing the scrollbar structure\n   * @returns Object containing validated scrollbar DOM elements\n   */\n  static initializeElements(container: HTMLElement) {\n    const scrollBar = container.querySelector(\n      `.${ScrollBarRenderer.CLASS_BAR}`\n    )! as HTMLElement;\n    const position = scrollBar.querySelector(\n      `.${ScrollBarRenderer.CLASS_POSITION}`\n    )! as HTMLElement;\n    const total = scrollBar.querySelector(\n      `.${ScrollBarRenderer.CLASS_TOTAL}`\n    )! as HTMLElement;\n\n    return { scrollBar, position, total };\n  }\n\n  // ========================================\n  // Label Update\n  // ========================================\n\n  /**\n   * Update position label display\n   * @param offset - Offset value\n   */\n  updatePositionLabel(offset: number): void {\n    this._positionLabel.textContent = String(offset + 1);\n  }\n\n  /**\n   * Update total label\n   * @param numberOfRecords - Total number of records\n   */\n  updateTotalLabel(numberOfRecords: number): void {\n    this._totalLabel.textContent = numberOfRecords.toLocaleString();\n  }\n\n  // ========================================\n  // Position & Size Styling\n  // ========================================\n\n  /**\n   * Apply scrollbar styles with calculation results\n   * @param calculation - Calculation results\n   * @param offset - Offset value\n   */\n  applyScrollBarStyles(\n    calculation: ScrollBarCalculation,\n    offset: number\n  ): void {\n    // Apply bar styles\n    this._scrollBarElement.style.height = `${calculation.barHeight}px`;\n    this._scrollBarElement.style.top = `${calculation.barTop}px`;\n\n    // Update position display\n    this.updatePositionLabel(offset);\n\n    // Maintain active state\n    this._container.classList.add(ScrollBarRenderer.CLASS_ACTIVE);\n  }\n\n  /**\n   * Update scrollbar visual state and disabled status\n   * @param calculation - Calculation results\n   * @param rowCount - Number of visible rows\n   * @param numberOfRecords - Total number of records\n   */\n  updateScrollBarVisualState(\n    calculation: ScrollBarCalculation,\n    rowCount: number,\n    numberOfRecords: number\n  ): void {\n    this._scrollBarElement.style.height = `${calculation.barHeight}px`;\n    this._scrollBarElement.style.top = `${calculation.barTop}px`;\n\n    // Show dragging state when scrollbar updates due to data changes\n    // This provides visual feedback that the scrollbar position/size changed\n    // Auto-release ensures the feedback disappears after users have time to notice\n    this.activateDragStateWithAutoRelease();\n\n    if (rowCount === 0 || numberOfRecords === rowCount) {\n      this._scrollBarElement.classList.add(ScrollBarRenderer.CLASS_DISABLED);\n    } else {\n      this._scrollBarElement.classList.remove(ScrollBarRenderer.CLASS_DISABLED);\n    }\n  }\n\n  /**\n   * Update scrollbar position (top style)\n   * @param top - Top position in pixels\n   */\n  updateScrollBarPosition(top: number): void {\n    this._scrollBarElement.style.top = `${top}px`;\n  }\n\n  // ========================================\n  // Active State Management\n  // ========================================\n\n  /**\n   * Set scrollbar as active\n   */\n  setActive(): void {\n    this._container.classList.add(ScrollBarRenderer.CLASS_ACTIVE);\n  }\n\n  /**\n   * Set scrollbar as inactive\n   */\n  setInactive(): void {\n    this._container.classList.remove(ScrollBarRenderer.CLASS_ACTIVE);\n  }\n\n  // ========================================\n  // Drag State Management\n  // ========================================\n\n  /**\n   * Update dragging state\n   * @param isDragging - Whether currently dragging\n   */\n  updateDraggingState(isDragging: boolean): void {\n    if (isDragging) {\n      // User started dragging: immediately show dragging state\n      this._container.classList.add(ScrollBarRenderer.CLASS_DRAGGING);\n      this._container.classList.add(ScrollBarRenderer.CLASS_ACTIVE);\n    } else {\n      // User stopped dragging: use auto-release to provide visual feedback\n      this.activateDragStateWithAutoRelease();\n    }\n  }\n\n  /**\n   * Activate dragging visual state and schedule its automatic release\n   * Sets the dragging state immediately and schedules removal after delay\n   */\n  activateDragStateWithAutoRelease(): void {\n    // Clear any existing timeout to prevent multiple timers running simultaneously\n    if (this._releaseTimeoutId !== undefined) {\n      window.clearTimeout(this._releaseTimeoutId);\n    }\n\n    // Immediately show dragging state for instant visual feedback\n    // This must happen before setTimeout to ensure users see immediate response\n    this._container.classList.add(ScrollBarRenderer.CLASS_DRAGGING);\n\n    // Schedule automatic removal of dragging state after delay\n    // This provides visual feedback time for users to notice the change\n    // while ensuring the UI returns to normal state automatically\n    this._releaseTimeoutId = window.setTimeout(() => {\n      // Remove dragging state to return scrollbar to normal visual appearance\n      this._container.classList.remove(ScrollBarRenderer.CLASS_DRAGGING);\n      // Clear the timeout ID after execution to maintain clean state\n      this._releaseTimeoutId = undefined;\n    }, RELEASE_DURATION);\n  }\n\n  /**\n   * Update cursor style for drag operations\n   * @param isDragging - Whether currently dragging\n   */\n  updateCursorStyle(isDragging: boolean): void {\n    this._scrollBarElement.style.cursor = isDragging\n      ? ScrollBarRenderer.CLASS_CURSOR_GRABBING\n      : ScrollBarRenderer.CLASS_CURSOR_GRAB;\n  }\n\n  /**\n   * Reset cursor style to default\n   */\n  resetCursorStyle(): void {\n    this._scrollBarElement.style.cursor = ScrollBarRenderer.CLASS_CURSOR_GRAB;\n  }\n\n  // ========================================\n  // Cleanup\n  // ========================================\n\n  /**\n   * Clean up all timeouts and timers\n   * Call this method when the renderer is no longer needed\n   */\n  clearAllTimeouts(): void {\n    if (this._releaseTimeoutId !== undefined) {\n      window.clearTimeout(this._releaseTimeoutId);\n      // CRITICAL: Reset to undefined to prevent memory leaks and state confusion\n      // Without this, the timeout ID remains in memory and state checks become unreliable\n      this._releaseTimeoutId = undefined;\n    }\n  }\n}\n","export {\n  calculateNewScrollPosition,\n  clampValueWithinBounds,\n  convertScrollPositionToRowOffset,\n  calculateTouchBasedRowOffset,\n  constrainRowOffsetToValidRange,\n  calculateScrollbarDimensions,\n} from './scrollCalculator';\nexport { ScrollBarRenderer } from './ScrollBarRenderer';\nexport { DragManager } from './DragManager';\n","import { TR_HEIGHT } from '../../../global';\nimport type {\n  ScrollCalculation,\n  ScrollBarCalculation,\n  ScrollBounds,\n} from '../../../types';\n\nconst MIN_SCROLLBAR_HEIGHT = 30;\n\n/**\n * Collection of pure calculation functions for scroll-related operations.\n * These functions handle scroll position calculations, offset conversions,\n * and scrollbar visual positioning without any side effects.\n */\n\n/**\n * Calculates new scroll position based on wheel/trackpad input.\n * Handles boundary checking to prevent scrolling beyond valid range.\n *\n * @param deltaY - The Y-axis movement delta from scroll events\n * @param currentScrollPosition - Current pixel scroll position\n * @param totalRecordCount - Total number of records in the dataset\n * @param visibleRowCount - Number of rows visible in the viewport\n * @returns Object containing calculated scroll values and constraints\n */\nexport function calculateNewScrollPosition(\n  deltaY: number,\n  currentScrollPosition: number,\n  totalRecordCount: number,\n  visibleRowCount: number\n): ScrollCalculation {\n  const totalContentHeight = totalRecordCount * TR_HEIGHT;\n  let maxScrollableDistance = totalContentHeight - visibleRowCount * TR_HEIGHT;\n  maxScrollableDistance = Math.max(0, maxScrollableDistance);\n\n  const newScrollPosition = clampValueWithinBounds(\n    currentScrollPosition + deltaY,\n    { min: 0, max: maxScrollableDistance }\n  );\n\n  return {\n    totalHeight: totalContentHeight,\n    availableScrollY: maxScrollableDistance,\n    newScrollPosition,\n  };\n}\n\n/**\n * Constrains a numeric value within specified minimum and maximum bounds.\n * Essential for preventing scroll positions from exceeding valid ranges.\n *\n * @param value - The value to constrain\n * @param bounds - Object containing min and max boundary values\n * @returns The value clamped within the specified bounds\n */\nexport function clampValueWithinBounds(\n  value: number,\n  bounds: ScrollBounds\n): number {\n  return Math.max(bounds.min, Math.min(value, bounds.max));\n}\n\n/**\n * Converts pixel-based scroll position to row-based offset.\n * Used to determine which row should be at the top of the viewport.\n *\n * @param scrollPosition - Current scroll position in pixels\n * @returns Row offset (0-based index of the first visible row)\n */\nexport function convertScrollPositionToRowOffset(\n  scrollPosition: number\n): number {\n  return Math.ceil(scrollPosition / TR_HEIGHT);\n}\n\n/**\n * Calculates row offset for touch-based scrolling interactions.\n * Touch scrolling uses proportional movement relative to available space.\n *\n * @param deltaY - Y-axis movement delta from touch events\n * @param touchStartOffset - Row offset when touch interaction began\n * @param visibleRowCount - Number of rows visible in the viewport\n * @param totalRecordCount - Total number of records in the dataset\n * @returns Calculated row offset for the new scroll position\n */\nexport function calculateTouchBasedRowOffset(\n  deltaY: number,\n  touchStartOffset: number,\n  visibleRowCount: number,\n  totalRecordCount: number\n): number {\n  const viewportHeight = visibleRowCount * TR_HEIGHT;\n  const movementRatio = deltaY / viewportHeight;\n\n  return Math.ceil(movementRatio * totalRecordCount) + touchStartOffset;\n}\n\n/**\n * Ensures row offset stays within valid boundaries.\n * Prevents scrolling beyond the first or last available rows.\n *\n * @param offset - Row offset to validate and constrain\n * @param visibleRowCount - Number of rows visible in the viewport\n * @param totalRecordCount - Total number of records in the dataset\n * @returns Constrained offset within valid range [0, maxOffset]\n */\nexport function constrainRowOffsetToValidRange(\n  offset: number,\n  visibleRowCount: number,\n  totalRecordCount: number\n): number {\n  const minOffset = 0;\n  const maxOffset = Math.max(0, totalRecordCount - visibleRowCount);\n\n  return Math.max(minOffset, Math.min(offset, maxOffset));\n}\n\n/**\n * Calculates scrollbar visual properties based on current scroll state.\n * Determines the scrollbar's height, position, and display ratio for proper rendering.\n * Ensures minimum scrollbar height for usability regardless of content size.\n *\n * @param currentRowOffset - Current row offset (first visible row index)\n * @param visibleRowCount - Number of rows visible in the viewport\n * @param totalRecordCount - Total number of records in the dataset\n * @returns Object containing scrollbar height, position, and display ratio\n */\nexport function calculateScrollbarDimensions(\n  currentRowOffset: number,\n  visibleRowCount: number,\n  totalRecordCount: number\n): ScrollBarCalculation {\n  const totalContentHeight = totalRecordCount * TR_HEIGHT;\n  const viewportHeight = visibleRowCount * TR_HEIGHT;\n  const visibilityRatio = viewportHeight / totalContentHeight;\n\n  // Calculate scrollbar height with minimum constraint\n  let scrollbarHeight = Math.ceil(viewportHeight * visibilityRatio);\n  scrollbarHeight = Math.max(scrollbarHeight, MIN_SCROLLBAR_HEIGHT);\n\n  // Calculate scrollbar position within available space\n  const availableScrollSpace = viewportHeight - scrollbarHeight;\n  const positionRatio = availableScrollSpace / totalContentHeight;\n  const scrollbarTopPosition = Math.ceil(\n    currentRowOffset * TR_HEIGHT * positionRatio\n  );\n\n  return {\n    barHeight: scrollbarHeight,\n    barTop: scrollbarTopPosition,\n    displayRate: visibilityRatio,\n  };\n}\n","import { LitElement, html, nothing, type TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport './FrequencyCountValueView'; // for embedding\nimport './ConditionPathogenicityPredictionSearch/PredictionValueView'; // for embedding\nimport type { ConditionTypeValue } from '../definition';\nimport Style from '../../stylesheets/object/component/condition-item-value-view.scss';\n\n@customElement('condition-item-value-view')\nexport class ConditionItemValueView extends LitElement {\n  static styles = [Style];\n\n  @property({ type: String }) label: string = '';\n  @property({ type: String }) conditionType: ConditionTypeValue | undefined;\n  @property({ type: String }) value: string = '';\n  @property({ type: Boolean }) deleteButton: boolean = false;\n\n  private _handleDelete(e: Event): void {\n    e.stopPropagation();\n    this.dispatchEvent(\n      new CustomEvent('delete-condition-item', {\n        detail: this.value,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  // Render the UI as a function of component state\n  render(): TemplateResult {\n    if (this.dataset) {\n      if (this.conditionType) {\n        this.dataset.conditionType = this.conditionType;\n      }\n      this.dataset.value = this.value ?? '';\n    }\n\n    // empty is nothing\n    let option: TemplateResult | typeof nothing = nothing;\n\n    if (this.conditionType === 'dataset' || this.conditionType === 'genotype') {\n      option = html`\n        <frequency-count-value-view data-dataset=\"${this.value}\">\n        </frequency-count-value-view>\n      `;\n    } else if (this.conditionType === 'pathogenicity_prediction') {\n      option = html`\n        <prediction-value-view data-dataset=\"${this.value}\">\n        </prediction-value-view>\n      `;\n    }\n\n    return html`\n      <div class=\"condition-item-value-container\">\n        <span\n          class=\"inner\"\n          data-condition-type=\"${this.conditionType ?? ''}\"\n          data-value=\"${this.value}\"\n        >\n          ${this.label}\n          ${this.deleteButton\n            ? html`<button\n                class=\"delete\"\n                part=\"delete-tag-btn\"\n                @click=${this._handleDelete}\n              ></button>`\n            : nothing}\n        </span>\n        ${option}\n      </div>\n    `;\n  }\n}\n","import type { Inequality } from '../../types';\n\ninterface ThresholdEntry {\n  color: string;\n  min: number;\n  max: number;\n  minInequalitySign: Inequality;\n  maxInequalitySign: Inequality;\n}\nexport type Threshold = Record<string, ThresholdEntry>;\n\nexport const ALPHAMISSENSE_THRESHOLD = {\n  'Likely benign': {\n    color: '#9def3A',\n    min: 0,\n    max: 0.34,\n    minInequalitySign: 'gte',\n    maxInequalitySign: 'lt',\n  },\n  Ambiguous: {\n    color: '#bbba7e',\n    min: 0.34,\n    max: 0.564,\n    minInequalitySign: 'gte',\n    maxInequalitySign: 'lte',\n  },\n  'Likely pathogenic': {\n    color: '#ffae00',\n    min: 0.564,\n    max: 1,\n    minInequalitySign: 'gt',\n    maxInequalitySign: 'lte',\n  },\n} as const satisfies Threshold;\n\nconst SIFT_THRESHOLD = {\n  Tolerated: {\n    color: '#ff5a54',\n    min: 0,\n    max: 0.05,\n    minInequalitySign: 'gte',\n    maxInequalitySign: 'lt',\n  },\n  Deleterious: {\n    color: '#04af58',\n    min: 0.05,\n    max: 1,\n    minInequalitySign: 'gte',\n    maxInequalitySign: 'lte',\n  },\n} as const satisfies Threshold;\n\nconst POLYPHEN_THRESHOLD = {\n  Benign: {\n    color: '#04af58',\n    min: 0,\n    max: 0.446,\n    minInequalitySign: 'gte',\n    maxInequalitySign: 'lte',\n  },\n  Possibly_damaging: {\n    color: '#ffae00',\n    min: 0.446,\n    max: 0.908,\n    minInequalitySign: 'gt',\n    maxInequalitySign: 'lte',\n  },\n  Probably_damaging: {\n    color: '#ff5a54',\n    min: 0.908,\n    max: 1,\n    minInequalitySign: 'gt',\n    maxInequalitySign: 'lte',\n  },\n} as const satisfies Threshold;\n\nexport const PREDICTIONS = {\n  alphamissense: {\n    label: 'AlphaMissense',\n    unassignedLists: ['unassigned'],\n    threshold: ALPHAMISSENSE_THRESHOLD,\n  },\n  sift: {\n    label: 'SIFT',\n    unassignedLists: ['unassigned'],\n    threshold: SIFT_THRESHOLD,\n  },\n  polyphen: {\n    label: 'PolyPhen',\n    unassignedLists: ['unassigned', 'unknown'],\n    threshold: POLYPHEN_THRESHOLD,\n  },\n} as const;\n\nexport type PredictionKey = keyof typeof PREDICTIONS;\nexport type PredictionLabel =\n  (typeof PREDICTIONS)[keyof typeof PREDICTIONS]['label'];\nexport type PredictionDatasets = typeof PREDICTIONS;\n","import { LitElement, html } from 'lit';\nimport { customElement, property, query, queryAll } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\nimport { range } from 'lit/directives/range.js';\nimport { createGradientSlider } from './createGradientSlider';\nimport { capitalizeFirstLetter } from '../../utils/capitalizeFirstLetter';\nimport { setInequalitySign, toggleInequality } from './setInequalitySign';\nimport { type PredictionKey } from './PredictionDatasets';\nimport type {\n  Inequality,\n  UnassignedOption,\n  PredictionChangeDetail,\n} from './../../types';\nimport Styles from '../../../stylesheets/object/component/prediction-range-slider.scss';\n\nconst SLIDER_CONFIG = {\n  min: 0,\n  max: 1,\n  step: 0.01,\n  numberOfScales: 10,\n  sliderWidth: 247.5,\n} as const;\nconst SCALE_INTERVAL =\n  (SLIDER_CONFIG.max - SLIDER_CONFIG.min) / SLIDER_CONFIG.numberOfScales;\n\n/** Class to create a PredictionRangeSlider */\n@customElement('prediction-range-slider')\nexport class PredictionRangeSlider extends LitElement {\n  static styles = [Styles];\n\n  /** dataset name (= prediction key) */\n  @property({ type: String, reflect: true, attribute: 'data-dataset' })\n  predictionScoreName: PredictionKey = 'alphamissense';\n\n  @property({ type: Number, reflect: true, attribute: 'data-min-value' })\n  minValue: number = SLIDER_CONFIG.min;\n\n  @property({ type: Number, reflect: true, attribute: 'data-max-value' })\n  maxValue: number = SLIDER_CONFIG.max;\n\n  @property({\n    type: String,\n    reflect: true,\n    attribute: 'data-min-inequality-sign',\n  })\n  minInequalitySign: Inequality = 'gte';\n\n  @property({\n    type: String,\n    reflect: true,\n    attribute: 'data-max-inequality-sign',\n  })\n  maxInequalitySign: Inequality = 'lte';\n\n  // Candidates for Unassigned/Unknown (for UI generation)\n  @property({ type: Array }) unassignedLists: ReadonlyArray<UnassignedOption> =\n    [];\n\n  // Selected state (Unified to boolean instead of array)\n  @property({ type: Boolean }) includeUnassigned = false;\n  @property({ type: Boolean }) includeUnknown = false; // polyphen \n\n  // Threshold data (used for gradient generation)\n  @property({ type: Object }) activeDataset: Record<\n    string,\n    {\n      color: string;\n      min: number;\n      max: number;\n      minInequalitySign: Inequality;\n      maxInequalitySign: Inequality;\n    }\n  > = {};\n\n  @queryAll('.number-input > input[type=\"number\"]')\n  private _numberInput!: NodeListOf<HTMLInputElement>;\n  @queryAll('.range-input  > input[type=\"range\"]')\n  private _rangeInput!: NodeListOf<HTMLInputElement>;\n  @queryAll('.number-input .inequality-sign')\n  private _inequalitySign!: NodeListOf<HTMLButtonElement>;\n  @query('.slider .bar') private _range!: HTMLDivElement;\n\n  firstUpdated(): void {\n    this._range.style.backgroundImage = createGradientSlider(\n      this.activeDataset,\n      this._range,\n      SLIDER_CONFIG.sliderWidth\n    );\n  }\n\n  // Notify parent when value changes (array unassignedChecks is deprecated)\n  protected updated(changed: Map<string | number | symbol, unknown>): void {\n    if (\n      changed.has('minValue') ||\n      changed.has('maxValue') ||\n      changed.has('minInequalitySign') ||\n      changed.has('maxInequalitySign') ||\n      changed.has('includeUnassigned') ||\n      changed.has('includeUnknown')\n    ) {\n      const detail: PredictionChangeDetail = {\n        dataset: this.predictionScoreName,\n        values: [Number(this.minValue), Number(this.maxValue)],\n        inequalitySigns: [this.minInequalitySign, this.maxInequalitySign],\n        includeUnassigned: this.includeUnassigned,\n        includeUnknown: this.includeUnknown,\n      };\n      this.dispatchEvent(\n        new CustomEvent<PredictionChangeDetail>('set-prediction-values', {\n          detail,\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n  }\n\n  private _handleSliderValues(\n    e: Event,\n    primaryInputs: NodeListOf<HTMLInputElement>,\n    secondaryInputs: NodeListOf<HTMLInputElement>\n  ) {\n    let minValue = parseFloat(primaryInputs[0].value);\n    let maxValue = parseFloat(primaryInputs[1].value);\n\n    const target = e.target as HTMLInputElement;\n\n    if (target.className === 'from') {\n      secondaryInputs[0].value = String(minValue);\n      this._range.style.left = minValue * 100 + '%';\n\n      if (minValue > maxValue) {\n        maxValue = parseFloat(primaryInputs[0].value);\n        primaryInputs[1].value = String(maxValue);\n        secondaryInputs[1].value = String(maxValue);\n        this._range.style.right = 100 - maxValue * 100 + '%';\n      }\n    } else {\n      secondaryInputs[1].value = String(maxValue);\n      this._range.style.right = 100 - maxValue * 100 + '%';\n\n      if (maxValue < minValue) {\n        minValue = parseFloat(primaryInputs[1].value);\n        primaryInputs[0].value = String(minValue);\n        secondaryInputs[0].value = String(minValue);\n        this._range.style.left = minValue * 100 + '%';\n      }\n    }\n\n    this._range.style.backgroundImage = createGradientSlider(\n      this.activeDataset,\n      this._range,\n      SLIDER_CONFIG.sliderWidth\n    );\n    [this.minValue, this.maxValue] = [minValue, maxValue];\n  }\n\n  private _handleThresholdButton = (e: Event) => {\n    const btn = e.currentTarget as HTMLButtonElement;\n    const minValue = parseFloat(btn.dataset.minValue!);\n    const maxValue = parseFloat(btn.dataset.maxValue!);\n    const minInequalitySign = btn.dataset.minInequalitySign as Inequality;\n    const maxInequalitySign = btn.dataset.maxInequalitySign as Inequality;\n\n    [this._rangeInput[0].value, this._numberInput[0].value] = [\n      String(minValue),\n      String(minValue),\n    ];\n    [this._rangeInput[1].value, this._numberInput[1].value] = [\n      String(maxValue),\n      String(maxValue),\n    ];\n\n    setInequalitySign(this._inequalitySign[0], minInequalitySign);\n    setInequalitySign(this._inequalitySign[1], maxInequalitySign);\n\n    this._range.style.left = minValue * 100 + '%';\n    this._range.style.right = 100 - maxValue * 100 + '%';\n    this._range.style.backgroundImage = createGradientSlider(\n      this.activeDataset,\n      this._range,\n      SLIDER_CONFIG.sliderWidth\n    );\n\n    this.minValue = minValue;\n    this.maxValue = maxValue;\n    this.minInequalitySign = minInequalitySign;\n    this.maxInequalitySign = maxInequalitySign;\n  };\n\n  private _handleInequalitySign(e: Event) {\n    const btn = e.currentTarget as HTMLButtonElement;\n    const prev = btn.dataset.inequalitySign as Inequality;\n    const next = toggleInequality(prev);\n    setInequalitySign(btn, next);\n\n    if (next === 'gte' || next === 'gt') {\n      this.minInequalitySign = next;\n    } else {\n      this.maxInequalitySign = next;\n    }\n  }\n\n  // Checkbox  Reflected as boolean\n  private _handleLabelCheckbox(e: Event) {\n    const input = e.currentTarget as HTMLInputElement;\n    const name = input.dataset.name as UnassignedOption | undefined;\n    if (!name) return;\n    const checked = input.checked;\n\n    if (name === 'unassigned') this.includeUnassigned = checked;\n    if (name === 'unknown') this.includeUnknown = checked;\n  }\n\n  private _switchInequalitySign(sign: Inequality) {\n    switch (sign) {\n      case 'gte':\n        return { newSign: 'gt' as Inequality, newHtml: '&#60;' };\n      case 'gt':\n        return { newSign: 'gte' as Inequality, newHtml: '&#8804;' };\n      case 'lte':\n        return { newSign: 'lt' as Inequality, newHtml: '&#60;' };\n      case 'lt':\n        return { newSign: 'lte' as Inequality, newHtml: '&#8804;' };\n    }\n  }\n\n  render() {\n    const createNumberInput = (\n      className: 'from' | 'to',\n      title: string,\n      value: number\n    ) => html`\n      <input\n        type=\"number\"\n        class=${className}\n        title=${title}\n        .value=${String(value)}\n        min=${SLIDER_CONFIG.min}\n        max=${SLIDER_CONFIG.max}\n        step=${SLIDER_CONFIG.step}\n        @input=${(e: Event) =>\n          this._handleSliderValues(e, this._numberInput, this._rangeInput)}\n      />\n    `;\n\n    const createRangeInput = (className: 'from' | 'to', value: number) => html`\n      <input\n        type=\"range\"\n        class=${className}\n        .value=${String(value)}\n        min=${SLIDER_CONFIG.min}\n        max=${SLIDER_CONFIG.max}\n        step=${SLIDER_CONFIG.step}\n        @input=${(e: Event) =>\n          this._handleSliderValues(e, this._rangeInput, this._numberInput)}\n      />\n    `;\n\n    const createInequalitySignButton = (inequalitySign: Inequality) => html`\n      <button\n        class=\"inequality-sign\"\n        type=\"button\"\n        data-inequality-sign=${inequalitySign}\n        @click=${(e: Event) => this._handleInequalitySign(e)}\n      >\n        &#8804;\n      </button>\n    `;\n\n    const createLabelCheckboxes = () => html`\n      ${this.unassignedLists.map((list) => {\n        const id = `${this.predictionScoreName}${capitalizeFirstLetter(list)}`;\n        const checked =\n          list === 'unassigned' ? this.includeUnassigned : this.includeUnknown;\n        return html`\n          <input\n            type=\"checkbox\"\n            id=${id}\n            data-name=${list}\n            .checked=${checked}\n            @change=${(e: Event) => this._handleLabelCheckbox(e)}\n          />\n          <label for=${id}>${capitalizeFirstLetter(list)}</label>\n        `;\n      })}\n    `;\n\n    return html`\n      <div class=\"number-input\">\n        ${createNumberInput('from', 'Lower limit', SLIDER_CONFIG.min)}\n        ${createInequalitySignButton('gte')}\n        <span>Prediction score</span>\n        ${createInequalitySignButton('lte')}\n        ${createNumberInput('to', 'Upper limit', SLIDER_CONFIG.max)}\n        ${createLabelCheckboxes()}\n      </div>\n\n      <div class=\"slider\">\n        <div class=\"bar\"></div>\n        <ul class=\"ruler\">\n          ${map(\n            range(SLIDER_CONFIG.numberOfScales + 1),\n            (i) => html`<li\n              class=\"scale\"\n              style=\"left: calc(${(i * 100) /\n              SLIDER_CONFIG.numberOfScales}% - 0.3rem)\"\n            >\n              ${(SCALE_INTERVAL * i).toFixed(1)}\n            </li>`\n          )}\n        </ul>\n\n        <div class=\"threshold\">\n          ${Object.entries(this.activeDataset).map(\n            ([key, details], i, arr) => html`\n              <div\n                class=\"threshold-line\"\n                style=\"height:${(arr.length - i) * 20 +\n                10}px; left:${details.min * 100}%;\"\n              ></div>\n              <button\n                type=\"button\"\n                class=\"threshold-button\"\n                data-min-value=${details.min}\n                data-max-value=${details.max}\n                data-min-inequality-sign=${details.minInequalitySign}\n                data-max-inequality-sign=${details.maxInequalitySign}\n                style=\"left:${details.min * 100}%; top:${(arr.length - i) *\n                20}px;\"\n                @click=${this._handleThresholdButton}\n              >\n                ${key}\n              </button>\n            `\n          )}\n        </div>\n      </div>\n\n      <div class=\"range-input\">\n        ${createRangeInput('from', SLIDER_CONFIG.min)}\n        ${createRangeInput('to', SLIDER_CONFIG.max)}\n      </div>\n    `;\n  }\n}\n","import { LitElement, html, type TemplateResult } from 'lit';\nimport { customElement, state, query, queryAll } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\nimport { range } from 'lit/directives/range.js';\nimport { createGradientSlider } from './createGradientSlider';\nimport {\n  type Threshold,\n  type PredictionKey,\n  type PredictionLabel,\n  ALPHAMISSENSE_THRESHOLD,\n  PREDICTIONS,\n} from './PredictionDatasets';\nimport { setInequalitySign } from './setInequalitySign';\nimport Styles from '../../../stylesheets/object/component/prediction-value-view.scss';\nimport type {\n  ScoreOrUnassignedFor,\n  PredictionQueryLocal,\n  ScoreRange,\n  Inequality,\n} from '../../types';\n\nconst SLIDER_CONFIG = {\n  numberOfScales: 10,\n  sliderWidth: 100,\n} as const;\n\nconst makeLeaf = <K extends PredictionKey>(\n  k: K,\n  score: ScoreOrUnassignedFor<K>\n) => ({ [k]: { score } } as { [P in K]: { score: ScoreOrUnassignedFor<P> } });\n\n@customElement('prediction-value-view')\nexport class PredictionValueView extends LitElement {\n  static styles = [Styles];\n\n  @state() private _dataset: PredictionKey = 'alphamissense';\n  @state() private _label: PredictionLabel = 'AlphaMissense';\n\n  @state() private _values: [number, number] = [0, 1];\n  @state() private _inequalitySigns: [Inequality, Inequality] = ['gte', 'lte'];\n\n  @state() private _includeUnassigned = false;\n  @state() private _includeUnknown = false; // for polyphen\n\n  // Threshold data used for gradient generation\n  @state() private _activeDataset: Threshold = ALPHAMISSENSE_THRESHOLD;\n\n  @query('.bar') private _bar!: HTMLDivElement;\n  @queryAll('.inequality-sign')\n  private _inequalitySignsEl!: NodeListOf<HTMLElement>;\n\n  firstUpdated(): void {\n    this._setBarStyles();\n  }\n\n  /** Inject UI values from outside */\n  setValues(\n    dataset: PredictionKey,\n    values: [number, number],\n    inequalitySigns: [Inequality, Inequality],\n    includeUnassigned: boolean,\n    includeUnknown: boolean // for polyphen\n  ): void {\n    this._dataset = dataset;\n    this._values = values;\n    this._inequalitySigns = inequalitySigns;\n    this._includeUnassigned = includeUnassigned;\n    this._includeUnknown = includeUnknown; // for polyphen\n\n    this._label = PREDICTIONS[this._dataset].label;\n    this._activeDataset = PREDICTIONS[this._dataset].threshold;\n\n    setInequalitySign(this._inequalitySignsEl[0], this._inequalitySigns[0]);\n    setInequalitySign(this._inequalitySignsEl[1], this._inequalitySigns[1]);\n\n    this._setBarStyles();\n    this.requestUpdate();\n  }\n\n  private _setBarStyles(): void {\n    this._bar.style.left = this._values[0] * 100 + '%';\n    this._bar.style.right = 100 - this._values[1] * 100 + '%';\n    this._bar.style.backgroundImage = createGradientSlider(\n      this._activeDataset,\n      this._bar,\n      SLIDER_CONFIG.sliderWidth\n    );\n  }\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"pathogenicity-graph\">\n        <div class=\"bar\"></div>\n        <ul class=\"ruler\">\n          ${map(\n            range(SLIDER_CONFIG.numberOfScales + 1),\n            (i) =>\n              html`<li\n                class=\"scale\"\n                style=\"\n                  left: calc(${(i * 100) /\n                SLIDER_CONFIG.numberOfScales}% - ${i /\n                SLIDER_CONFIG.numberOfScales}px)\"\n              ></li>`\n          )}\n        </ul>\n      </div>\n      <div class=\"range\">\n        <span class=\"from\">${this._values[0]}</span>\n        <span class=\"inequality-sign\" data-inequality-sign=\"gte\">&#8804;</span>\n        <span class=\"text\">Prediction score</span>\n        <span class=\"inequality-sign\" data-inequality-sign=\"lte\">&#8804;</span>\n        <span class=\"to\">${this._values[1]}</span>\n        <span class=\"text\">\n          ${[\n            this._includeUnassigned && 'Unassigned',\n            this._dataset === 'polyphen' && this._includeUnknown && 'Unknown',\n          ]\n            .filter((x): x is string => Boolean(x))\n            .join(', ')}\n        </span>\n      </div>\n    `;\n  }\n\n  /** Return the current value for UI display */\n  get conditionValues(): {\n    dataset: PredictionKey;\n    label: PredictionLabel;\n    values: [number, number];\n    inequalitySigns: [Inequality, Inequality];\n    includeUnassigned: boolean;\n    includeUnknown: boolean; // for polyphen\n  } {\n    return {\n      dataset: this._dataset,\n      label: this._label,\n      values: this._values,\n      inequalitySigns: this._inequalitySigns,\n      includeUnassigned: this._includeUnassigned,\n      includeUnknown: this._includeUnknown, // for polyphen\n    };\n  }\n\n  /** Return the query shape\n   * Either single or OR (allowing ScoreRange | string[] to match API specs) */\n  get queryValue(): PredictionQueryLocal {\n    const key = this._dataset;\n\n    // No Unassigned check, range only\n    if (this._noLabelSelected()) {\n      return makeLeaf(\n        key,\n        this._toScoreRange(this._values, this._inequalitySigns)\n      );\n    }\n\n    // Point & Non-inclusive pair  Unassigned only\n    const [from, to] = this._values;\n    const [left, right] = this._inequalitySigns;\n    const isPointNonInclusive =\n      from === to && (left === 'gt' || right === 'lt');\n    if (isPointNonInclusive) {\n      return makeLeaf(key, this._labelScoreFor(key));\n    }\n\n    // Otherwise  Unassigned OR Range\n    const leafUnassigned = makeLeaf(key, this._labelScoreFor(key));\n    const leafRange = makeLeaf(\n      key,\n      this._toScoreRange(this._values, this._inequalitySigns)\n    );\n    return { or: [leafUnassigned, leafRange] };\n  }\n\n  /** [from,to] & inequality sign  Normalized to ScoreRange */\n  private _toScoreRange(\n    [from, to]: [number, number],\n    [left, right]: [Inequality, Inequality]\n  ): ScoreRange {\n    if (left === 'gte' && right === 'lte') return { gte: from, lte: to };\n    if (left === 'gte' && right === 'lt') return { gte: from, lt: to };\n    if (left === 'gt' && right === 'lte') return { gt: from, lte: to };\n    if (left === 'gt' && right === 'lt') return { gt: from, lt: to };\n\n    // If only one side is permitted, add as needed.\n    if (left === 'gte') return { gte: from };\n    if (left === 'gt') return { gt: from };\n    if (right === 'lte') return { lte: to };\n    if (right === 'lt') return { lt: to };\n\n    throw new Error('Invalid inequality signs');\n  }\n\n  // Generates and returns a key-dependent array of unassigned labels.\n  private _labelScoreFor<K extends PredictionKey>(\n    k: K\n  ): ScoreOrUnassignedFor<K> {\n    if (k === 'polyphen') {\n      if (this._includeUnassigned && this._includeUnknown) {\n        return ['unassigned', 'unknown'] as const as ScoreOrUnassignedFor<K>;\n      }\n      if (this._includeUnassigned) {\n        return ['unassigned'] as const as ScoreOrUnassignedFor<K>;\n      }\n      if (this._includeUnknown) {\n        return ['unknown'] as const as ScoreOrUnassignedFor<K>;\n      }\n      // \n      return ['unassigned'] as const as ScoreOrUnassignedFor<K>;\n    }\n    // sift / alphamissense\n    return ['unassigned'] as const as ScoreOrUnassignedFor<K>;\n  }\n\n  // Determine whether nothing has been selected\n  private _noLabelSelected(): boolean {\n    if (this._dataset === 'polyphen') {\n      return !(this._includeUnassigned || this._includeUnknown);\n    }\n    return !this._includeUnassigned;\n  }\n}\n","import { LitElement, html } from 'lit';\nimport { customElement, property, queryAll } from 'lit/decorators.js';\nimport type { PredictionChangeDetail } from './../../types';\nimport type { PredictionRangeSlider } from './PredictionRangeSliderView';\nimport type { PredictionKey, PredictionDatasets } from './PredictionDatasets';\nimport Styles from '../../../stylesheets/object/component/tab-view.scss';\n\n/** Class to create a TabView */\n@customElement('tab-view')\nexport class TabView extends LitElement {\n  static styles = [Styles];\n\n  @property({ type: Object })\n  datasets!: PredictionDatasets;\n\n  @queryAll('ul[role=\"tablist\"] > li > a.tab')\n  private _tabButtons!: NodeListOf<HTMLAnchorElement>;\n  @queryAll('.tab-panel > prediction-range-slider')\n  private _sliders!: NodeListOf<PredictionRangeSlider>;\n\n  private _handleSwitchTab(e: Event) {\n    e.preventDefault();\n    const btn = e.currentTarget as HTMLAnchorElement;\n    const activePanelId = btn.getAttribute('href')!.replace('#', '');\n    const activePanel = Array.from(this._sliders).find(\n      (p) => p.id === activePanelId\n    );\n    if (!activePanel) return;\n\n    this._tabButtons.forEach((b) => {\n      b.setAttribute('aria-selected', 'false');\n      b.setAttribute('tabindex', '-1');\n    });\n    this._sliders.forEach((p) => p.setAttribute('hidden', 'true'));\n\n    activePanel.removeAttribute('hidden');\n    btn.setAttribute('aria-selected', 'true');\n    btn.setAttribute('tabindex', '0');\n\n    this._emitSwitchTab(activePanel);\n  }\n\n  private _emitSwitchTab(activePanel: PredictionRangeSlider) {\n    const detail: PredictionChangeDetail = {\n      dataset: activePanel.predictionScoreName,\n      values: [Number(activePanel.minValue), Number(activePanel.maxValue)],\n      inequalitySigns: [\n        activePanel.minInequalitySign,\n        activePanel.maxInequalitySign,\n      ],\n      includeUnassigned: activePanel.includeUnassigned,\n      includeUnknown: activePanel.includeUnknown,\n    };\n    this.dispatchEvent(\n      new CustomEvent<PredictionChangeDetail>('switch-tab', {\n        detail,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  render() {\n    const keys = Object.keys(this.datasets) as PredictionKey[];\n    return html`\n      <ul role=\"tablist\">\n        ${keys.map(\n          (key, i) => html`\n            <li>\n              <a\n                id=${`tab-${key}`}\n                class=\"tab\"\n                href=${`#${key}`}\n                aria-selected=${i === 0}\n                tabindex=${i === 0 ? '0' : '-1'}\n                @click=${(e: Event) => this._handleSwitchTab(e)}\n                >${this.datasets[key].label}\n              </a>\n            </li>\n          `\n        )}\n      </ul>\n\n      <div class=\"tab-panel\">\n        ${keys.map((key, i) => {\n          const details = this.datasets[key];\n          return html`\n            <prediction-range-slider\n              id=${key}\n              aria-labelledby=${`tab-${key}`}\n              .predictionScoreName=${key}\n              .minValue=${0}\n              .maxValue=${1}\n              .minInequalitySign=${'gte'}\n              .maxInequalitySign=${'lte'}\n              .activeDataset=${details.threshold}\n              .unassignedLists=${details.unassignedLists}\n              .includeUnassigned=${false}\n              .includeUnknown=${false}\n              ?hidden=${i !== 0}\n            ></prediction-range-slider>\n          `;\n        })}\n      </div>\n    `;\n  }\n}\n","import type { Threshold } from './PredictionDatasets';\n\ntype GradientStopPx = { color: string; offsetPx: number };\n\nconst clamp = (n: number, min: number, max: number) =>\n  Math.min(max, Math.max(min, n));\n\nfunction getLeftRatio(barEl: HTMLElement): number {\n  const leftValue = (barEl.style.left || '0%').trim();\n  const n = Number.parseFloat(leftValue);\n  return Number.isFinite(n) ? clamp(n / 100, 0, 1) : 0;\n}\n\nexport function createGradientSlider(\n  activeDataset: Threshold,\n  rangeEl: HTMLElement,\n  sliderWidth?: number\n): string {\n  const width =\n    sliderWidth && sliderWidth > 0 ? sliderWidth : rangeEl.clientWidth || 100;\n\n  const leftRatio = getLeftRatio(rangeEl);\n\n  const stops: GradientStopPx[] = Object.values(activeDataset)\n    .flatMap(({ color, min, max }) => [\n      { color, offsetPx: clamp((min - leftRatio) * width, 0, width) },\n      { color, offsetPx: clamp((max - leftRatio) * width, 0, width) },\n    ])\n    .sort((a, b) => a.offsetPx - b.offsetPx);\n\n  if (!stops.length) return 'none';\n\n  const gradientCss = stops.map((s) => `${s.color} ${s.offsetPx}px`).join(', ');\n  return `linear-gradient(to right, ${gradientCss})`;\n}\n","import type { Inequality } from '../../types';\n\nconst SYMBOL: Record<Inequality, string> = {\n  gte: '',\n  lte: '',\n  gt: '<',\n  lt: '<',\n};\n\nexport function setInequalitySign(target: HTMLElement, sign: Inequality): void {\n  target.dataset.inequalitySign = sign;\n  target.textContent = SYMBOL[sign];\n}\n\nexport function toggleInequality(sign: Inequality): Inequality {\n  switch (sign) {\n    case 'gte':\n      return 'gt';\n    case 'gt':\n      return 'gte';\n    case 'lte':\n      return 'lt';\n    case 'lt':\n      return 'lte';\n  }\n}\n","import { LitElement, html, type TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport Style from '../../stylesheets/object/component/frequency-count-value-view.scss';\nimport type {\n  ScoreRange,\n  FrequencyLeaf,\n  FrequencyQuery,\n  GenotypeCount,\n} from '../types';\nimport type { FrequencyDataset, GenotypeKey } from '../definition';\n\n// Display mode constants definition\nexport const MODE = {\n  frequency: 'frequency',\n  count: 'count',\n  alt_alt: 'aac',\n  alt_ref: 'arc',\n  hemi_alt: 'hac',\n} as const;\n\nconst DATASET_MODES = ['frequency', 'count'] as const;\ntype DatasetMode = (typeof DATASET_MODES)[number];\nconst isDatasetMode = (m: DatasetMode | GenotypeMode): m is DatasetMode =>\n  (DATASET_MODES as readonly string[]).includes(m);\n\nconst GENOTYPE_MODES = ['aac', 'arc', 'hac'] as const;\ntype GenotypeMode = (typeof GENOTYPE_MODES)[number];\nconst isGenotypeMode = (m: DatasetMode | GenotypeMode): m is GenotypeMode =>\n  (GENOTYPE_MODES as readonly string[]).includes(m);\n\n/**\n * Web component for visualizing frequency count values\n */\n@customElement('frequency-count-value-view')\nexport class FrequencyCountValueView extends LitElement {\n  static styles = [Style];\n\n  @property({ type: String }) conditionType: 'dataset' | 'genotype' = 'dataset';\n  @property({ type: String }) mode: DatasetMode | GenotypeMode = 'frequency';\n  @property({ type: Number }) from: number | null = 0;\n  @property({ type: Number }) to: number | null = 1;\n  @property({ type: Boolean }) invert: boolean = false;\n  @property({ type: Boolean }) filtered: boolean = false;\n\n  private _bars: NodeListOf<HTMLElement> | undefined;\n\n  /**\n   * Generates the HTML template for the component\n   * For invert mode (frequency only), displays two ranges: \"0.0~from, to~1.0\"\n   * @returns TemplateResult for rendering\n   */\n  render(): TemplateResult {\n    return html`\n      <div class=\"frequencygraph\" ?hidden=${this.mode !== MODE.frequency}>\n        <div class=\"bar -bar1\"></div>\n        <div class=\"bar -bar2\"></div>\n      </div>\n      <div class=\"range\">${this._renderRangeDisplay()}</div>\n      <p class=\"filtered\" ?hidden=${!this.filtered}>\n        Exclude filtered out variants\n      </p>\n    `;\n  }\n\n  /**\n   * Renders the range display based on mode and invert state\n   * @returns Template for the range display\n   */\n  private _renderRangeDisplay(): TemplateResult {\n    // For frequency mode with invert, show two ranges\n    if (this.mode === MODE.frequency && this.invert) {\n      return html`\n        <span class=\"from\">0.0</span>\n        ~\n        <span class=\"to\">${this._formatDisplayValue(this.from)}</span>\n        ,\n        <span class=\"from\">${this._formatDisplayValue(this.to)}</span>\n        ~\n        <span class=\"to\">1.0</span>\n      `;\n    }\n\n    // Default: single range display\n    return html`\n      <span class=\"from\">${this._formatDisplayValue(this.from)}</span>\n      ~\n      <span class=\"to\">${this._formatDisplayValue(this.to)}</span>\n    `;\n  }\n\n  /**\n   * Formats display value based on mode type\n   * For frequency mode, ensures at least one decimal place (e.g., 0.0, 1.0)\n   * For count mode, displays as integer\n   * @param value - The value to format\n   * @returns Formatted string representation\n   */\n  private _formatDisplayValue(value: number | null): string {\n    if (value === null) return '';\n\n    if (this.mode === MODE.frequency) {\n      // For frequency: always show at least 1 decimal place\n      return value.toFixed(Math.max(1, this._getDecimalPlaces(value)));\n    } else {\n      // For count modes: show as integer\n      return value.toString();\n    }\n  }\n\n  /**\n   * Gets the number of decimal places needed to accurately represent a value\n   * @param value - The number to check\n   * @returns Number of decimal places (minimum 1 for frequency)\n   */\n  private _getDecimalPlaces(value: number): number {\n    const str = value.toString();\n    const decimalIndex = str.indexOf('.');\n    if (decimalIndex === -1) return 1; // No decimal point, use 1 decimal place\n    return Math.max(1, str.length - decimalIndex - 1);\n  }\n\n  /**\n   * Initialization process after first rendering\n   * Creates scale elements and gets references to bar elements\n   */\n  firstUpdated(): void {\n    this._bars = this.shadowRoot!.querySelectorAll('.bar');\n    this._createScaleElements();\n  }\n\n  /**\n   * Creates scale elements and adds them to the frequency graph\n   */\n  private _createScaleElements(): void {\n    const frequencyGraph = this.shadowRoot!.querySelector(\n      '.frequencygraph'\n    ) as HTMLElement;\n    const scaleTemplate = document.createElement('div');\n    scaleTemplate.classList.add('scale');\n\n    for (let i = 0; i <= 10; i++) {\n      const scale = scaleTemplate.cloneNode() as HTMLElement;\n      scale.style.left = `calc(${i * 10}% - ${i / 10}px)`;\n      frequencyGraph.appendChild(scale);\n    }\n  }\n\n  /**\n   * Sets component values and updates display\n   * @param conditionType - Type of condition ('dataset' or 'genotype')\n   * @param mode - Display mode\n   * @param from - Range start value\n   * @param to - Range end value\n   * @param invert - Invert mode flag\n   * @param filtered - Filtering status\n   */\n  setValues(\n    conditionType: 'dataset' | 'genotype',\n    mode: DatasetMode | GenotypeMode,\n    from: number | null,\n    to: number | null,\n    invert: boolean,\n    filtered: boolean\n  ): void {\n    this.conditionType = conditionType;\n    this.mode = mode;\n    this.from = from;\n    this.to = to;\n    this.invert = invert;\n    this.filtered = filtered;\n    this.dataset.mode = mode;\n\n    this._updateBarVisualization();\n    this.requestUpdate();\n  }\n\n  /**\n   * Updates bar visualization\n   */\n  private _updateBarVisualization(): void {\n    if (this.mode !== MODE.frequency || !this._bars) return;\n\n    if (!this.invert) {\n      this._setNormalBarMode();\n    } else {\n      this._setInvertBarMode();\n    }\n  }\n\n  /**\n   * Sets normal bar display mode\n   */\n  private _setNormalBarMode(): void {\n    if (!this._bars || this.from === null || this.to === null) return;\n\n    this._bars[0].style.left = `${this.from * 100}%`;\n    this._bars[0].style.width = `${(this.to - this.from) * 100}%`;\n    this._bars[1].style.width = '0%';\n  }\n\n  /**\n   * Sets inverted bar display mode\n   */\n  private _setInvertBarMode(): void {\n    if (!this._bars || this.from === null || this.to === null) return;\n\n    this._bars[0].style.left = '0%';\n    this._bars[0].style.width = `${this.from * 100}%`;\n    this._bars[1].style.left = `${this.to * 100}%`;\n    this._bars[1].style.width = `${(1 - this.to) * 100}%`;\n  }\n\n  // \n  // Query\n  // \n  /**\n   * Generates query value object based on current component state\n   * @returns Query parameter object for filtering\n   */\n  get queryValue(): FrequencyQuery {\n    const nameStr = this.dataset?.dataset ?? '';\n\n    const dataset: { name: FrequencyDataset } = {\n      name: nameStr as FrequencyDataset,\n    };\n\n    if (this.conditionType === 'dataset') {\n      return this._buildDatasetQuery(dataset);\n    } else {\n      return this._buildGenotypeQuery(dataset);\n    }\n  }\n\n  /**\n   * Builds query object for dataset condition type\n   * @param dataset - Dataset information object\n   * @returns Query object for dataset filtering\n   */\n  private _buildDatasetQuery(dataset: {\n    name: FrequencyDataset;\n  }): FrequencyQuery {\n    if (this.invert) {\n      return this._buildInvertedDatasetQuery(dataset);\n    } else {\n      return this._buildNormalDatasetQuery(dataset);\n    }\n  }\n\n  /**\n   * Builds inverted query object for dataset condition\n   * @param dataset - Dataset information object\n   * @returns Inverted query object with OR conditions\n   */\n  private _buildInvertedDatasetQuery(dataset: {\n    name: FrequencyDataset;\n  }): FrequencyQuery {\n    const from = this.from ?? 0;\n    const to = this.to ?? 1;\n    const left: FrequencyLeaf = {\n      frequency: {\n        dataset,\n        frequency: { gte: 0, lte: from },\n        filtered: this.filtered,\n      },\n    };\n    const right: FrequencyLeaf = {\n      frequency: {\n        dataset,\n        frequency: { gte: to, lte: 1 },\n        filtered: this.filtered,\n      },\n    };\n    return { or: [left, right] };\n  }\n\n  /**\n   * Builds normal query object for dataset condition\n   * @param dataset - Dataset information object\n   * @returns Normal query object with range values\n   */\n  private _buildNormalDatasetQuery(dataset: {\n    name: FrequencyDataset;\n  }): FrequencyLeaf {\n    if (!isDatasetMode(this.mode)) {\n      throw new Error(`invalid dataset mode: ${this.mode}`);\n    }\n    const field: DatasetMode = this.mode;\n    const values = this._buildRangeValues();\n    return {\n      frequency: {\n        dataset,\n        [field]: values,\n        filtered: this.filtered,\n      },\n    } as FrequencyLeaf;\n  }\n\n  /**\n   * Builds query object for genotype condition type\n   * @param dataset - Dataset information object\n   * @returns Query object for genotype filtering\n   */\n  private _buildGenotypeQuery(dataset: {\n    name: FrequencyDataset;\n  }): GenotypeCount {\n    const values = this._buildRangeValues();\n\n    if (!isGenotypeMode(this.mode)) {\n      throw new Error(`invalid genotype mode: ${this.mode}`);\n    }\n\n    const key: GenotypeKey = this.mode as GenotypeMode;\n\n    return {\n      frequency: {\n        dataset,\n        genotype: { key, count: values },\n        filtered: this.filtered,\n      },\n    };\n  }\n\n  /**\n   * Builds range values object from current from/to properties\n   * @returns Object containing gte and/or lte values\n   */\n  private _buildRangeValues(): ScoreRange {\n    const hasFrom = this.from !== null && String(this.from) !== '';\n    const hasTo = this.to !== null && String(this.to) !== '';\n    if (hasFrom && hasTo) return { gte: this.from!, lte: this.to! };\n    if (hasFrom) return { gte: this.from! };\n    if (hasTo) return { lte: this.to! };\n\n    // If no value is present, cannot build a valid range query\n    throw new Error(\n      `Cannot build range values: both from and to are null or empty for mode ${this.mode}`\n    );\n  }\n}\n\nexport default FrequencyCountValueView;\n","import { LitElement, html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { ref, createRef } from 'lit/directives/ref.js';\nimport type { Ref } from 'lit/directives/ref.js';\nimport Style from '../../../stylesheets/object/component/search-field.scss';\n\n/** Class to create a only search field */\n@customElement('search-field')\nclass SearchField extends LitElement {\n  static styles = [Style];\n  _inputRef: Ref<HTMLInputElement> = createRef();\n\n  /**\n   * @description Creates a styled search field\n   * All events of the input field are dispatched on the element itself.\n   * Can be attached with JS like this:\n   * ```js\n   * const searchField = new SearchField('Search', document.getElementById('search'));\n   * ```\n   *\n   * Or with Lit like this:\n   * ```js\n   * render() {\n   *   html`\n   *     <search-field-only placeholder=\"Search\"></search-field-only>\n   *   `\n   * }\n   * ```\n   */\n\n  /**\n   * @param {HTMLDivElement} element - HTML element to which the search field is attached. (for vairant id)\n   * @param {string} placeholder - Placeholder text */\n  constructor(element?: HTMLDivElement, placeholder?: string) {\n    super();\n    this.placeholder = placeholder || '';\n\n    if (element) {\n      element.appendChild(this);\n    }\n  }\n\n  @property({ type: String }) placeholder: string = '';\n  @property({ type: String }) value: string = '';\n\n  /** Put a value into input when loaded */\n  connectedCallback(): void {\n    super.connectedCallback();\n    window.addEventListener('load', this._handleLoad);\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    window.removeEventListener('load', this._handleLoad);\n  }\n\n  /** update input value */\n  willUpdate(changed: Map<string | number | symbol, unknown>): void {\n    if (changed.has('value') && this._inputRef.value) {\n      this._inputRef.value.value = this.value;\n    }\n  }\n\n  /** If url has a value, put the value in input (simple search)\n   * @private */\n  private _handleLoad = (): void => {\n    if (this._inputRef.value) {\n      this._inputRef.value.value = this.value;\n    }\n  };\n\n  /**\n   * See {@link SearchFieldtWithSuggestions _handleInput}\n   * @private\n   * @param {Event} e */\n  private _handleInput(e: Event): void {\n    e.preventDefault();\n    const target = e.target as HTMLInputElement;\n    this.value = target.value;\n    this.dispatchEvent(\n      new CustomEvent('input-change', {\n        detail: this.value,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  /** Control the normal behavior when pressing enter\n   * @private\n   * @param {KeyboardEvent} e */\n  private _handleForm(e: KeyboardEvent): void {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n    }\n  }\n\n  /** Fires an event when the cross button is pressed\n   * @private */\n  private _handleResetClick(): void {\n    if (this._inputRef.value) {\n      this._inputRef.value.value = '';\n      this.value = '';\n    }\n    this.dispatchEvent(new CustomEvent('input-reset'));\n  }\n\n  render() {\n    return html` <div class=\"search-field-view\">\n      <div class=\"fieldcontainer\">\n        <div class=\"field\">\n          <form class=\"input-form\" @keydown=${this._handleForm}>\n            <input\n              class=\"searchfield\"\n              part=\"input-field\"\n              ${ref(this._inputRef)}\n              type=\"text\"\n              .placeholder=${this.placeholder}\n              @input=${this._handleInput}\n              required\n            />\n            <button\n              class=\"delete\"\n              type=\"reset\"\n              @click=${this._handleResetClick}\n            ></button>\n          </form>\n        </div>\n      </div>\n    </div>`;\n  }\n}\n\nexport default SearchField;\n","import { LitElement, html } from 'lit';\nimport type { CSSResultGroup, TemplateResult } from 'lit';\nimport { customElement } from 'lit/decorators.js';\n\nimport Styles from '../../../../stylesheets/object/component/simple-search-button.scss';\n\n/** SearchButton -  */\n@customElement('search-button')\nexport default class SearchButton extends LitElement {\n  static styles: CSSResultGroup = [Styles];\n\n  constructor() {\n    super();\n  }\n\n  render(): TemplateResult {\n    return html`<button class=\"btn\"></button>`;\n  }\n}\n","import { API_URL } from '../../../global';\n\n/** SimpleSearchConstants - SimpleSearchView */\n\n/**  */\ndeclare const TOGOVAR_FRONTEND_REFERENCE: 'GRCh37' | 'GRCh38' | string;\n\n/**  */\nexport interface ExampleItem {\n  key: string;\n  value: string;\n}\n\n/**  */\nexport interface SearchFieldConfig {\n  placeholder: string;\n  suggestAPIURL: string;\n  suggestAPIQueryParam: string;\n  options: {\n    valueMappings: {\n      valueKey: string;\n      labelKey: string;\n      aliasOfKey: string;\n    };\n    titleMappings: {\n      gene: string;\n      disease: string;\n    };\n  };\n}\n\n/**  */\nexport const EXAMPLES: ExampleItem[] = (() => {\n  switch (TOGOVAR_FRONTEND_REFERENCE) {\n    case 'GRCh37':\n      return [\n        {\n          key: 'Disease',\n          value: 'Breast-ovarian cancer, familial 2',\n        },\n        {\n          key: 'Gene',\n          value: 'ALDH2',\n        },\n        {\n          key: 'refSNP',\n          value: 'rs114202595',\n        },\n        {\n          key: 'TogoVar',\n          value: 'tgv56616325',\n        },\n        {\n          key: 'Position(GRCh37/hg19)',\n          value: '16:48258198',\n        },\n        {\n          key: 'Region(GRCh37/hg19)',\n          value: '10:73270743-73376976',\n        },\n        {\n          key: 'HGVSc',\n          value: 'NM_000690:c.1510G>A',\n        },\n        {\n          key: 'HGVSp',\n          value: 'ALDH2:p.Glu504Lys',\n        },\n      ];\n    case 'GRCh38':\n      return [\n        {\n          key: 'Disease',\n          value: 'Breast-ovarian cancer, familial 2',\n        },\n        {\n          key: 'Gene',\n          value: 'ALDH2',\n        },\n        {\n          key: 'refSNP',\n          value: 'rs114202595',\n        },\n        {\n          key: 'TogoVar',\n          value: 'tgv56616325',\n        },\n        {\n          key: 'Position(GRCh38)',\n          value: '16:48224287',\n        },\n        {\n          key: 'Region(GRCh38)',\n          value: '10:71510986-71617219',\n        },\n        {\n          key: 'HGVSc',\n          value: 'NM_000690:c.1510G>A',\n        },\n        {\n          key: 'HGVSp',\n          value: 'ALDH2:p.Glu504Lys',\n        },\n      ];\n    default:\n      return [];\n  }\n})();\n\n/**  */\nexport const SEARCH_FIELD_CONFIG: SearchFieldConfig = {\n  placeholder: 'Search for disease or gene symbol or rs...',\n  suggestAPIURL: `${API_URL}/suggest`,\n  suggestAPIQueryParam: 'term',\n  options: {\n    valueMappings: {\n      valueKey: 'term',\n      labelKey: 'term',\n      aliasOfKey: 'alias_of',\n    },\n    titleMappings: {\n      gene: 'Gene names',\n      disease: 'Disease names',\n    },\n  },\n};\n\n/**  */\nexport const CHROMOSOME_PATTERN: RegExp = /([1-9]|1[0-9]|2[0-2]|X|Y|M|MT):\\d+/i;\n","import { setSimpleSearchCondition } from '../../../store/searchManager';\nimport { storeManager } from '../../../store/StoreManager';\nimport { CHROMOSOME_PATTERN } from './SimpleSearchConstants';\nimport type {\n  SimpleSearchHost,\n  SuggestionItem,\n  ExampleItem,\n} from './SimpleSearchTypes';\n\n/**\n * SimpleSearchController - SimpleSearchView\n */\nexport class SimpleSearchController {\n  private host: SimpleSearchHost;\n\n  constructor(host: SimpleSearchHost) {\n    this.host = host;\n  }\n\n  /**\n   * \n   * \n   * @param term - \n   */\n  search(term: string): void {\n    if (CHROMOSOME_PATTERN.test(term)) {\n      term = term.replace(/Chr|ch|Cr|cs/i, '').toUpperCase();\n\n      if (term.includes('M:')) {\n        term = term.replace('M:', 'MT:');\n      }\n    }\n\n    setSimpleSearchCondition('term', term);\n  }\n\n  /**\n   * \n   * @param term - \n   */\n  updateTerm(term: string): void {\n    this.host._term = term;\n\n    // \n    const currentConditions = {\n      ...storeManager.getData('simpleSearchConditions'),\n    };\n    // \n    currentConditions.term = term || '';\n    storeManager.setData('simpleSearchConditions', currentConditions);\n  }\n\n  /**  */\n  reset(): void {\n    this.host._term = '';\n    this.host._value = '';\n    this.host._hideSuggestions = true;\n\n    // \n    setSimpleSearchCondition('term', '');\n  }\n\n  /**\n   * \n   * @param suggestion - \n   */\n  selectSuggestion(suggestion: SuggestionItem): void {\n    this.host._hideSuggestions = true;\n    this.host._value = suggestion.label;\n    this.host._term = suggestion.label;\n    this.search(suggestion.label);\n  }\n\n  /**\n   * \n   * @param example - \n   */\n  selectExample(example: ExampleItem): void {\n    this.host._hideSuggestions = true;\n    this.host._value = example.value;\n    this.host._term = example.value;\n    this.search(example.value);\n  }\n\n  /**\n   * \n   */\n  executeCurrentSearch(): void {\n    if (this.host._term === undefined) return;\n    this.search(this.host._term);\n  }\n\n  /**\n   * \n   */\n  executeButtonSearch(): void {\n    this.search(this.host._term || '');\n  }\n}\n","/** SimpleSearchEventHandlers - SimpleSearchView */\n\nimport type {\n  SimpleSearchHost,\n  SimpleSearchControllerInterface,\n  SuggestionItem,\n  ExampleItem,\n} from './SimpleSearchTypes';\n\nexport class SimpleSearchEventHandlers {\n  private host: SimpleSearchHost;\n  private controller: SimpleSearchControllerInterface;\n\n  constructor(\n    host: SimpleSearchHost,\n    controller: SimpleSearchControllerInterface\n  ) {\n    this.host = host;\n    this.controller = controller;\n  }\n\n  /**\n   * \n   * @param e - new-suggestion-selected \n   */\n  handleSuggestionEnter = (e: CustomEvent<SuggestionItem>): void => {\n    this.controller.selectSuggestion(e.detail);\n  };\n\n  /**\n   * \n   * @param e - example-selected \n   */\n  handleExampleSelected = (e: CustomEvent<ExampleItem>): void => {\n    this.controller.selectExample(e.detail);\n  };\n\n  /**\n   * \n   * @param e - input-term \n   */\n  handleInputTerm = (e: CustomEvent<string>): void => {\n    this.controller.updateTerm(e.detail);\n  };\n\n  /** Enter */\n  handleTermEnter = (): void => {\n    this.controller.executeCurrentSearch();\n  };\n\n  /**  */\n  handleSearchButtonClick = (): void => {\n    this.controller.executeButtonSearch();\n  };\n\n  /**  */\n  handleInputStart = (): void => {\n    this.host._hideSuggestions = false;\n  };\n\n  /**  */\n  handleInputReset = (): void => {\n    this.controller.reset();\n  };\n}\n","import { LitElement, html } from 'lit';\nimport type { CSSResultGroup, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\n\nimport Styles from '../../../../stylesheets/object/component/simple-search-examples.scss';\n\n/**  */\nexport interface ExampleItem {\n  key: string;\n  value: string;\n}\n\n/** SimpleSearchExamples - Simple */\n@customElement('simple-search-examples')\nexport default class SimpleSearchExamples extends LitElement {\n  static styles: CSSResultGroup = [Styles];\n\n  /**  */\n  @property({ type: Array })\n  examples: ExampleItem[] = [];\n\n  /**\n   * \n   * @param example - \n   */\n  private handleClick(example: ExampleItem): void {\n    this.dispatchEvent(\n      new CustomEvent('example-selected', {\n        detail: example,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${map(\n        this.examples,\n        (example: ExampleItem) =>\n          html`<dl @click=${() => this.handleClick(example)}>\n            <dt>${example.key}</dt>\n            <dd>${example.value}</dd>\n          </dl>`\n      )}\n    `;\n  }\n}\n","import { LitElement, html } from 'lit';\nimport type { CSSResultGroup, TemplateResult } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport '../suggestions/SearchFieldWithSuggestions';\nimport './SimpleSearchExamples';\nimport './SimpleSearchButton';\nimport { getSimpleSearchCondition } from '../../../store/searchManager';\nimport { SimpleSearchController } from './SimpleSearchController';\nimport { SimpleSearchEventHandlers } from './SimpleSearchEventHandlers';\nimport { EXAMPLES, SEARCH_FIELD_CONFIG } from './SimpleSearchConstants';\nimport Styles from '../../../../stylesheets/object/component/simple-search-view.scss';\n\n/**\n * SimpleSearchView - \n * \n */\n@customElement('simple-search-view')\nclass SimpleSearchView extends LitElement {\n  static styles: CSSResultGroup = [Styles];\n\n  private _controller: SimpleSearchController;\n  private _eventHandlers: SimpleSearchEventHandlers;\n\n  constructor() {\n    super();\n    const element = document.getElementById('SimpleSearchView');\n    if (element) {\n      element.appendChild(this);\n    }\n\n    // \n    this._controller = new SimpleSearchController(this);\n    this._eventHandlers = new SimpleSearchEventHandlers(this, this._controller);\n  }\n\n  // ============================================================================\n  // State Properties\n  // ============================================================================\n  @state() _value: string = ''; // \n  @state() _term: string = getSimpleSearchCondition('term') || ''; // \n  @state() _hideSuggestions: boolean = true; // \n\n  // ============================================================================\n  // Getter Methods (Controller Access)\n  // ============================================================================\n\n  /**  */\n  get controller(): SimpleSearchController {\n    return this._controller;\n  }\n\n  /**  */\n  get eventHandlers(): SimpleSearchEventHandlers {\n    return this._eventHandlers;\n  }\n\n  // ============================================================================\n  // Event Handler Methods\n  // ============================================================================\n\n  /**  */\n  private _handleSearchButtonClick = (): void => {\n    this._eventHandlers.handleSearchButtonClick();\n  };\n\n  /**  */\n  private _handleExampleSelected = (e: CustomEvent): void => {\n    this._eventHandlers.handleExampleSelected(e);\n  };\n\n  // ============================================================================\n  // Render Method\n  // ============================================================================\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"simple-search-container\">\n        <search-field-with-suggestions\n          exportparts=\"input-field\"\n          .placeholder=${SEARCH_FIELD_CONFIG.placeholder}\n          .suggestAPIURL=${SEARCH_FIELD_CONFIG.suggestAPIURL}\n          .suggestAPIQueryParam=${SEARCH_FIELD_CONFIG.suggestAPIQueryParam}\n          .options=${SEARCH_FIELD_CONFIG.options}\n          .term=${this._term}\n          .hideSuggestions=${this._hideSuggestions}\n          @new-suggestion-selected=${this._eventHandlers.handleSuggestionEnter}\n          @search-term-enter=${this._eventHandlers.handleTermEnter}\n          @input-term=${this._eventHandlers.handleInputTerm}\n          @input=${this._eventHandlers.handleInputStart}\n          @input-reset=${this._eventHandlers.handleInputReset}\n        ></search-field-with-suggestions>\n\n        <search-button @click=${this._handleSearchButtonClick}></search-button>\n      </div>\n      <simple-search-examples\n        .examples=${EXAMPLES}\n        @example-selected=${this._handleExampleSelected}\n      ></simple-search-examples>\n    `;\n  }\n}\n\nexport default SimpleSearchView;\n","import { directive, AsyncDirective } from 'lit/async-directive.js';\nimport type { PartInfo } from 'lit/directive.js';\n\n/**  */\ninterface ViewableArea {\n  height: number;\n  width: number;\n}\n\n/**  */\ninterface ScrollCalculation {\n  scrollTop: number;\n  scrollBot: number;\n  shouldScrollTop: boolean;\n}\n\n/**\n * Lit\n */\nclass ScrollIntoView extends AsyncDirective {\n  render(): void {}\n\n  /**\n   * \n   * @param part - Lit\n   * @param selected - \n   */\n  update(part: PartInfo, [selected]: [boolean]): void {\n    if (!selected) {\n      return;\n    }\n\n    const element = this._getElementFromPart(part);\n    if (!element?.parentElement) {\n      return;\n    }\n\n    this._scrollParentToChild(element.parentElement, element);\n  }\n\n  /**\n   * PartInfo\n   * @param part - Lit\n   * @returns null\n   */\n  private _getElementFromPart(part: PartInfo): Element | null {\n    // element\n    if ('element' in part && part.element) {\n      return part.element as Element;\n    }\n    return null;\n  }\n\n  /**\n   * \n   * @param parentRect - \n   * @param childRect - \n   * @param viewableArea - \n   * @returns \n   */\n  private _isElementViewable(\n    parentRect: DOMRect,\n    childRect: DOMRect,\n    viewableArea: ViewableArea\n  ): boolean {\n    return (\n      childRect.top >= parentRect.top &&\n      childRect.bottom <= parentRect.top + viewableArea.height\n    );\n  }\n\n  /**\n   * \n   * @param parentRect - \n   * @param childRect - \n   * @returns \n   */\n  private _calculateScrollDirection(\n    parentRect: DOMRect,\n    childRect: DOMRect\n  ): ScrollCalculation {\n    const scrollTop = childRect.top - parentRect.top;\n    const scrollBot = childRect.bottom - parentRect.bottom;\n\n    return {\n      scrollTop,\n      scrollBot,\n      shouldScrollTop: Math.abs(scrollTop) < Math.abs(scrollBot),\n    };\n  }\n\n  /**\n   * \n   *\n   * \n   * \n   * \n   *\n   * @param parent - \n   * @param child - \n   */\n  private _scrollParentToChild(parent: Element, child: Element): void {\n    const parentRect = parent.getBoundingClientRect();\n    const viewableArea: ViewableArea = {\n      height: parent.clientHeight,\n      width: parent.clientWidth,\n    };\n\n    const childRect = child.getBoundingClientRect();\n\n    // \n    if (this._isElementViewable(parentRect, childRect, viewableArea)) {\n      return;\n    }\n\n    // \n    const scrollCalc = this._calculateScrollDirection(parentRect, childRect);\n\n    // \n    const scrollAmount = scrollCalc.shouldScrollTop\n      ? scrollCalc.scrollTop\n      : scrollCalc.scrollBot;\n\n    parent.scrollTop += scrollAmount;\n  }\n}\n\n/**\n * Lit\n * @param selected \n */\nexport const scrollIntoView = directive(ScrollIntoView);\n","import { LitElement, html, nothing } from 'lit';\nimport type { CSSResultGroup, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport Styles from '../../../../stylesheets/object/component/search-field-suggestions-list.scss';\nimport { scrollIntoView } from '../scrollIntoView';\n\n/** Suggestion data structure */\ninterface SuggestionItem {\n  term?: string;\n  alias_of?: string;\n  highlight?: string;\n  id?: string;\n  name?: string;\n  symbol?: string;\n  [key: string]: any;\n}\n\n/** Class to create a list of suggestions */\n@customElement('search-field-suggestions-list')\nclass SearchFieldSuggestionsList extends LitElement {\n  static styles: CSSResultGroup = [Styles];\n\n  /** Suggestions data */\n  @property({ type: Array }) suggestData: SuggestionItem[] = [];\n\n  /** Highlighted item's index (by keys) */\n  @property({ type: Number }) highlightedSuggestionIndex: number = -1;\n\n  /** What of an item to map to dispatched event's detail.id */\n  @property() itemIdKey: string = '';\n\n  /** What of an item to map to dispatched event's detail.label */\n  @property() itemLabelKey: string = '';\n\n  /** If there is alias_of -kind of data, where in data to see for it */\n  @property() subTextKey: string = '';\n\n  /** Column title in case of Simple search */\n  @property() title: string = '';\n\n  /** Whether API response has been received */\n  @property({ type: Boolean }) hasApiResponse: boolean = false;\n\n  /**\n   * Handle suggestion selection\n   * @param item - The selected suggestion item\n   */\n  private _handleSelect(item: SuggestionItem): void {\n    this.dispatchEvent(\n      new CustomEvent('suggestion-selected', {\n        detail: item,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${this.title ? html`<h3 class=\"title\">${this.title}</h3>` : nothing}\n      <ul class=\"list\">\n        ${!this.hasApiResponse\n          ? nothing\n          : !this.suggestData || this.suggestData.length === 0\n          ? html`<li class=\"item -empty\">No results</li>`\n          : map(\n              this.suggestData,\n              (item: SuggestionItem, index: number) => html`\n                <li\n                  class=\"item ${this.highlightedSuggestionIndex === index\n                    ? '-selected'\n                    : ''}\"\n                  @mousedown=\"${() => this._handleSelect(item)}\"\n                  ${(scrollIntoView as any)(\n                    this.highlightedSuggestionIndex === index\n                  )}\n                >\n                  ${unsafeHTML(item?.highlight || item?.[this.itemLabelKey])}\n                  ${this.subTextKey && item?.[this.subTextKey]\n                    ? html`<span class=\"sub\">\n                        alias: ${item[this.subTextKey]}</span\n                      >`\n                    : nothing}\n                </li>\n              `\n            )}\n      </ul>\n    `;\n  }\n}\n\nexport default SearchFieldSuggestionsList;\n","import { LitElement, html, nothing } from 'lit';\nimport type {\n  ReactiveControllerHost,\n  CSSResultGroup,\n  TemplateResult,\n} from 'lit';\nimport { customElement, state, property } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\n\nimport '../SearchField';\nimport './SearchFieldSuggestionsList';\nimport { SearchFieldController } from './handlers/SearchFieldController';\nimport { SuggestionKeyboardHandler } from './handlers/SuggestionKeyboardHandler';\nimport { SuggestionSelectionHandler } from './handlers/SuggestionSelectionHandler';\nimport { InputEventHandler } from './handlers/InputEventHandler';\n\nimport Styles from '../../../../stylesheets/object/component/search-field-with-suggestions.scss';\n\n/** SearchFieldWithSuggestions */\nconst DEFAULT_VALUE_MAPPINGS = {\n  valueKey: 'id',\n  labelKey: 'term',\n  aliasOfKey: 'alias_of',\n} as const;\n\n/**\n * SearchFieldOptions\n * @param options - \n * @returns SearchFieldOptions\n */\nfunction createCompleteSearchFieldOptions(\n  options?: Partial<SearchFieldOptions>\n): SearchFieldOptions {\n  return {\n    valueMappings: {\n      valueKey:\n        options?.valueMappings?.valueKey || DEFAULT_VALUE_MAPPINGS.valueKey,\n      labelKey:\n        options?.valueMappings?.labelKey || DEFAULT_VALUE_MAPPINGS.labelKey,\n      aliasOfKey:\n        options?.valueMappings?.aliasOfKey || DEFAULT_VALUE_MAPPINGS.aliasOfKey,\n    },\n    titleMappings: options?.titleMappings || {},\n  };\n}\n\n/** Suggestion data structure */\nexport interface SuggestionData {\n  term?: string;\n  alias_of?: string;\n  highlight?: string;\n  id?: string;\n  name?: string;\n  symbol?: string;\n  [key: string]: any;\n}\n\n/** Options for configuring the search field behavior */\nexport interface SearchFieldOptions {\n  /** Mappings for suggestion values */\n  valueMappings: {\n    valueKey: string; // Key to map to the value (usually \"id\")\n    labelKey: string; // Key to map to the label\n    aliasOfKey?: string; // Key to map to the subText (optional)\n  };\n  titleMappings?: { [key: string]: string }; // Mappings for suggestion titles (optional)\n}\n\n/** Host interface for handlers */\nexport interface SearchFieldHost extends ReactiveControllerHost {\n  _searchFieldOptions: SearchFieldOptions;\n  _suggestionKeysArray: string[];\n  value: string;\n  label: string;\n  term: string;\n  showSuggestions: boolean;\n  suppressSuggestions: boolean;\n  hasApiResponse: boolean;\n  hasUserInput: boolean;\n  currentSuggestionIndex: number;\n  currentSuggestionColumnIndex: number;\n  suggestData: { [key: string]: SuggestionData[] };\n  hideSuggestionsMethod(): void;\n  selectSuggestion(suggestion: SuggestionData): void;\n  searchWithoutSuggestion(term: string): void;\n  selectCurrentSuggestion(): void;\n  executeSearchWithoutSuggestion(): void;\n  closeSuggestions(): void;\n  hideControllerSuggestions(): void;\n  showControllerSuggestions(): void;\n  clearControllerSuggestData(): void;\n  resetKeyboardSelection(): void;\n  dispatchEvent(event: CustomEvent): boolean;\n}\n\n/** Partial options type for more flexible configuration */\nexport type PartialSearchFieldOptions = {\n  valueMappings: Partial<SearchFieldOptions['valueMappings']> & {\n    valueKey: string;\n    labelKey: string;\n  };\n  titleMappings?: { [key: string]: string };\n};\n\n/** Class for search field with suggestions\n * Used by SimpleSearchView, ConditionValueEditorGene, ConditionValueEditorDisease */\n@customElement('search-field-with-suggestions')\nclass SearchFieldWithSuggestions extends LitElement {\n  static styles: CSSResultGroup = [Styles];\n\n  // ============================================================================\n  // Properties (External Configuration)\n  // ============================================================================\n  @property() suggestAPIURL: string = ''; // API URL\n  @property() suggestAPIQueryParam: string = ''; // Query parameter for API\n  @property({ type: Object }) options?: PartialSearchFieldOptions; // Options for the search field\n  @property({ type: Boolean }) hideSuggestions: boolean = false; // Whether to hide suggestions from parent\n\n  // ============================================================================\n  // State Properties (Internal State)\n  // ============================================================================\n  @state() term: string = ''; // Input area value\n  @state() value: string = ''; // Value of selected suggestion\n  @state() label: string = ''; // Label of selected suggestion\n  @state() showSuggestions: boolean = false; // Whether suggestions are displayed\n  @state() suppressSuggestions: boolean = false; // Whether to suppress suggestions after search\n  @state() hasApiResponse: boolean = false; // Whether API response has been received\n  @state() hasUserInput: boolean = false; // Whether user has made input\n  @state() currentSuggestionIndex: number = -1; // Position from top of selection\n  @state() currentSuggestionColumnIndex: number = 0; // Position from side of selection\n  @state() suggestData: { [key: string]: SuggestionData[] } = {}; // Suggest data list\n  @state() private _suggestionKeysArrayInternal: string[] = []; // Suggest content keys\n\n  // ============================================================================\n  // Private Properties\n  // ============================================================================\n  private _controller: SearchFieldController;\n  private _keyboardHandler: SuggestionKeyboardHandler;\n  private _selectionHandler: SuggestionSelectionHandler;\n  private _inputHandler: InputEventHandler;\n  private _searchFieldOptionsInternal: SearchFieldOptions;\n\n  // ============================================================================\n  // Constructor\n  // ============================================================================\n  /**\n   * @param placeholder - Placeholder text\n   * @param suggestAPIURL - URL to fetch suggestions from\n   * @param suggestAPIQueryParam - Query parameter to be used for the API call\n   * @param element - HTML element to which the search field is attached\n   * @param options - Options for the search field\n   */\n  constructor(\n    public placeholder: string,\n    suggestAPIURL: string,\n    suggestAPIQueryParam: string,\n    element?: HTMLElement,\n    options?: PartialSearchFieldOptions\n  ) {\n    super();\n    this.suggestAPIURL = suggestAPIURL;\n    this.suggestAPIQueryParam = suggestAPIQueryParam;\n\n    // SearchFieldOptions\n    this._searchFieldOptionsInternal =\n      createCompleteSearchFieldOptions(options);\n\n    // \n    this._controller = new SearchFieldController(this);\n    this._keyboardHandler = new SuggestionKeyboardHandler(this);\n    this._selectionHandler = new SuggestionSelectionHandler(this);\n    this._inputHandler = new InputEventHandler(this);\n\n    // for only gene\n    if (element) element.appendChild(this);\n  }\n\n  // ============================================================================\n  // Getters\n  // ============================================================================\n  /** API task getter - provides access to the suggestion fetching task */\n  get apiTask() {\n    return this._controller.apiTask;\n  }\n\n  /** Get search field options for handlers */\n  get _searchFieldOptions() {\n    return this._searchFieldOptionsInternal;\n  }\n\n  /** Get suggestion keys array for handlers */\n  get _suggestionKeysArray() {\n    return this._suggestionKeysArrayInternal;\n  }\n\n  /** Set suggestion keys array for handlers */\n  set _suggestionKeysArray(value: string[]) {\n    this._suggestionKeysArrayInternal = value;\n  }\n\n  // ============================================================================\n  // Lifecycle Methods\n  // ============================================================================\n  /** Compute property values that depend on other properties and are used in the rest of the update process */\n  willUpdate(changedProperties: Map<string | number | symbol, unknown>): void {\n    if (changedProperties.has('suggestAPIURL')) {\n      this._controller.setSuggestURL(\n        this.suggestAPIURL,\n        this.suggestAPIQueryParam\n      );\n    }\n\n    if (changedProperties.has('options') && this.options) {\n      // SearchFieldOptions\n      this._searchFieldOptionsInternal = createCompleteSearchFieldOptions(\n        this.options\n      );\n    }\n\n    if (changedProperties.has('hideSuggestions')) {\n      this.showSuggestions = !this.hideSuggestions;\n    }\n  }\n\n  // ============================================================================\n  // Public Event Handlers\n  // ============================================================================\n  /** Select with keydown(ArrowUp, ArrowDown, ArrowLeft, ArrowRight, Enter, Escape) */\n  handleUpDownKeys = (e: KeyboardEvent): void => {\n    return this._keyboardHandler.handleUpDownKeys(e);\n  };\n\n  /** Handle suggestion selected event */\n  handleSuggestionSelected = (e: CustomEvent<SuggestionData>): void => {\n    return this._selectionHandler.handleSuggestionSelected(e);\n  };\n\n  /** Put the characters input in this.term, (Only SimpleSearch)create input-term event, hide suggestions if the length is less than 3, and empty suggestData */\n  handleInput = (e: InputEvent): void => {\n    return this._inputHandler.handleInput(e);\n  };\n\n  /** Initialize currentSuggestion position when input is clicked. */\n  handleClick = (): void => {\n    return this._inputHandler.handleClick();\n  };\n\n  /** Display suggestions, if the input character is greater than 3 when the focus on. */\n  handleFocusIn = (): void => {\n    return this._inputHandler.handleFocusIn();\n  };\n\n  /** Hide suggestions when focus moves away from input */\n  handleFocusOut = (): void => {\n    return this._inputHandler.handleFocusOut();\n  };\n\n  /** Hide suggestions and empty input when input is reset. input-reset event for simple search */\n  handleInputReset = (): void => {\n    return this._inputHandler.handleInputReset();\n  };\n\n  /** Hide suggestions */\n  hideSuggestionsMethod = (): void => {\n    this.showSuggestions = false;\n  };\n\n  /** Put the selected value in value and label, create new-suggestion-selected event, and hide suggestion */\n  selectSuggestion = (suggestion: SuggestionData): void => {\n    return this._selectionHandler.select(suggestion);\n  };\n\n  /** (Only SimpleSearch) Search without suggestions, create search-term-enter event and hide suggest after event firing */\n  searchWithoutSuggestion = (term: string): void => {\n    return this._selectionHandler.searchWithoutSelect(term);\n  };\n\n  /** Select currently highlighted suggestion with keyboard navigation */\n  selectCurrentSuggestion = (): void => {\n    if (this.showSuggestions && this.currentSuggestionIndex !== -1) {\n      const currentSuggestion =\n        this.suggestData[\n          this._suggestionKeysArray[this.currentSuggestionColumnIndex]\n        ][this.currentSuggestionIndex];\n\n      this.selectSuggestion(currentSuggestion);\n      this.resetKeyboardSelection();\n      this.hideSuggestionsMethod();\n    }\n  };\n\n  /** Execute search without suggestion selection */\n  executeSearchWithoutSuggestion = (): void => {\n    this.searchWithoutSuggestion(this.term);\n  };\n\n  /** Close suggestions and suppress further suggestions */\n  closeSuggestions = (): void => {\n    this.hideSuggestionsMethod();\n    this.suppressSuggestions = true;\n  };\n\n  /** Hide suggestions using controller */\n  hideControllerSuggestions = (): void => {\n    this._controller.hideSuggestions();\n  };\n\n  /** Show suggestions using controller */\n  showControllerSuggestions = (): void => {\n    this._controller.showSuggestions();\n  };\n\n  /** Clear suggest data using controller */\n  clearControllerSuggestData = (): void => {\n    this._controller.clearSuggestData();\n  };\n\n  /** Reset keyboard selection */\n  resetKeyboardSelection = (): void => {\n    this._keyboardHandler.resetSelection();\n  };\n\n  // ============================================================================\n  // Protected Methods (Used by Handlers)\n  // ============================================================================\n  /** Handle index of column */\n  protected _handleStepThroughColumns(): void {\n    // \n    if (\n      this.currentSuggestionIndex >\n      this.suggestData[\n        this._suggestionKeysArray[this.currentSuggestionColumnIndex]\n      ]?.length -\n        1\n    ) {\n      this.currentSuggestionIndex =\n        this.suggestData[\n          this._suggestionKeysArray[this.currentSuggestionColumnIndex]\n        ]?.length - 1;\n    }\n  }\n\n  // ============================================================================\n  // Render Method\n  // ============================================================================\n  render(): TemplateResult {\n    return html`\n      <search-field\n        exportparts=\"input-field\"\n        value=${this.term}\n        .placeholder=${this.placeholder}\n        @input-change=${this.handleInput}\n        @click=${this.handleClick}\n        @focusin=${this.handleFocusIn}\n        @focusout=${this.handleFocusOut}\n        @keydown=${this.handleUpDownKeys}\n        @input-reset=${this.handleInputReset}\n      ></search-field>\n      <div class=\"suggestions-container\">\n        ${this.suggestData &&\n        this.showSuggestions &&\n        this.hasApiResponse &&\n        !this.hideSuggestions\n          ? html`\n              ${map(\n                this._suggestionKeysArray,\n                (key: string, keyIndex: number) => {\n                  return html`\n                    <div class=\"column\">\n                      <search-field-suggestions-list\n                        .suggestData=${this.suggestData[key]}\n                        .highlightedSuggestionIndex=\"${keyIndex ===\n                        this.currentSuggestionColumnIndex\n                          ? this.currentSuggestionIndex\n                          : -1}\"\n                        .itemIdKey=${'term'}\n                        .itemLabelKey=${'term'}\n                        .subTextKey=${this._searchFieldOptions?.valueMappings\n                          ?.aliasOfKey}\n                        .hasApiResponse=${this.hasApiResponse}\n                        title=${this._searchFieldOptions?.titleMappings?.[key]}\n                        @suggestion-selected=${this.handleSuggestionSelected}\n                      ></search-field-suggestions-list>\n                    </div>\n                  `;\n                }\n              )}\n            `\n          : nothing}\n      </div>\n    `;\n  }\n}\n\nexport default SearchFieldWithSuggestions;\n","import type { SearchFieldHost } from '../SearchFieldWithSuggestions';\n\n/** InputEventHandler -  */\nexport class InputEventHandler {\n  private host: SearchFieldHost;\n\n  /** @param host - LitElement */\n  constructor(host: SearchFieldHost) {\n    this.host = host;\n  }\n\n  /**  */\n  handleInput = (e: CustomEvent<string> | InputEvent): void => {\n    // \n    let inputValue: string;\n    if (e instanceof CustomEvent) {\n      inputValue = String(e.detail) || '';\n    } else {\n      //  InputEvent  data  target.value \n      const target = e.target as HTMLInputElement;\n      inputValue = target?.value || '';\n    }\n\n    this.host.term = inputValue;\n\n    // \n    this.host.hasUserInput = true;\n\n    // \n    if (this.host.suppressSuggestions) {\n      this.host.suppressSuggestions = false;\n    }\n\n    this.host.dispatchEvent(\n      new CustomEvent('input-term', {\n        detail: inputValue,\n        bubbles: true,\n        composed: true,\n      })\n    );\n\n    // 3\n    if (this.host.term.length < 3) {\n      this.host.hideControllerSuggestions();\n      this.host.clearControllerSuggestData();\n    }\n  };\n\n  /**  -  */\n  handleClick = (): void => {\n    this.host.resetKeyboardSelection();\n  };\n\n  /**  -  */\n  handleFocusIn = (): void => {\n    // \n    if (\n      this.host.term?.length > 3 &&\n      !this.host.suppressSuggestions &&\n      this.host.hasUserInput\n    ) {\n      this.host.showControllerSuggestions();\n    }\n  };\n\n  /**  -  */\n  handleFocusOut = (): void => {\n    this.host.hideSuggestionsMethod();\n  };\n\n  /**  -  */\n  handleInputReset = (): void => {\n    this.host.term = '';\n    this.host.value = '';\n    this.host.label = '';\n    this.host.showSuggestions = false;\n    this.host.hasUserInput = false;\n    this.host.clearControllerSuggestData();\n    this.host.hideSuggestionsMethod();\n    this.host.dispatchEvent(new CustomEvent('input-reset'));\n  };\n\n  /**  */\n  resetInputState(): void {\n    this.host.term = '';\n    this.host.value = '';\n    this.host.label = '';\n  }\n\n  /**  */\n  shouldShowSuggestions(): boolean {\n    return !!(this.host.term && this.host.term.length >= 3);\n  }\n}\n","import { Task } from '@lit-labs/task';\nimport { axios } from '../../../../utils/cachedAxios';\nimport { debounce } from '../../../../utils/debounce';\nimport type {\n  SearchFieldHost,\n  SuggestionData,\n} from '../SearchFieldWithSuggestions';\n\n/** SearchFieldController - API */\nexport class SearchFieldController {\n  private host: SearchFieldHost;\n  apiTask!: Task;\n  private _getSuggestURL: ((text: string) => string) | null = null;\n\n  /** @param host - LitElement */\n  constructor(host: SearchFieldHost) {\n    this.host = host;\n    this._initializeApiTask();\n  }\n\n  /** API */\n  private _initializeApiTask(): void {\n    this.apiTask = new Task(\n      this.host, // SearchFieldHostReactiveControllerHost\n      debounce(async (dependencies: readonly unknown[]) => {\n        const term = dependencies[0] as string;\n        // API\n        if (term && term.length >= 3 && this.host.hasUserInput) {\n          // \n          this.host.showSuggestions = true;\n\n          // API\n          const hadPreviousData =\n            this.host.hasApiResponse &&\n            Object.keys(this.host.suggestData).length > 0;\n          if (!hadPreviousData) {\n            this.host.hasApiResponse = false;\n          }\n\n          if (!this._getSuggestURL) {\n            throw new Error('Suggest URL function is not set');\n          }\n\n          try {\n            const { data } = await axios.get(this._getSuggestURL(term));\n            let dataToReturn: { [key: string]: SuggestionData[] };\n\n            // Make suggestion data same format for simple & gene etc search\n            if (Array.isArray(data)) {\n              // for AdvancedSearch\n              dataToReturn = { data: data as SuggestionData[] };\n              this.host._suggestionKeysArray = ['data'];\n            } else {\n              // for SimpleSearch\n              dataToReturn = data as { [key: string]: SuggestionData[] };\n              this.host._suggestionKeysArray = Object.keys(data);\n            }\n\n            this.host.suggestData = dataToReturn;\n            this.host.hasApiResponse = true;\n            return dataToReturn;\n          } catch (error) {\n            this.host.hasApiResponse = true; // \n            throw error;\n          }\n        }\n\n        // 3\n        // \n        if (!term || term.length < 3) {\n          this.host.showSuggestions = false;\n          this.host.hasApiResponse = false;\n        }\n        return {};\n      }, 300),\n      () => [this.host.term]\n    );\n  }\n\n  /**\n   * APIURL\n   * @param suggestAPIURL - API URL\n   * @param suggestAPIQueryParam - \n   */\n  setSuggestURL(suggestAPIURL: string, suggestAPIQueryParam: string): void {\n    this._getSuggestURL = (text: string): string => {\n      const url = new URL(suggestAPIURL);\n      url.searchParams.set(suggestAPIQueryParam, text);\n      return url.toString();\n    };\n  }\n\n  /** storeManager */\n  hideSuggestions(): void {\n    this.host.showSuggestions = false;\n  }\n\n  /** storeManager */\n  showSuggestions(): void {\n    this.host.showSuggestions = true;\n  }\n\n  /**  */\n  clearSuggestData(): void {\n    this.host.suggestData = {};\n    this.host.hasApiResponse = false;\n  }\n}\n","import type { SearchFieldHost } from '../SearchFieldWithSuggestions';\n\n/** SuggestionKeyboardHandler -  */\nexport class SuggestionKeyboardHandler {\n  private host: SearchFieldHost;\n\n  /** @param host - LitElement */\n  constructor(host: SearchFieldHost) {\n    this.host = host;\n  }\n\n  /** ArrowUp, ArrowDown, ArrowLeft, ArrowRight, Enter, Escape */\n  handleUpDownKeys = (e: KeyboardEvent): void => {\n    const arrowKeys: string[] = [\n      'ArrowUp',\n      'ArrowDown',\n      'ArrowLeft',\n      'ArrowRight',\n    ];\n    if (\n      arrowKeys.includes(e.key) &&\n      this.host.showSuggestions &&\n      this.host.currentSuggestionIndex !== -1\n    ) {\n      e.preventDefault();\n    }\n\n    switch (e.key) {\n      case 'ArrowLeft':\n        this._handleArrowLeft();\n        break;\n\n      case 'ArrowRight':\n        this._handleArrowRight();\n        break;\n\n      case 'ArrowUp':\n        this._handleArrowUp();\n        break;\n\n      case 'ArrowDown':\n        this._handleArrowDown();\n        break;\n\n      case 'Enter':\n        this._handleEnter();\n        break;\n\n      case 'Escape':\n        this._handleEscape();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  /**  -  */\n  private _handleArrowLeft(): void {\n    if (this.host.currentSuggestionColumnIndex - 1 < 0) {\n      this.host.currentSuggestionColumnIndex =\n        this.host._suggestionKeysArray?.length - 1;\n      return;\n    }\n    this.host.currentSuggestionColumnIndex--;\n    this._handleStepThroughColumns();\n  }\n\n  /**  -  */\n  private _handleArrowRight(): void {\n    if (\n      this.host.currentSuggestionColumnIndex + 1 >\n      this.host._suggestionKeysArray?.length - 1\n    ) {\n      this.host.currentSuggestionColumnIndex = 0;\n      return;\n    }\n    this.host.currentSuggestionColumnIndex++;\n    this._handleStepThroughColumns();\n  }\n\n  /**  -  */\n  private _handleArrowUp(): void {\n    if (this.host.currentSuggestionIndex - 1 < 0) {\n      this.host.currentSuggestionIndex =\n        this.host.suggestData[\n          this.host._suggestionKeysArray[this.host.currentSuggestionColumnIndex]\n        ]?.length - 1;\n      return;\n    }\n    this.host.currentSuggestionIndex--;\n  }\n\n  /**  -  */\n  private _handleArrowDown(): void {\n    if (\n      this.host.currentSuggestionIndex + 1 >\n      this.host.suggestData[\n        this.host._suggestionKeysArray[this.host.currentSuggestionColumnIndex]\n      ]?.length -\n        1\n    ) {\n      this.host.currentSuggestionIndex = 0;\n      return;\n    }\n    this.host.currentSuggestionIndex++;\n  }\n\n  /** Enter -  */\n  private _handleEnter(): void {\n    if (this.host.showSuggestions && this.host.currentSuggestionIndex !== -1) {\n      // \n      this.host.selectCurrentSuggestion();\n    } else {\n      // \n      this.host.executeSearchWithoutSuggestion();\n    }\n  }\n\n  /** Escape -  */\n  private _handleEscape(): void {\n    this.host.closeSuggestions();\n  }\n\n  /**  */\n  private _handleStepThroughColumns(): void {\n    if (\n      this.host.currentSuggestionIndex >\n      this.host.suggestData[\n        this.host._suggestionKeysArray[this.host.currentSuggestionColumnIndex]\n      ]?.length -\n        1\n    ) {\n      this.host.currentSuggestionIndex =\n        this.host.suggestData[\n          this.host._suggestionKeysArray[this.host.currentSuggestionColumnIndex]\n        ]?.length - 1;\n    }\n  }\n\n  /**  */\n  resetSelection(): void {\n    this.host.currentSuggestionIndex = -1;\n    this.host.currentSuggestionColumnIndex = 0;\n  }\n}\n","import type {\n  SuggestionData,\n  SearchFieldHost,\n} from '../SearchFieldWithSuggestions';\n\n/**\n * SuggestionSelectionHandler - \n */\nexport class SuggestionSelectionHandler {\n  private host: SearchFieldHost;\n\n  /**\n   * @param host - LitElement\n   */\n  constructor(host: SearchFieldHost) {\n    this.host = host;\n  }\n\n  /**\n   * \n   * @param suggestion - \n   */\n  select = (suggestion: SuggestionData): void => {\n    const valueKey =\n      suggestion[this.host._searchFieldOptions.valueMappings.valueKey] || '';\n    const labelKey =\n      suggestion[this.host._searchFieldOptions.valueMappings.labelKey] || '';\n\n    // \n    this.host.value = this._formatSuggestionValue(valueKey);\n    this.host.label = this._formatSuggestionValue(labelKey);\n\n    // \n    this.host.suppressSuggestions = true;\n    // \n    this.host.hasUserInput = false;\n\n    this.host.dispatchEvent(\n      new CustomEvent('new-suggestion-selected', {\n        detail: { id: this.host.value, label: this.host.label },\n        bubbles: true,\n        composed: true,\n      })\n    );\n  };\n\n  /**\n   * (Only SimpleSearch) \n   * @param term - \n   */\n  searchWithoutSelect = (term: string): void => {\n    // \n    this.host.suppressSuggestions = true;\n    // \n    this.host.hasUserInput = false;\n\n    this.host.dispatchEvent(\n      new CustomEvent('search-term-enter', {\n        detail: term,\n        bubbles: true,\n        composed: true,\n      })\n    );\n    this.host.hideSuggestionsMethod();\n  };\n\n  /**\n   * \n   * @param e - \n   */\n  handleSuggestionSelected = (e: CustomEvent<SuggestionData>): void => {\n    this.select(e.detail);\n  };\n\n  /**\n   * \n   * SimpleSearch\n   * @returns truegene, diseasefalse\n   */\n  private _hasMultipleSuggestionColumns(): boolean {\n    return this.host._suggestionKeysArray.length > 1;\n  }\n\n  /**\n   * \n   * @param str - \n   * @returns \n   */\n  private _escapeString(str: string | undefined): string {\n    return String(str || '')\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g, '\\\\\"');\n  }\n\n  /**\n   * \n   *\n   * SimpleSearch\n   * - \n   * - \n   *\n   * gene, disease\n   * - \n   * - \n   *\n   * @param value - \n   * @returns \n   */\n  private _formatSuggestionValue(value: string): string {\n    const escapedValue = this._escapeString(value);\n\n    if (this._hasMultipleSuggestionColumns()) {\n      // SimpleSearch: \n      return `\"${escapedValue}\"`;\n    } else {\n      // : \n      return escapedValue;\n    }\n  }\n}\n","import type { ConditionTypeValue } from './definition';\nimport type { Reference } from './global';\n\nconst NO_RELATION_BY_REF = {\n  GRCh37: {\n    dataset: true,\n    genotype: true,\n    pathogenicity_prediction: true,\n    id: true,\n    location: true,\n  },\n  GRCh38: {\n    dataset: true,\n    genotype: true,\n    pathogenicity_prediction: true,\n    id: true,\n    location: true,\n  },\n} as const satisfies Record<\n  Reference,\n  Readonly<Partial<Record<ConditionTypeValue, true>>>\n>;\n\nexport type NoRelationType = keyof (typeof NO_RELATION_BY_REF)[Reference];\nexport type KeysWithRelation = Exclude<ConditionTypeValue, NoRelationType>;\n\nexport const supportsRelation = <T extends ConditionTypeValue>(\n  t: T\n): t is Exclude<T, NoRelationType> =>\n  !((t as NoRelationType) in NO_RELATION_BY_REF[TOGOVAR_FRONTEND_REFERENCE]);\n","export const CONDITION_TYPE = {\n  term: 'term',\n  dataset: 'dataset',\n  genotype: 'genotype',\n  frequency: 'frequency',\n  pathogenicity_prediction: 'pathogenicity_prediction',\n  quality: 'quality',\n  type: 'type',\n  significance: 'significance',\n  consequence: 'consequence',\n  consequence_grouping: 'consequence_grouping',\n  sift: 'sift',\n  polyphen: 'polyphen',\n  adv_frequency: 'adv_frequency',\n  disease: 'disease',\n  gene_symbol: 'gene',\n  variant_id: 'id',\n  location: 'location',\n} as const;\n\ntype ConditionTypeKey = keyof typeof CONDITION_TYPE;\nexport type ConditionTypeValue = (typeof CONDITION_TYPE)[ConditionTypeKey];\n\nexport type Option = Readonly<{ value: string; label: string }>;\nexport type ConditionMeta = Readonly<{\n  label: string;\n  supportsRelation?: boolean;\n}>;\nexport type ConditionOptionsMap = Readonly<\n  Partial<Record<ConditionTypeValue, ReadonlyArray<Option>>>\n>;\n\nexport const CONDITION_NODE_KIND = {\n  condition: 0,\n  group: 1,\n};\n\nexport const FREQUENCY_DATASETS = [\n  'gem_j_wga',\n  'jga_wgs',\n  'jga_wes',\n  'jga_snp',\n  'tommo',\n  'ncbn',\n  'gnomad_genomes',\n  'gnomad_exomes',\n] as const;\nexport type FrequencyDataset = (typeof FREQUENCY_DATASETS)[number];\n\nexport const GENOTYPE_KEYS = [\n  'aac',\n  'arc',\n  'rrc',\n  'aoc',\n  'roc',\n  'ooc',\n  'hac',\n  'hrc',\n  'hoc',\n] as const;\nexport type GenotypeKey = (typeof GENOTYPE_KEYS)[number];\n\nexport const SIGNIFICANCE_TERMS = [\n  'NC',\n  'P',\n  'PLP',\n  'LP',\n  'LPLP',\n  'DR',\n  'ERA',\n  'LRA',\n  'URA',\n  'CS',\n  'A',\n  'RF',\n  'AF',\n  'PR',\n  'B',\n  'LB',\n  'CI',\n  'AN',\n  'O',\n  'US',\n  'NP',\n] as const;\nexport type SignificanceTerm = (typeof SIGNIFICANCE_TERMS)[number];\n\nexport const SIGNIFICANCE_TERM_SET: ReadonlySet<SignificanceTerm> = new Set(\n  SIGNIFICANCE_TERMS\n);\n","import * as _ from 'lodash';\nimport {\n  handleHistoryChange,\n  reflectSimpleSearchConditionToURI,\n  reflectAdvancedSearchConditionToURI,\n  setAdvancedSearchCondition,\n} from '../store/searchManager';\nimport { executeSearch } from '../api/fetchData';\nimport type { StoreState, ResultData, SearchMode } from '../types';\n\n// class storeManager extends FormatData {\nclass StoreManager {\n  #bindings: Record<string, any[]> = {}; // TODO: \n  #listeners = new Map<string, Set<(value: any) => void>>();\n  #state: StoreState = {\n    karyotype: '',\n    searchMode: '',\n    simpleSearchConditionsMaster: [],\n    simpleSearchConditions: {},\n    columns: [],\n    searchResults: [],\n    numberOfRecords: 0,\n    offset: 0,\n    rowCount: 0,\n    appStatus: 'preparing',\n    isLogin: false,\n    isFetching: false,\n    isStoreUpdating: false,\n    displayingRegionsOnChromosome: {},\n  };\n\n  constructor() {\n    this.#initSearchCondition();\n  }\n\n  #initSearchCondition() {\n    this.setData('isFetching', false);\n    // events\n    window.addEventListener('popstate', handleHistoryChange.bind(this));\n    this.subscribe('searchMode', this.searchMode.bind(this));\n  }\n\n  /**  */\n  getData<T = any>(key: keyof StoreState): T {\n    return this._deepCopy(this.#state[key]);\n  }\n\n  /**  */\n  setData<T extends keyof StoreState>(key: T, newValue: StoreState[T]) {\n    const oldValue = this.#state[key];\n    // \n    if (typeof newValue !== 'object' || newValue === null) {\n      if (!Object.is(oldValue, newValue)) {\n        this.#state[key] = newValue;\n        this.publish(key);\n      }\n      return;\n    }\n\n    // \n    if (!_.isEqual(oldValue, newValue)) {\n      this.#state[key] = structuredClone(newValue);\n      this.publish(key);\n    }\n  }\n\n  /** \n   * callcackUI */\n  subscribe<T extends keyof StoreState>(\n    key: T,\n    callback: (value: StoreState[T]) => void\n  ) {\n    if (!this.#listeners.has(key)) {\n      this.#listeners.set(key, new Set());\n    }\n    this.#listeners.get(key)?.add(callback);\n  }\n\n  // /**  */\n  // unsubscribe<T extends keyof StoreState>(\n  //   key: T,\n  //   callback: (value: StoreState[T]) => void\n  // ) {\n  //   this.#listeners.get(key)?.delete(callback);\n  // }\n\n  /**  */\n  // TODO: bindings\n  bind<T = any>(key: string, target: T) {\n    if (this.#bindings[key] === undefined) {\n      // \n      this.#bindings[key] = [target];\n    } else {\n      // \n      this.#bindings[key].push(target);\n    }\n  }\n\n  /**  */\n  // TODO: bindings\n  unbind<T = any>(key: string, target: T) {\n    if (this.#bindings[key]) {\n      const index = this.#bindings[key].indexOf(target);\n      if (index !== -1) {\n        this.#bindings[key].splice(index, 1);\n        // \n        if (this.#bindings[key].length === 0) {\n          delete this.#bindings[key];\n        }\n      }\n    }\n  }\n\n  /** listeners */\n  publish<T extends keyof StoreState>(key: T) {\n    this.#listeners.get(key)?.forEach((callback) => callback(this.#state[key]));\n\n    //TODO: bindings\n    if (this.#bindings[key]) {\n      this.#bindings[key].forEach((observer) => {\n        const valueCopy = this._deepCopy(this.#state[key]);\n        if (typeof observer[key] === 'function') {\n          observer[key](valueCopy);\n        } else {\n          console.warn(\n            `This binding has no corresponding function.`,\n            observer,\n            key\n          );\n        }\n      });\n    }\n  }\n\n  /** Deep copy the provided value */\n  _deepCopy<T>(value: T): T {\n    if (value === null || typeof value !== 'object') return value;\n    return structuredClone(value);\n  }\n\n  // ------------------------------\n  //  \n  // ------------------------------\n  /**  */\n  setResults(records: ResultData[], offset: number) {\n    // \n    this.setData('isStoreUpdating', true);\n\n    const updatedResults = Array(this.getData('numberOfRecords')).fill(null);\n\n    // \n    this.getData('searchResults').forEach(\n      (record: ResultData | null, index: number) => {\n        if (record) {\n          updatedResults[index] = record;\n        }\n      }\n    );\n\n    records.forEach((record: ResultData, index: number) => {\n      updatedResults[offset + index] = record;\n    });\n\n    // \n    this.setData('searchResults', updatedResults);\n\n    this.publish('searchResults');\n\n    this.setData('isFetching', false);\n\n    this.setData('isStoreUpdating', false);\n  }\n\n  /** \n   *  'loading'  */\n  getRecordByIndex(index: number) {\n    if (this.getData('isStoreUpdating')) return 'loading';\n    const recordIndex = this.getData('offset') + index;\n\n    if (recordIndex < this.#state.numberOfRecords) {\n      const record = this.#state.searchResults[recordIndex];\n      if (record) return this._deepCopy(record);\n      executeSearch(this.getData('offset') + index);\n      return 'loading';\n    }\n    return 'out of range';\n  }\n\n  // PanelView\n  getSelectedRecord() {\n    if (this.#state.selectedRow !== undefined) {\n      return this.#state.searchResults[\n        this.#state.offset + this.#state.selectedRow\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // ------------------------------\n  //  Login Status\n  // ------------------------------\n  async fetchLoginStatus() {\n    try {\n      // For development on localhost, we intentionally set login status to false.\n      // This avoids authentication checks during local development.\n      if (window.location.origin === 'http://localhost:8000') {\n        this.setData('isLogin', false);\n        return;\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000); // 10\n\n      const response = await fetch(`${window.location.origin}/auth/status`, {\n        signal: controller.signal,\n      }).catch(() => {\n        throw new Error('Request failed or timed out');\n      });\n\n      clearTimeout(timeoutId);\n\n      if (response instanceof Response) {\n        if (response.status === 200) {\n          this.setData('isLogin', true);\n        } else {\n          console.warn(`Not logged in: Received status ${response.status}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching auth status:', error);\n      this.setData('isLogin', false);\n    }\n  }\n\n  // ------------------------------\n  //  \n  // ------------------------------\n  /**  */\n  searchMode(mode: SearchMode) {\n    this.setData('isStoreUpdating', true);\n\n    try {\n      this.setData('offset', 0);\n      this.setData('selectedRow', undefined);\n      this.setData('searchResults', []);\n      this.setData('numberOfRecords', 0);\n      this.setData('rowCount', 0);\n\n      document.body.dataset.searchMode = mode;\n\n      switch (mode) {\n        case 'simple':\n          reflectSimpleSearchConditionToURI();\n          this.publish('simpleSearchConditions');\n          break;\n        case 'advanced': {\n          const condition = this.getData('advancedSearchConditions');\n          setAdvancedSearchCondition(condition);\n          reflectAdvancedSearchConditionToURI();\n          break;\n        }\n      }\n\n      // \n      this.setData('appStatus', 'searching');\n      executeSearch(0, true);\n    } finally {\n      this.setData('isStoreUpdating', false);\n    }\n  }\n}\n\nexport const storeManager = new StoreManager();\n","import { storeManager } from './StoreManager';\n\nexport function initializeApp() {\n  const searchParams = new URLSearchParams(window.location.search);\n  const urlMode = searchParams.get('mode');\n\n  // URL\n  if (urlMode === 'advanced') {\n    storeManager.setData('searchMode', 'advanced');\n  } else {\n    storeManager.setData('searchMode', 'simple');\n  }\n}\n","import * as qs from 'qs';\nimport { executeSearch } from '../api/fetchData';\nimport { storeManager } from '../store/StoreManager';\nimport type {\n  MasterConditions,\n  MasterConditionId,\n  SimpleSearchCurrentConditions,\n} from '../types';\n\nlet _currentUrlParams = qs.parse(window.location.search.substring(1));\n\n// \nsetTimeout(() => {\n  initializeSearchMode();\n}, 100);\n\n/**  */\nexport function extractSearchCondition(\n  currentConditions: SimpleSearchCurrentConditions = {} as SimpleSearchCurrentConditions\n): Record<string, unknown> {\n  const masterSearchConditions: MasterConditions[] = storeManager.getData(\n    'simpleSearchConditionsMaster'\n  );\n\n  const diffConditions: Record<string, unknown> = {};\n  const conditionMap = new Map(\n    masterSearchConditions.map((condition) => [condition.id, condition])\n  );\n\n  for (const [conditionKey, conditionValue] of Object.entries(\n    currentConditions\n  )) {\n    const masterCondition = conditionMap.get(conditionKey as MasterConditionId);\n    if (!masterCondition) continue;\n\n    switch (masterCondition.type) {\n      case 'array': {\n        const filteredValues: Record<string, string | number> = {};\n        if (typeof conditionValue === 'object' && conditionValue !== null) {\n          for (const [itemKey, itemValue] of Object.entries(conditionValue)) {\n            const defaultValue = masterCondition.items?.find(\n              (item) => item.id === itemKey\n            )?.default;\n            if (itemValue !== defaultValue) {\n              filteredValues[itemKey] = itemValue;\n            }\n          }\n        }\n        if (Object.keys(filteredValues).length > 0) {\n          diffConditions[conditionKey] = filteredValues;\n        }\n        break;\n      }\n\n      case 'boolean':\n      case 'string': {\n        const defaultValue = masterCondition.default;\n        if (conditionValue !== defaultValue) {\n          diffConditions[conditionKey] = conditionValue;\n        }\n        break;\n      }\n    }\n  }\n\n  return diffConditions;\n}\n\n// Simple Search ----------------------------------------\n/** SimpleSearch */\nexport function setSimpleSearchCondition<\n  K extends keyof SimpleSearchCurrentConditions\n>(conditionKey: K, conditionValue: SimpleSearchCurrentConditions[K]) {\n  _setSimpleSearchConditions({ [conditionKey]: conditionValue });\n}\n\n/**  */\nfunction _setSimpleSearchConditions(\n  newSearchConditions: Partial<SimpleSearchCurrentConditions>,\n  isFromHistory?: boolean\n) {\n  // \n  const updatedConditions = {\n    ...storeManager.getData('simpleSearchConditions'),\n  };\n  Object.keys(newSearchConditions).forEach((conditionKey) => {\n    const key = conditionKey as keyof SimpleSearchCurrentConditions;\n    updatedConditions[key] = newSearchConditions[key];\n  });\n  storeManager.setData('simpleSearchConditions', updatedConditions);\n\n  // simpleURL\n  if (!isFromHistory && storeManager.getData('searchMode') === 'simple') {\n    reflectSimpleSearchConditionToURI();\n  }\n\n  storeManager.setData('appStatus', 'searching');\n  executeSearch(0, true);\n}\n\n/**  */\nexport function getSimpleSearchCondition(key: MasterConditionId) {\n  return storeManager.getData('simpleSearchConditions')?.[key];\n}\n\n/**  */\nexport function getSimpleSearchConditionMaster(key: MasterConditionId) {\n  return storeManager\n    .getData('simpleSearchConditionsMaster')\n    .find((condition: MasterConditions) => condition.id === key);\n}\n\n/** Simple SearchURL */\nexport function reflectSimpleSearchConditionToURI() {\n  // \n  const currentConditions = storeManager.getData('simpleSearchConditions');\n  const diffConditions = extractSearchCondition(currentConditions);\n\n  // term\n  const currentTerm = currentConditions.term || '';\n\n  // URL\n  if (Object.keys(diffConditions).length === 0 && currentTerm === '') {\n    _currentUrlParams = {\n      mode: 'simple',\n    };\n  } else {\n    // URL\n    _currentUrlParams = {\n      mode: 'simple',\n      ...diffConditions,\n    };\n\n    // term\n    if (currentTerm !== '') {\n      _currentUrlParams.term = currentTerm;\n    } else {\n      delete _currentUrlParams.term;\n    }\n  }\n\n  //URL ()\n  const newUrl = `${window.location.origin}${\n    window.location.pathname\n  }?${qs.stringify(_currentUrlParams)}`;\n  window.history.pushState(_currentUrlParams, '', newUrl);\n}\n\nexport function resetSimpleSearchConditions() {\n  const simpleSearchConditionsMaster = storeManager.getData(\n    'simpleSearchConditionsMaster'\n  );\n  const resetConditions: Partial<SimpleSearchCurrentConditions> = {};\n  for (const condition of simpleSearchConditionsMaster) {\n    switch (condition.type) {\n      case 'string':\n      case 'boolean':\n        if (condition.id !== 'term') {\n          const key = condition.id as keyof SimpleSearchCurrentConditions;\n          (resetConditions as Record<string, unknown>)[key] = condition.default;\n        }\n        break;\n      case 'array':\n        {\n          const temp: Record<string, unknown> = {};\n          for (const item of condition.items) {\n            temp[item.id] = item.default;\n          }\n          const key = condition.id as keyof SimpleSearchCurrentConditions;\n          (resetConditions as Record<string, unknown>)[key] = temp;\n        }\n        break;\n    }\n  }\n  _setSimpleSearchConditions(resetConditions);\n}\n\n// \n/**  */\nexport function handleHistoryChange(_e: PopStateEvent) {\n  // URL\n  const urlParams = qs.parse(window.location.search.substring(1));\n\n  // \n  _setSimpleSearchConditions(\n    urlParams as Partial<SimpleSearchCurrentConditions>,\n    true\n  );\n}\n\n// Advanced Search ----------------------------------------\n/** AdvancedSearch */\nexport function setAdvancedSearchCondition(newSearchConditions: unknown) {\n  storeManager.setData('advancedSearchConditions', newSearchConditions);\n  storeManager.setData('appStatus', 'searching');\n\n  // URL\n  reflectAdvancedSearchConditionToURI();\n\n  executeSearch(0, true);\n}\n\nexport function reflectAdvancedSearchConditionToURI() {\n  _currentUrlParams.mode = 'advanced';\n  window.history.pushState(\n    _currentUrlParams,\n    '',\n    `${window.location.origin}${window.location.pathname}?mode=advanced`\n  );\n}\n\n// \nfunction initializeSearchMode() {\n  const searchParams = new URLSearchParams(window.location.search);\n  const urlMode = searchParams.get('mode');\n\n  // URL\n  if (urlMode === 'advanced') {\n    storeManager.setData('searchMode', 'advanced');\n  } else {\n    storeManager.setData('searchMode', 'simple');\n  }\n}\n","/**\n * Device detection utilities\n * Provides consistent device capability detection across the application\n */\n\n/**\n * Detects if the device supports mouse interaction (hover and fine pointer)\n *\n * Uses CSS Media Queries to detect:\n * - hover capability (can hover over elements)\n * - fine pointer precision (mouse/trackpad vs finger touch)\n *\n * @returns true for desktop/laptop with mouse/trackpad, false for touch-only devices\n *\n * @example\n * ```typescript\n * if (supportsMouseInteraction()) {\n *   // Enable hover effects, precise drag operations\n * } else {\n *   // Enable touch-optimized UI\n * }\n * ```\n */\nexport function supportsMouseInteraction(): boolean {\n  return window.matchMedia('(hover: hover) and (pointer: fine)').matches;\n}\n\n/**\n * Detects if the device should use touch-optimized UI\n *\n * This is the inverse of supportsMouseInteraction() - devices that lack\n * hover capability or fine pointer precision should use touch-optimized interfaces.\n *\n * @returns true for touch devices (tablets, smartphones), false for mouse/trackpad devices\n *\n * @example\n * ```typescript\n * if (isTouchDevice()) {\n *   // Use larger touch targets, disable hover states\n * } else {\n *   // Use precise mouse interactions\n * }\n * ```\n */\nexport function isTouchDevice(): boolean {\n  return !supportsMouseInteraction();\n}\n\n/**\n * Detects if touch events are supported by the browser/device\n *\n * This checks for the presence of touch APIs, but doesn't indicate\n * whether touch is the primary input method. Use isTouchDevice() for UI decisions.\n *\n * @returns true if touch events are available\n */\nexport function hasTouchSupport(): boolean {\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n}\n\n/**\n * Device capability detection result\n */\nexport interface DeviceCapabilities {\n  /** Whether the device supports mouse interaction (hover + fine pointer) */\n  supportsMouseInteraction: boolean;\n  /** Whether the device should use touch-optimized UI */\n  isTouchDevice: boolean;\n  /** Whether touch events are supported */\n  hasTouchSupport: boolean;\n}\n\n/**\n * Gets comprehensive device capability information\n *\n * @returns Object containing all device capability flags\n *\n * @example\n * ```typescript\n * const capabilities = getDeviceCapabilities();\n * console.log(capabilities);\n * // { supportsMouseInteraction: false, isTouchDevice: true, hasTouchSupport: true }\n * ```\n */\nexport function getDeviceCapabilities(): DeviceCapabilities {\n  return {\n    supportsMouseInteraction: supportsMouseInteraction(),\n    isTouchDevice: isTouchDevice(),\n    hasTouchSupport: hasTouchSupport(),\n  };\n}\n","/** Base props for element creation. */\ntype BaseProps<E extends HTMLElement> = {\n  /** CSS class names.\n   *  - string: whitespace-separated, e.g. \"btn btn-primary\"\n   *  - string[]: [\"btn\", \"btn-primary\"] (handy for conditional classes)\n   */\n  class?: string | ReadonlyArray<string>;\n\n  /** Plain HTML attributes (string values), e.g. id, type, role, aria-*. */\n  attrs?: Record<string, string>;\n\n  /** data-* attributes via dataset (camelCase -> data-). */\n  dataset?: Record<string, string>;\n\n  /** Direct assignment to DOM properties (NOT attributes),\n   *  typed to the concrete element (e.g. input.value, img.src, a.href,\n   *  hidden/tabIndex/spellcheck as booleans/numbers). */\n  domProps?: Partial<E>;\n\n  /** Sets textContent (inserted before children). */\n  text?: string;\n\n  /** Ordered children: Nodes or strings (strings become Text nodes). */\n  children?: ReadonlyArray<Node | string>;\n};\n\nexport function createEl<K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  props: BaseProps<HTMLElementTagNameMap[K]> = {}\n): HTMLElementTagNameMap[K] {\n  const el = document.createElement(tag) as HTMLElementTagNameMap[K];\n\n  // classes (string or string[])\n  if (props.class) {\n    if (typeof props.class === 'string') {\n      const tokens = props.class.trim().split(/\\s+/).filter(Boolean);\n      if (tokens.length) el.classList.add(...tokens);\n    } else {\n      const tokens = props.class.filter(Boolean);\n      if (tokens.length) el.classList.add(...tokens);\n    }\n  }\n\n  //  attributes (string values)\n  if (props.attrs) {\n    for (const [k, v] of Object.entries(props.attrs)) {\n      el.setAttribute(k, v);\n    }\n  }\n\n  //  dataset -> data-*\n  if (props.dataset) {\n    for (const [k, v] of Object.entries(props.dataset)) {\n      (el.dataset as DOMStringMap)[k] = v;\n    }\n  }\n\n  // strongly-typed DOM properties (element-specific)\n  if (props.domProps) Object.assign(el, props.domProps);\n\n  //  text first, then children\n  if (props.text != null) {\n    el.textContent = props.text;\n  }\n\n  // children in order (Node or string)\n  if (props.children) {\n    for (const c of props.children) {\n      el.appendChild(\n        c instanceof Node ? c : document.createTextNode(String(c))\n      );\n    }\n  }\n\n  return el;\n}\n","export type QueryRoot = Document | DocumentFragment | Element; // ShadowRoot included\n\n/** Returns required element; throws if not found (fail fast on template regressions). */\nexport function selectRequired<T extends Element>(\n  root: QueryRoot,\n  selector: string,\n  where: string = 'unknown'\n): T {\n  const el = root.querySelector(selector);\n  if (!el) throw new Error(`selector not found: ${selector} (in ${where})`);\n  return el as T;\n}\n\n/** Returns element or null (use when optional). */\nexport function selectOrNull<T extends Element>(\n  root: QueryRoot,\n  selector: string\n): T | null {\n  return root.querySelector(selector) as T | null;\n}\n"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","SELECTION_DEPENDED_ON_PARENT","consequence","disease","ConditionValueEditorColumns","ConditionValueEditor","constructor","conditionValues","conditionView","super","this","_data","_prepareData","_selectionDependedOnParent","conditionType","createSectionEl","_columns","bodyEl","querySelector","_description","_drawColumn","keepLastValues","_lastValues","filter","datum","value","checked","restore","forEach","indexOf","_update","isValid","conditionItemValueViews","length","CONDITION_TYPE","dataset","ADVANCED_CONDITIONS","values","assign","parentId","_getItems","items","column","document","createElement","classList","add","depth","querySelectorAll","append","innerHTML","item","parent","label","undefined","children","join","addEventListener","li","target","closest","find","_updateChildren","parentNode","remove","parseInt","removeChild","left","scrollWidth","clientWidth","scrollTo","top","behavior","reject","child","_updateIndeterminate","checkLeaves","indeterminate","numberOfChecked","childDatum","checkbox","addValueView","removeValueView","update","_validate","ErrorModal","LitElement","properties","erorMessage","type","String","arguments","errorMessage","render","html","styles","css","customElements","define","disconnectedRects","Map","Flip","AsyncDirective","args","element","boundingRect","role","parentRect","nothing","part","options","heroId","scrolledHeroRect","set","getBoundingClientRect","has","y","x","width","height","parentElement","getRootNode","prepareToFlip","noChange","get","delete","flip","listener","removing","previous","deltaY","filteredListener","event","removeEventListener","animate","transform","opacity","onfinish","disconnected","requestAnimationFrame","directive","KEYS_MAP","text","link","cui","OntologyCard","data","state","hidden","Boolean","attribute","reflect","mode","order","prevRect","shouldUpdate","_skipKeys","cardRef","createRef","_leftCoinnector","leftConnectorClassName","rightConnectorClassName","willUpdate","prevParams","leaf","root","prevMode","updated","animProps","duration","easing","animation","overflow","backgroundColor","defaultBgColor","selectedBgColor","firstUpdated","getComputedStyle","getPropertyValue","ref","key","includes","Column","nodes","Array","animationOptions","_handleClick","tagName","dispatchEvent","CustomEvent","detail","rect","bubbles","composed","repeat","node","index","Container","flexRef","clipRef","nodeRef","movement","flexWidth","deltaWidth","nodeWidth","gap","scrolledRect","API","cachedAxios","API_URL","dataColumns","_parents","parents","hero","_children","_id","_loadingStarted","_loadingEnded","changedProperties","right","toUpperCase","slice","updateComplete","suggestAPI","ConditionDiseaseSearch","diseaseId","loading","el","_timer","appendChild","valuesContainerEl","_changeDiseaseEventHadnler","stopPropagation","_loadingStartedHandler","setTimeout","_loadingEndedHandler","clearInterval","connectedCallback","setAttribute","valueMappings","valueKey","labelKey","createRenderRoot","LogarithmizedBlockGraphFrequencyView","alleleCount","total","frequencyValue","alternateAlleleCount","from","frequency","ac","aac","logarithmizedFrequency","an","af","VERTICAL_BLOCK_WIDTH","VERTICAL_BLOCK_HEIGHT","template","searchTypeSimple","className","RangeSlider","HTMLElement","observedAttributes","_slider1Input","_slider2Input","to","_toChange","_fromChange","_invertChange","invert","min","max","match","rulerNumberOfSteps","attachShadow","shadowRoot","content","cloneNode","slider1","slider2","sliderTrack","invertChk","_meter","attributeChangedCallback","name","oldValue","newValue","step","parseFloat","toFixed","_reRenderRuler","_fillSlider","ruler","i","scale","orientation","innerText","style","val1","Math","val2","percentVal1","percentVal2","background","_drawThumbs","getAttribute","value1","value2","sliderStep","inputStep","searchType","_fireEvent","eventKeys","eventData","fromEntries","entries","Proxy","prop","receiver","isNaN","parsedValue","_getToFromFromState","call","Reflect","_formatInputValue","num","str","toString","decimalIndex","currentDecimals","decimals","disconnectedCallback","SideBar","elm","_elm","_body","getElementsByTagName","storeManager","bind","scrollBarWidth","offsetWidth","marginRight","_setupResetButton","resetSimpleSearchConditions","selectedRow","Configuration","bg","PAGE","initHome","typeEscape","close","open","setData","CONFIGURES","constant","COLUMNS","storeKey","container","getElementById","configure","stored","localStorage","getItem","JSON","parse","newItem","isUsed","input","getData","columns","setItem","stringify","ChromosomeView","no","maxLength","_no","_map","_filteredRegion","_displayRegion","_selectedRegion","lowMap","reduce","acc","subBand","band","push","start","end","_length","_svg","chromosomeHeight","offsetHeight","PADDING","rate","stainType","floor","ceil","round","_selectBand","_subbands","subband","_bands","includesSubbands","chr","setSimpleSearchCondition","targetElement","cancelable","displayingRegionsOnChromosome","displayingRegions","displayRegion","clientHeight","regionHeight","updateSelectedPositions","positions","intersection","position","_intersection","range1","range2","CHROMOSOME_KEYS","HEIGHTS","DEFAULT","isOpened","isShowBand","reference","version","chromosomes","selected","region","GRCh37","GRCh38","X","Y","MT","REGEXP","RegExp","karyotype","Karyotype","isReady","chromosomeViews","_changeKaryotype","buttons","button","_bandShowButton","_bandHideButton","async","default","loadKaryotypeData","tsv","geneMap","parseGeneMap","chromosome","_drawChromosome","_pendingSimpleSearchConditions","simpleSearchConditions","_pendingAdvancedSearchConditions","advancedSearchConditions","chromosomeKey","split","params","conditions","result","exec","term","location","gte","lte","_updateLocations","locations","takeOutLocations","condition","isSelectingChromosome","collectedLocations","chromosomeView","ActivityIndicator","appStatus","status","_isReady","init","targets","_globalHeader","_searchInputView","_searchResultsView","_drawerView","_boundUpdateHandler","window","Event","globalHeaderHeight","searchInputHeight","drawerOffsetTop","offsetTop","drawerHeight","innerHeight","updateDisplaySize","cleanup","ModuleTabsView","tabs","sections","tab","section","tabId","tabGroup","TopPageLayoutManager","storedTab","boundUrlParam","param","URL","searchParams","selectedTab","_trigger","WeakMap","_filetype","_path","_DownloadButton_brand","WeakSet","DownloadButton","trigger","_classPrivateFieldInitSpec","_classPrivateFieldSet","filetype","_classPrivateFieldGet","_assertClassBrand","_downloadFile","_downloadFromSimpleSearch","_downloadFromAdvancedSearch","query","anchor","href","click","body","form","action","method","enctype","submit","kind","localStorageKey","toggle","contains","PanelViewCheckList","PanelView","statisticsType","_statisticsType","conditionMaster","_createGUI","getSimpleSearchCondition","_inputsValues","nextElementSibling","_changeFilter","all","count","textContent","toLocaleString","filtered","D","T","PROBD","POSSD","B","U","LP","A","LB","insertAdjacentHTML","isAll","PanelViewFilterAlternativeAlleleFrequency","_conditionMaster","getSimpleSearchConditionMaster","_getConditionFromStore","rangeSlider","changeParameter","_rangeSelectorView","newCondition","PanelViewFilterVariantCallingQuality","change","quality","CollapseView","collapseView","setup","_e","collapseTargets","isParentCollapsed","ancestors","some","tr","TR","display","collapseId","collapseDepth","nextTR","nextSibling","targetDepth","KIND_OF_CONDITION","PanelViewFilterConsequence","grouping","findValues","updateNestedCheckboxes","group","hasChildren","accumulator","values2","concat","statisticsConsequence","PanelViewPreviewGene","table","offset","record","getSelectedRecord","symbols","symbol","synonyms","PreviewToVariantReport","title","_PanelViewPreviewExternalLinks_brand","PanelViewPreviewExternalLinks","_classPrivateMethodInitSpec","list","external_link","dbsnp","_createLinkList","xref","mgend","clinvar","tommo","gnomad","url","PanelViewPreviewAlternativeAlleleFrequencies","tbody","_master","has_freq","_datasets","alt","frequencies","source","DECIMAL_DIGIT","numOfDigits","integerized","padStart","floated","toExponential","strIns","idx","val","PanelViewPreviewConsequence","_content","transcripts","accessions","transcript","first","second","Set","master","accession","description","PanelViewPreviewClinicalSignificance","significance","mergeByMedgen","merged","entry","medgen","medgenName","interpretations","interpretation","groupAndSortByInterpretation","sources","grouped","interpretationKeys","interpretationObj","sort","a","b","nameA","nameB","localeCompare","sensitivity","flat","structuredClone","TippyBox","tooltipElements","setTooltip","json","require","freeze","tooltip","createTemplate","tippy","allowHTML","interactive","theme","placement","appendTo","maxWidth","delay","zIndex","err","console","error","contentP","createAnchor","props","_currentUrlParams","qs","search","substring","ua","navigator","userAgent","toLowerCase","os","setUserAgent","initializeApp","callback","simpleSearchConditionsMaster","TOGOVAR_FRONTEND_REFERENCE","currentSearchMode","extractSearchCondition","readyInitialSearch","resultView","ResultsView","getElement","globalResultsView","initResultsView","SimpleSearchView","AdvancedSearchBuilderView","getAllElements","cleanupApplication","visibilityState","cleanupTogovar","selector","log","destroy","axios","setupCache","Axios","create","headers","Accept","baseURL","maxCacheSize","cache","size","capitalizeFirstLetter","string","charAt","debounce","func","ms","timeout","clearTimeout","apply","keyDownEvent","storeName","LIMIT","currentAbortController","_currentSearchMode","lastRequestRanges","_calculateOffset","limit","roundedOffset","executeSearch","isRequestInProgress","_","isFirstTime","newSearchMode","abort","clear","offsetStart","rangeKey","AbortController","signal","apiEndpoints","basePath","_determineSearchEndpoints","requestOptions","_getRequestOptions","endpoint","response","fetch","ok","jsonResponse","queryParams","rows","isArray","scroll","setResults","_processSearchResults","stat","available","statistics","max_rows","notice","warning","abortError","_fetchData","advancedConditions","toggleAttribute","publish","_updateAppState","catch","advancedSearchBuilderEl","_advancedSearchBuilderEl","_container","selectRequired","_rootGroup","ConditionGroupView","_toolbar","AdvancedSearchToolbar","makeToolbar","_selection","AdvancedSearchSelection","selectedConditionViews","selection","onSelectionChange","caps","_computeSelectionCapabilities","_applyCapabilitiesToDataset","n","canDelete","canGroup","canUngroup","canCopy","v","parentGroup","single","conditionNodeKind","CONDITION_NODE_KIND","next","childViews","_setFlag","changeCondition","_submitAdvancedSearchCondition","getSelectedConditionViews","siblings","insertionEl","minIndex","Infinity","rootEl","newGroup","addNewConditionGroup","selectConditionView","ungroup","deselectConditionView","isGroupView","deleteCondition","views","queryFragment","setAdvancedSearchCondition","addCondition","deselectAllConditions","addNewConditionItem","clearDom","ARIA_SELECTED","builder","_builder","_rootContainer","els","_selectedNodeList","pos","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","viewByEl","view","deselectSelecting","parentEl","existing","_unmarkSelected","_markSelected","_notifyBuilder","select","deselect","removeAttribute","COMMANDS","command","shortcut","formatShortcut","codes","c","fromCharCode","toolbar","_usesSignal","_disposed","_events","_onClick","MouseEvent","Element","cmdEl","_handleCommand","_onKeydown","preventDefault","_initializeToolbar","_attachEventDelegation","addItems","createEl","class","attrs","tabindex","liAdd","commandLis","cmd","ul","replaceChildren","ConditionTypeValue","CHILD_VIEW_SEL","BaseConditionView","parentContainer","logicalOperator","conditionViews","referenceElm","isRoot","_isRoot","_buildDOM","_attachEvents","cv","_childContainerEl","_mutationObserver","_createChildObserver","_syncNumberOfChildren","ConditionItemView","addConditionViews","insertBefore","removeConditionView","disconnect","_logicalOperatorSwitch","operator","op","validFragments","fragment","_toggleSelection","_notifyChanged","observer","MutationObserver","_numberOfChildren","isConnected","observe","childList","subtree","numberOfChild","createTextNode","_isFirstTime","_keepLastRelation","_keydownEscapeEvent","_revertChanges","doneEditing","_conditionType","_relationSupported","supportsRelation","_initializeHTML","_conditionValues","_enterEditMode","_toggleGlobalKeydown","updateClassificationText","newText","_classificationEl","_valuesContainerEl","editorElement","_editorEl","keepLastRelation","relation","_readRelation","buildQueryFragment","valuesContainer","classification","_generateDOM","_setRelation","cond","relationChild","_relationEl","_summaryEl","_btnEdit","_btnDelete","_toggleRelation","r","startToEditCondition","enable","fn","editor","editors","_conditionItemView","_sectionEl","sectionEl","DocumentFragment","frag","createDocumentFragment","isOnly","showDeleteButton","valueView","selectOrNull","deleteButton","conditionItemView","applyOptions","_options","ConditionValueEditorCheckboxes","_checkboxes","domProps","cb","LABELS","ConditionValueEditorClinicalSignificance","_values","_mgendUl","_clinvarUl","mgendVals","_filterValues","clinvarVals","_generateCheckboxListNodes","_attachCheckboxEventsDelegated","_attachButtonEvents","mgendNodes","clinvarNodes","src","HTMLInputElement","matches","check","_renderSource","_removeConditionWrapper","wrapper","_ensureWrapperExists","chip","wrapperClass","conditionWrapperClass","outer","conditionWrapper","ConditionValueEditorDatasetColumns","valuesView","_lastValueViews","_dataProcessor","DatasetTreeDataProcessor","_renderer","DatasetColumnRenderer","Date","now","random","_eventHandler","DatasetColumnEventHandler","_checkStateManager","DatasetCheckStateManager","_valueViewManager","DatasetValueViewManager","prepareHierarchicalData","_nodesToShowInValueView","_initializeUI","_initializeWithLoginStatus","fetchLoginStatus","_renderInitialColumn","resetAllCheckStates","restoreCheckedStates","updateChildrenCheckState","updateParentCheckState","_updateUI","userIsLoggedIn","loginStatus","childItems","_getChildItems","newColumnElement","_createColumnElement","_generateColumnList","_attachColumnEventListeners","_scrollToRevealNewColumn","hierarchyItems","generateColumnList","createColumnElement","_addLoginPromptColumn","addLoginPromptColumn","attachCheckboxEventListeners","attachArrowClickEventListeners","listItem","_handleArrowClick","clearSelectionAndSubColumns","updateCheckboxStatesInDOM","_syncValueViewsWithSelection","_processNodesToShowInValueView","getOptimalNodesToShow","selectedNode","getLabelWithPath","ConditionValueEditorDisease","_initializeElements","_setupEventListeners","_conditionElem","_handleDiseaseSelection","customEvent","_selectDisease","_clearSelection","diseaseData","SELECTORS","ConditionValueEditorFrequencyCount","_filtered","_lastValue","_radioGroupName","_idCounter","_condition","DEFAULT_CONDITION","arc","hac","_mode","MODE","alt_alt","_initializeComponent","_observeValueChanges","_updateErrorMessageVisibility","_getModeDisplayText","currentCondition","countCondition","attributes","_createBodyElements","_setupRangeSlider","_createGenotypeElements","_createDatasetElements","_createFrequencySection","_createCountSection","_createFilteredSection","alt_ref","hemi_alt","option","shouldShowError","_isCurrentConditionInvalid","filteredCheckboxId","for","rangeContainer","shadowHost","checkboxInShadow","_setupModeToggleListeners","_setupCountInputListeners","_setupFilteredCheckboxListener","switchingElements","_handleModeChange","defaultMode","htmlEl","_handleCountInputChange","trim","numValue","Number","isInvalid","currentSection","messagesView","_applyConditionToAllViews","freqCountView","_getFrequencyCountView","_updateFrequencyCountView","setValues","invertValue","isFiltered","fromValue","_formatFrequencyValue","toValue","ConditionValueEditorGene","_value","_label","_lastLabel","_handleSuggestSelect","_searchFieldView","aliasOfKey","CHROMOSOME_OPTIONS","INPUT_MODE","ConditionValueEditorLocation","_karyotypeData","_savedState","_buildUI","_loadKaryotypeData","_attachEventListeners","_initializeFromExistingValue","_chromosomeSelect","startPosition","_startPositionInput","endPosition","_endPositionInput","isSinglePosition","_singlePositionCheckbox","_loadFromValueViews","_updateValueAndValidation","_positionInputContainer","maxPosition","_getChromosomeMaxPosition","_updatePositionConstraints","_isValidRegion","_isValidSinglePosition","modeToggleRow","_createModeToggleRow","positionInputRow","_createPositionInputRow","_createPositionInputContainer","_enforcePositionLimits","rawValue","parsed","_parseLocationString","_applyParsedLocation","locationStr","hasStartValue","hasEndValue","startLessThanEnd","chromosomeInfo","existingValueView","locationString","_buildLocationString","_updateOrCreateValueView","existingView","opts","chrStr","startNum","endNum","ConditionValueEditorPathogenicityPrediction","_dataset","_inequalitySigns","_includeUnassigned","_includeUnknown","_lastState","inequalitySigns","includeUnassigned","includeUnknown","_initializeDefaultValues","_initializeEvents","pv","_addPredictionValueView","_tabsContainer","_createTabView","_updateValuesAndSigns","_switchTab","PREDICTIONS","flags","d","arr","unassignedChecks","normalizeIncludeFlags","tabView","datasets","isFinite","ConditionValueEditorVariantID","_handleDeleteValue","hasChildNodes","isSelected","descendants","descendant","childNode","explicitSelectionState","_calculateParentStateFromChildren","fullySelectedChildren","partiallySelectedChildren","allChildrenSelected","someChildrenSelected","hasPartiallySelectedChildren","columnsContainer","datasetTree","eachAfter","datasetNode","checkboxElement","columnElement","propagateToChildren","updateParentStates","refreshUserInterface","clickedCheckbox","isNowSelected","listItemElement","datasetId","clickedDatasetNode","handleNavigationClick","navigationArrow","clickedArrowElement","parentListItem","clickedListItem","currentColumnElement","allColumnsContainer","parentListContainer","currentNavigationDepth","columnInContainer","instancePrefix","_instancePrefix","datasetNodes","_createListItemElement","uniqueCheckboxId","selectionElement","shouldShowLockIcon","categoryIcon","shouldShowDatasetIcon","labelText","labelElement","loginPromptColumn","genotype","_uniqueIdCounter","_addNodeIds","rawDataNodes","rawNode","isInteger","uiReadyNode","conditionDefinition","rawDatasetConfiguration","uiReadyDataNodes","hierarchy","ROOT_NODE_ID","each","savedSelections","savedSelection","nodeToRestore","currentNode","every","flatMap","datasetTreeRoot","fullPathNodes","path","reverse","meaningfulPathNodes","pathNode","EDITOR_REGISTRY","gene_symbol","pathogenicity_prediction","variant_id","_editors","_conditionView","_wireEvents","_instantiateEditorsFor","ed","_recomputeValidity","isValidHint","allEditorsValid","finalValid","_setOkEnabled","_sectionsEl","_okButtonEl","disabled","_cancelButtonEl","stopImmediatePropagation","ctors","Ctor","enabled","_rootEl","childEls","groupEl","getFrequencyCount","ctx","queries","fc","queryValue","or","terms","s","geneIds","uniqueIds","gene","BUILDERS","buildDefaultQuery","buildDatasetQuery","buildSignificanceQuery","buildGeneQuery","buildLocationQuery","buildPathogenicityQuery","buildVariantIdQuery","v0","raw","m","chromosomeRaw","startStr","endStr","predictionValueEl","getPrediction","mgendEls","pickScoped","SEL","clinvarEls","buildSourceCondition","clause","and","isSignificanceTerm","SIGNIFICANCE_TERM_SET","elements","collectTerms","context","REF_ALT_SHOW_LENGTH","COLUMN_TEMPLATES","togovar_id","refsnp_id","ref_alt","clinical_significance","alphamissense","sift","polyphen","updateTogovarId","updateRefSNP","tdRS","tdRSAnchor","remains","updatePosition","tdPositionChromosome","tdPositionCoordinate","updateRefAlt","tdRefAltRef","tdRefAltAlt","alternate","refData","formatRefAltData","altData","sum","sequence","formatRefAlt","updateVariantType","updateGene","tdGene","tdGeneAnchor","updateAltFrequency","tdFrequencies","freq","updateConsequence","tdConsequence","tdConsequenceItem","mostConsequence","uniqueConsequences","updateClinicalSignificance","tdClinicalSign","tdClinicalAnchor","tdClinicalIcon","significances","resetClinicalSignificance","firstSignificance","firstCondition","updateClinicalCondition","updateClinicalMetadata","hasMedgen","updateFunctionPrediction","score","classifyScore","function","updateAlphaMissense","_score","updateSift","updatePolyphen","_isDestroyed","togovarIdAnchor","refsnpCell","refsnpAnchor","positionChromosome","positionCoordinate","refElement","altElement","typeElement","geneCell","geneAnchor","frequencyElements","consequenceCell","consequenceItem","clinicalSignificance","clinicalAnchor","clinicalIcon","alphaMissenseFunction","siftFunction","polyphenFunction","_createTableRow","unbind","updateTableRow","_setLoadingState","_setOutOfRangeState","getRecordByIndex","_prepareTableData","_updateColumnContent","selectedIndex","_handleRowClick","_createTableCellHTML","_cacheTableCells","createFrequencyColumnHTML","_cacheBasicElements","_cacheFrequencyElements","_cacheFunctionElements","tdPosition","tdRefAlt","tdClinical","tdAlphaMissense","tdSift","tdPolyphen","columnHandlers","ResultsColumnUpdater","existing_variations","alt_frequency","most_severe_consequence","tapCompletedEvent","rowIndex","containerElement","_lastScrollPosition","ScrollBarRenderer","createScrollBarHTML","scrollBar","initializeElements","_scrollBarElement","_positionLabel","_totalLabel","_dragManager","DragManager","scrollBarElement","onDragCallback","_handleDrag","onVisualStateChange","_handleVisualStateChange","_bindStoreEvents","resetCursorStyle","initializeDragManager","updatePositionLabel","_synchronizeScrollBarWithStore","matchMedia","numberOfRecords","updateTotalLabel","rowCount","setInactive","setActive","destroyDragManager","clearAllTimeouts","handleScrollWithFeedback","touchStartOffset","visibleRowCount","_getStoreData","totalRecordCount","newOffset","calculateTouchBasedRowOffset","boundedOffset","constrainRowOffsetToValidRange","TR_HEIGHT","updateDirectly","handleScroll","calculation","calculateNewScrollPosition","newScrollPosition","convertScrollPositionToRowOffset","calculateScrollbarDimensions","applyScrollBarStyles","resetScrollPosition","defaultValue","_getScrollData","updateScrollBarVisualState","updateScrollBarPosition","mockEvent","_processDragPosition","ui","availableHeight","offsetRate","activateDragStateWithAutoRelease","isDragging","updateCursorStyle","updateDraggingState","STORE_BINDINGS","messages","thead","tablecontainer","_getDOMElements","_connectToStoreManager","_configureScrollBar","_initializeTableHeader","stylesheet","_createStylesheet","_initializeComponentHandlers","_configureInitialState","_initializeSearchModeListener","touchHandler","dataManager","_boundKeydownHandler","handleOffsetChange","searchMessages","handleSearchMessages","searchStatus","handleSearchStatus","searchResults","_results","handleSearchResults","isTouchDevice","setElementsInteractable","handleColumnsChange","_karyotype","_keydown","ResultsScrollBar","ResultsViewTouchHandler","ResultsViewDataManager","_configureEventHandlers","getWheelEventName","_scroll","setScrollCallbacks","onScrollStart","onScroll","currentOffset","onScrollEnd","shiftSelectedRow","subscribe","_newMode","_status","_messages","_tbody","_stylesheet","_rows","_displayManager","ResultsViewDisplayManager","setTouchElementsPointerEvents","_appendMessageIfExists","_updateNotFoundState","_offset","_shouldSkipOffsetUpdate","_calculateDisplayingRegions","direction","_getSelectionState","newIndex","_calculateNewIndex","adjustedOffset","_adjustOffsetForSelection","row","chromosomePositions","_isValidRecord","_convertToRegions","obj","regions","message","isNotFound","currentIndex","_shouldSkipUpdate","_calculateDisplaySize","_ensureRowsExist","_adjustOffset","_updateRowsWithAnimation","isUpdating","isFetching","_validateData","warn","_clearExistingStyles","_applyColumnStyles","_calculateAvailableHeight","maxRowCount","karyotypeHeight","COMMON_FOOTER_HEIGHT","requiredRowCount","rowView","ResultsRowView","emptySpace","_calculateAdjustedOffset","results","sheet","cssRules","deleteRule","displayValue","rule","insertRule","TOUCH_CONFIG","_tablecontainer","_touchState","startY","startX","startTime","lastY","lastX","distance","isScrolling","_scrollCallbacks","_boundHandlers","touchStart","_handleTouchStart","touchMove","_handleTouchMove","touchEnd","_handleTouchEnd","tapCompleted","_handleTapCompleted","_setupTouchEvents","callbacks","pointerEvents","passive","_isValidTouchTarget","touches","_resetTouchState","touch","clientY","clientX","gesture","_analyzeTouchGesture","isScroll","currentY","currentX","deltaX","sqrt","abs","isTap","currentTarget","config","_isTouchDragging","_touchStartY","_touchStartTop","_onDragCallback","_onVisualStateChange","_boundMouseDown","_onMouseDown","_boundMouseMove","_onMouseMove","_boundMouseUp","_onMouseUp","_boundTouchStart","_onTouchStart","_boundTouchMove","_onTouchMove","_boundTouchEnd","_onTouchEnd","_supportsMouseInteraction","_initializeMouseDrag","_initializeTouchDrag","_removeMouseEventListeners","_removeTouchEventListeners","_resetState","supportsMouseInteraction","_mouseDragState","startTop","_attachMouseEventListeners","_getCurrentScrollBarTop","newTop","constrainedTop","_constrainPositionWithinBounds","_attachTouchEventListeners","TOUCH_EVENT_OPTIONS","maxTop","positionLabel","totalLabel","CLASS_BAR","CLASS_POSITION","CLASS_TOTAL","barHeight","barTop","CLASS_ACTIVE","CLASS_DISABLED","CLASS_DRAGGING","_releaseTimeoutId","cursor","CLASS_CURSOR_GRABBING","CLASS_CURSOR_GRAB","clampValueWithinBounds","currentScrollPosition","totalContentHeight","maxScrollableDistance","totalHeight","availableScrollY","scrollPosition","viewportHeight","movementRatio","maxOffset","currentRowOffset","visibilityRatio","scrollbarHeight","MIN_SCROLLBAR_HEIGHT","positionRatio","scrollbarTopPosition","displayRate","bounds","ConditionItemValueView","_handleDelete","property","customElement","ALPHAMISSENSE_THRESHOLD","color","minInequalitySign","maxInequalitySign","Ambiguous","unassignedLists","threshold","Tolerated","Deleterious","Benign","Possibly_damaging","Probably_damaging","SLIDER_CONFIG","SCALE_INTERVAL","PredictionRangeSlider","predictionScoreName","minValue","maxValue","activeDataset","_handleThresholdButton","btn","_rangeInput","_numberInput","setInequalitySign","_inequalitySign","_range","backgroundImage","createGradientSlider","changed","_handleSliderValues","primaryInputs","secondaryInputs","_handleInequalitySign","prev","inequalitySign","toggleInequality","_handleLabelCheckbox","_switchInequalitySign","sign","newSign","newHtml","createNumberInput","createRangeInput","createInequalitySignButton","createLabelCheckboxes","range","details","queryAll","HTMLDivElement","makeLeaf","k","PredictionValueView","_activeDataset","_setBarStyles","_inequalitySignsEl","requestUpdate","_bar","_noLabelSelected","_toScoreRange","_labelScoreFor","lt","gt","TabView","_handleSwitchTab","activePanelId","replace","activePanel","_sliders","p","_tabButtons","_emitSwitchTab","rangeEl","sliderWidth","leftRatio","barEl","leftValue","clamp","getLeftRatio","stops","offsetPx","SYMBOL","DATASET_MODES","GENOTYPE_MODES","FrequencyCountValueView","_renderRangeDisplay","_formatDisplayValue","_getDecimalPlaces","_bars","_createScaleElements","frequencyGraph","scaleTemplate","_updateBarVisualization","_setInvertBarMode","_setNormalBarMode","_buildDatasetQuery","_buildGenotypeQuery","_buildInvertedDatasetQuery","_buildNormalDatasetQuery","field","_buildRangeValues","hasFrom","hasTo","SearchField","placeholder","_inputRef","_handleLoad","_handleInput","_handleForm","_handleResetClick","SearchButton","EXAMPLES","SEARCH_FIELD_CONFIG","suggestAPIURL","suggestAPIQueryParam","titleMappings","CHROMOSOME_PATTERN","host","test","updateTerm","_term","currentConditions","reset","_hideSuggestions","selectSuggestion","suggestion","selectExample","example","executeCurrentSearch","executeButtonSearch","controller","handleSuggestionEnter","handleExampleSelected","handleInputTerm","handleTermEnter","handleSearchButtonClick","handleInputStart","handleInputReset","SimpleSearchExamples","examples","handleClick","_handleSearchButtonClick","_eventHandlers","_handleExampleSelected","_controller","SimpleSearchController","SimpleSearchEventHandlers","eventHandlers","ScrollIntoView","_getElementFromPart","_scrollParentToChild","_isElementViewable","childRect","viewableArea","bottom","_calculateScrollDirection","scrollTop","scrollBot","shouldScrollTop","scrollCalc","scrollAmount","scrollIntoView","SearchFieldSuggestionsList","suggestData","highlightedSuggestionIndex","itemIdKey","itemLabelKey","subTextKey","hasApiResponse","_handleSelect","unsafeHTML","highlight","DEFAULT_VALUE_MAPPINGS","createCompleteSearchFieldOptions","SearchFieldWithSuggestions","hideSuggestions","showSuggestions","suppressSuggestions","hasUserInput","currentSuggestionIndex","currentSuggestionColumnIndex","_suggestionKeysArrayInternal","handleUpDownKeys","_keyboardHandler","handleSuggestionSelected","_selectionHandler","handleInput","_inputHandler","handleFocusIn","handleFocusOut","hideSuggestionsMethod","searchWithoutSuggestion","searchWithoutSelect","selectCurrentSuggestion","currentSuggestion","_suggestionKeysArray","resetKeyboardSelection","executeSearchWithoutSuggestion","closeSuggestions","hideControllerSuggestions","showControllerSuggestions","clearControllerSuggestData","clearSuggestData","resetSelection","_searchFieldOptionsInternal","SearchFieldController","SuggestionKeyboardHandler","SuggestionSelectionHandler","InputEventHandler","apiTask","_searchFieldOptions","setSuggestURL","_handleStepThroughColumns","keyIndex","inputValue","resetInputState","shouldShowSuggestions","_getSuggestURL","_initializeApiTask","Task","dependencies","dataToReturn","_handleArrowLeft","_handleArrowRight","_handleArrowUp","_handleArrowDown","_handleEnter","_handleEscape","_formatSuggestionValue","_hasMultipleSuggestionColumns","_escapeString","escapedValue","NO_RELATION_BY_REF","consequence_grouping","adv_frequency","FREQUENCY_DATASETS","GENOTYPE_KEYS","SIGNIFICANCE_TERMS","handleHistoryChange","searchMode","isLogin","isStoreUpdating","_deepCopy","isEqual","is","splice","valueCopy","records","updatedResults","fill","recordIndex","origin","timeoutId","Response","reflectSimpleSearchConditionToURI","reflectAdvancedSearchConditionToURI","URLSearchParams","conditionKey","conditionValue","_setSimpleSearchConditions","resetConditions","temp","newSearchConditions","masterSearchConditions","diffConditions","conditionMap","masterCondition","filteredValues","itemKey","itemValue","isFromHistory","updatedConditions","currentTerm","newUrl","pathname","history","pushState","initializeSearchMode","hasTouchSupport","maxTouchPoints","tag","tokens","where"],"sourceRoot":""}